/*! For license information please see main.d9580092.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),xe(e.stateNode,e.type,t))}}function Te(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Se(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==_e||null!==Ie)&&(Ae(),Se())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,_t,It,Et,Tt=!1,St=[],Ct=null,At=null,Nt=null,Dt=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Dt.forEach(Vt),Rt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<St.length){Bt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=w.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return In}var Tn=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Gn(t,Hn,e,be(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},_r={},Ir={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Tr=Er("animationend"),Sr=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Or=Dr[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Sr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=be(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Tr:case Sr:case Cr:s=yn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?wi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Wr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ti(e,t){_i++,xi[_i]=e.current,e.current=t}var Si={},Ci=Ii(Si),Ai=Ii(!1),Ni=Si;function Di(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ai),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Si)throw Error(a(168));Ti(Ci,t),Ti(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ni=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Ti(Ci,e)):Ei(Ai),Ti(Ai,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{kt=t,ji=!1}}return null}var qi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Ki++]=Wi,qi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Sa(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ni:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Ja=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ti(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,wo=0,bo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function So(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ro(e,t){var n=vo,r=So(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return So().memoizedState}function Bo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return So().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Sa(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(So(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],So().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=So();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],So().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ws=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Su(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Os,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Os,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Os,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Os,Ps),Ps|=r;return bu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,r,i){var a=Ri(n)?Ni:Ci.current;return a=Di(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Ri(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Na?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Ri(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Na?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Ru,Pu,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Pu(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Pu(e,t),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Ju=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Je())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ms(t,e),Ju=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,ws(e,t,n)}function ws(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=$u;var c=Ju;if($u=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,ws(a,t,n),a=a.sibling;Zu=i,$u=u,Ju=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Is,Es=Math.ceil,Ts=w.ReactCurrentDispatcher,Ss=w.ReactCurrentOwner,Cs=w.ReactCurrentBatchConfig,As=0,Ns=null,Ds=null,Rs=0,Ps=0,Os=Ii(0),Ls=0,Ms=null,Fs=0,Us=0,Vs=0,js=null,Bs=null,zs=0,qs=1/0,Ks=null,Gs=!1,Ws=null,Hs=null,Qs=!1,Ys=null,$s=0,Js=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Ns||(e===Ns&&(0===(2&As)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(qs=Je()+500,Vi&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Ns===e&&Rs===t||(Ks=null,qs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}ba(),Ts.current=o,As=i,null!==Ds?t=0:(Ns=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Bs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bs,Ks),t);break}xc(e,Bs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bs,Ks),r);break}xc(e,Bs,Ks);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bs,Ks),ic(e,Je()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(qs=Je()+500,Vi&&zi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&As)&&_c();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&zi()}}function hc(){Ps=Os.current,Ei(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Ds=e=Oc(e.current,null),Rs=Ps=t,Ls=0,Ms=null,Vs=Us=Fs=0,Bs=js=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function pc(e,t){for(;;){var n=Ds;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,wo=0,Ss.current=null,null===n||null===n.return){Ls=1,Ms=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function vc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Fs)&&0===(268435455&Us)||sc(Ns,Rs)}function yc(e,t){var n=As;As|=2;var r=vc();for(Ns===e&&Rs===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(ba(),As=n,Ts.current=r,null!==Ds)throw Error(a(261));return Ns=null,Rs=0,Ls}function gc(){for(;null!==Ds;)wc(Ds)}function kc(){for(;null!==Ds&&!Ye();)wc(Ds)}function wc(e){var t=Is(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bc(e):Ds=t,Ss.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ps)))return void(Ds=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Ls=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Ys);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ds=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Ss.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ec(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ws,Ws=null,e;0!==(1&$s)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Xs?Js++:(Js=0,Xs=e):Js=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==Ys){var e=wt($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var w=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Zu=w;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Ec(s,s.return,x)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Je()-zs?dc(e,0):Vs|=n),ic(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return He(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case S:u=9;break e;case C:u=11;break e;case D:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function zc(e){if(!e)return Si;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Gu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Su(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ga(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&As)&&(qs=Je()+500,zi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Te,Se,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var w=k.prototype=new g;w.constructor=k,v(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,w(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(T),T=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,T=-1,S=5,C=-1;function A(){return!(t.unstable_now()-C<S)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=N,_=function(){R.postMessage(null)}}else _=function(){y(N,0)};function P(e){E=e,I||(I=!0,_())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return bt},SDK_VERSION:function(){return Fn},_DEFAULT_ENTRY_NAME:function(){return In},_addComponent:function(){return Cn},_addOrOverwriteComponent:function(){return An},_apps:function(){return Tn},_clearComponents:function(){return Pn},_components:function(){return Sn},_getProvider:function(){return Dn},_registerComponent:function(){return Nn},_removeServiceInstance:function(){return Rn},deleteApp:function(){return Bn},getApp:function(){return Vn},getApps:function(){return jn},initializeApp:function(){return Un},onLog:function(){return Kn},registerVersion:function(){return qn},setLogLevel:function(){return Gn}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||s(e,t)||c()}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||f(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=b();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,n)}}function I(e,t,n){return I=b()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},I.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},E(e)}function T(e){return o(e)||f(e)||s(e)||c()}function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var A,N="popstate";function D(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function R(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function P(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function M(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function F(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=t.Pop;var e=p(),n=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:n})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:L(e);return D(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(N,v),h=e,function(){u.removeEventListener(N,v),h=null}},createHref:function(e){return n(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=O(y.location,e,n);r&&r(i,e);var a=P(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;u.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;var i=O(y.location,e,n);r&&r(i,e);var a=P(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(A||(A={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function U(e,t,n){void 0===n&&(n="/");var r=X(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;var i=V(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Y(i[o],J(r));return a}function V(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(D(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=ne([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),V(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:Q(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=S(j(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function j(e){var t=e.split("/");if(0===t.length)return[];var n=T(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=j(i.join("/")),s=[];return s.push.apply(s,h(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,h(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var B=/^:\w+$/,z=3,q=2,K=1,G=10,W=-2,H=function(e){return"*"===e};function Q(e,t){var n=e.split("/"),r=n.length;return n.some(H)&&(r+=W),t&&(r+=q),n.filter((function(e){return!H(e)})).reduce((function(e,t){return e+(B.test(t)?z:""===t?K:G)}),r)}function Y(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=$({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:ne([i,l.pathname]),pathnameBase:re(ne([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ne([i,l.pathnameBase]))}return a}function $(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);R("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return R(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function J(e){try{return decodeURI(e)}catch(t){return R(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ee(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function te(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=M(e):(D(!(i=C({},e)).pathname||!i.pathname.includes("?"),Z("?","pathname","search",i)),D(!i.pathname||!i.pathname.includes("#"),Z("#","pathname","hash",i)),D(!i.search||!i.search.includes("#"),Z("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?M(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ie(a),hash:ae(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ne=function(e){return e.join("/").replace(/\/\/+/g,"/")},re=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ae=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},oe=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(E(Error));function ue(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var se=["post","put","patch","delete"],ce=(new Set(se),["get"].concat(se));new Set(ce),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var fe=r.createContext(null);var he=r.createContext(null);var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext(null);var me=r.createContext({outlet:null,matches:[],isDataRoute:!1});var ye=r.createContext(null);function ge(){return null!=r.useContext(ve)}function ke(){return ge()||D(!1),r.useContext(ve).location}function we(e){r.useContext(pe).static||r.useLayoutEffect(e)}function be(){return r.useContext(me).isDataRoute?function(){var e=De(Ee.UseNavigateStable).router,t=Pe(Te.UseNavigateStable),n=r.useRef(!1);we((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,le({fromRouteId:t},i)))}),[e,t]);return i}():function(){ge()||D(!1);var e=r.useContext(fe),t=r.useContext(pe),n=t.basename,i=t.navigator,a=r.useContext(me).matches,o=ke().pathname,u=JSON.stringify(ee(a).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);we((function(){s.current=!0}));var c=r.useCallback((function(t,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof t){var a=te(t,JSON.parse(u),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:ne([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,u,o,e]);return c}()}function xe(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(me).matches,a=ke().pathname,o=JSON.stringify(ee(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return te(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function _e(e,n,i){ge()||D(!1);var a,o=r.useContext(pe).navigator,u=r.useContext(me).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,ke());if(n){var h,d="string"===typeof n?M(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||D(!1),a=d}else a=f;var p=a.pathname||"/",v=U(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=Ne(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ne([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ne([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,i);return n&&m?r.createElement(ve.Provider,{value:{location:le({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},m):m}function Ie(){var e=function(){var e,t=r.useContext(ye),n=Re(Te.UseRouteError),i=Pe(Te.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=ue(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Ee,Te,Se=r.createElement(Ie,null),Ce=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(me.Provider,{value:this.props.routeContext},r.createElement(ye.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Ae(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(fe);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(me.Provider,{value:t},i)}function Ne(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,u=null==(i=n)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||D(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Se);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=s?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ae,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Ce,{location:n.location,revalidation:n.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function De(e){var t=r.useContext(fe);return t||D(!1),t}function Re(e){var t=r.useContext(he);return t||D(!1),t}function Pe(e){var t=function(e){var t=r.useContext(me);return t||D(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||D(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Ee||(Ee={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Te||(Te={}));var Oe;i.startTransition;function Le(e){D(!1)}function Me(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;ge()&&D(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=M(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,w=v.hash,b=void 0===w?"":w,x=v.state,_=void 0===x?null:x,I=v.key,E=void 0===I?"default":I,T=r.useMemo((function(){var e=X(y,d);return null==e?null:{location:{pathname:e,search:k,hash:b,state:_,key:E},navigationType:c}}),[d,y,k,b,_,E,c]);return null==T?null:r.createElement(pe.Provider,{value:p},r.createElement(ve.Provider,{children:o,value:T}))}function Fe(e){var t=e.children,n=e.location;return _e(Ve(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Oe||(Oe={}));var Ue=new Promise((function(){}));r.Component;function Ve(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(h(t),[i]);if(e.type!==r.Fragment){e.type!==Le&&D(!1),e.props.index&&e.props.children&&D(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,a)),n.push(o)}else n.push.apply(n,Ve(e.props.children,a))}})),n}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function Be(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var ze=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var qe=i.startTransition;function Ke(e){var t,n=e.basename,i=e.children,a=e.future,o=e.window,u=r.useRef();null==u.current&&(u.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),F((function(e,t){var n=e.location;return O("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:L(t)}),null,t)));var s=u.current,c=l(r.useState({action:s.action,location:s.location}),2),f=c[0],h=c[1],d=(a||{}).v7_startTransition,p=r.useCallback((function(e){d&&qe?qe((function(){return h(e)})):h(e)}),[h,d]);return r.useLayoutEffect((function(){return s.listen(p)}),[s,p]),r.createElement(Me,{basename:n,children:i,location:f.location,navigationType:f.action,navigator:s})}var Ge="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,We=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,He=r.forwardRef((function(e,t){var n,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=Be(e,ze),d=r.useContext(pe).basename,p=!1;if("string"===typeof l&&We.test(l)&&(n=l,Ge))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=X(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(w){}var g=function(e,t){var n=(void 0===t?{}:t).relative;ge()||D(!1);var i=r.useContext(pe),a=i.basename,o=i.navigator,u=xe(e,{relative:n}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:ne([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),k=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=n.preventScrollReset,s=n.relative,c=be(),l=ke(),f=xe(e,{relative:s});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:L(l)===L(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return r.createElement("a",je({},h,{href:n||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:t,target:c}))}));var Qe,Ye;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Qe||(Qe={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ye||(Ye={}));function $e(){$e=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f={};function h(){}function d(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(S([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Je(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Xe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Je(a,r,i,o,u,"next",e)}function u(e){Je(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Ze(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},tt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(et(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new nt;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},nt=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(E(Error)),rt=function(e){return function(e){var t=et(e);return tt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},it=function(e){try{return tt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function at(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=at(e[n],t[n]));return e}var ot=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},ut=function(){try{return ot()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDd62gnmqwbIN-JLetUJLVbn_H6h6iFb-s",REACT_APP_APP_ID:"1:407211607571:web:0607065c9301a8b6ea61e6",REACT_APP_AUTH_DOMAIN:"nwitter-5e46f.firebaseapp.com",REACT_APP_MEASUREMENT_ID:"G-6RE4L6CFJ3",REACT_APP_MESSAGING_SENDER_ID:"407211607571",REACT_APP_PROJECT_ID:"nwitter-5e46f",REACT_APP_STORAGE_BUCKET:"nwitter-5e46f.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&it(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},st=function(e){var t,n;return null===(n=null===(t=ut())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ct=function(e){var t=st(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},lt=function(){var e;return null===(e=ut())||void 0===e?void 0:e.config},ft=function(e){var t;return null===(t=ut())||void 0===t?void 0:t["_".concat(e)]},ht=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function dt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[rt(JSON.stringify({alg:"none",type:"JWT"})),rt(JSON.stringify(a)),""].join(".")}function pt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function vt(){var e,t=null===(e=ut())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function mt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function yt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function gt(){var e=pt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function kt(){try{return"object"===typeof indexedDB}catch(e){return!1}}function wt(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))}var bt=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(x(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(x(a),xt.prototype.create),a}return y(n)}(E(Error)),xt=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(_t,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new bt(n,a,t)}}]),e}();var _t=/\{\$([^}]+)}/g;function It(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Et(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Tt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(St(u)&&St(s)){if(!Tt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function St(e){return null!==e&&"object"===typeof e}function Ct(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function At(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Nt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Dt(e,t){var n=new Rt(e,t);return n.subscribe.bind(n)}var Rt=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=S(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Pt),void 0===r.error&&(r.error=Pt),void 0===r.complete&&(r.complete=Pt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Pt(){}var Ot=1e3,Lt=2,Mt=144e5,Ft=.5;function Ut(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot)*Math.pow(t,e),r=Math.round(Ft*n*(Math.random()-.5)*2);return Math.min(Mt,n+r)}function Vt(e){return e&&e._delegate?e._delegate:e}var jt=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Bt="[DEFAULT]",zt=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ht;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Bt})}catch(s){}var t,n=S(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=S(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(WT){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Bt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(WT){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.component?this.component.multipleInstances?e:Bt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var qt,Kt,Gt=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new zt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Wt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Kt||(Kt={}));var Ht={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},Qt=Kt.INFO,Yt=(Ze(qt={},Kt.DEBUG,"log"),Ze(qt,Kt.VERBOSE,"log"),Ze(qt,Kt.INFO,"info"),Ze(qt,Kt.WARN,"warn"),Ze(qt,Kt.ERROR,"error"),qt),$t=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Yt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Jt=function(){function e(t){d(this,e),this.name=t,this._logLevel=Qt,this._logHandler=$t,this._userLogHandler=null,Wt.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Kt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ht[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Kt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Kt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Kt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Kt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Kt.INFO].concat(t)),this._logHandler.apply(this,[this,Kt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Kt.WARN].concat(t)),this._logHandler.apply(this,[this,Kt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Kt.ERROR].concat(t)),this._logHandler.apply(this,[this,Kt.ERROR].concat(t))}}]),e}();function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en,tn,nn=function(e,t){return t.some((function(t){return e instanceof t}))};var rn=new WeakMap,an=new WeakMap,on=new WeakMap,un=new WeakMap,sn=new WeakMap;var cn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return an.get(e);if("objectStoreNames"===t)return e.objectStoreNames||on.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ln(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(tn||(tn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(dn(this),n),hn(rn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return hn(e.apply(dn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[dn(this),t].concat(r));return on.set(a,t.sort?t.sort():[t]),hn(a)}}function fn(e){return"function"===typeof e?ln(e):(e instanceof IDBTransaction&&function(e){if(!an.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));an.set(e,t)}}(e),nn(e,en||(en=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,cn):e)}function hn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(hn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&rn.set(t,e)})).catch((function(){})),sn.set(t,e),t}(e);if(un.has(e))return un.get(e);var t=fn(e);return t!==e&&(un.set(e,t),sn.set(t,e)),t}var dn=function(e){return sn.get(e)};var pn,vn,mn=["get","getKey","getAll","getAllKeys","count"],yn=["put","add","delete","clear"],gn=new Map;function kn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(gn.get(t))return gn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=yn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||mn.includes(n))){var a=function(){var e=Xe($e().mark((function e(t){var a,o,u,s,c,l,f=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return gn.set(t,a),a}}}cn=function(e){return Zt(Zt({},e),{},{get:function(t,n,r){return kn(t,n)||e.get(t,n,r)},has:function(t,n){return!!kn(t,n)||e.has(t,n)}})}(cn);var wn=function(){function e(t){d(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var bn="@firebase/app",xn="0.9.13",_n=new Jt("@firebase/app"),In="[DEFAULT]",En=(Ze(pn={},bn,"fire-core"),Ze(pn,"@firebase/app-compat","fire-core-compat"),Ze(pn,"@firebase/analytics","fire-analytics"),Ze(pn,"@firebase/analytics-compat","fire-analytics-compat"),Ze(pn,"@firebase/app-check","fire-app-check"),Ze(pn,"@firebase/app-check-compat","fire-app-check-compat"),Ze(pn,"@firebase/auth","fire-auth"),Ze(pn,"@firebase/auth-compat","fire-auth-compat"),Ze(pn,"@firebase/database","fire-rtdb"),Ze(pn,"@firebase/database-compat","fire-rtdb-compat"),Ze(pn,"@firebase/functions","fire-fn"),Ze(pn,"@firebase/functions-compat","fire-fn-compat"),Ze(pn,"@firebase/installations","fire-iid"),Ze(pn,"@firebase/installations-compat","fire-iid-compat"),Ze(pn,"@firebase/messaging","fire-fcm"),Ze(pn,"@firebase/messaging-compat","fire-fcm-compat"),Ze(pn,"@firebase/performance","fire-perf"),Ze(pn,"@firebase/performance-compat","fire-perf-compat"),Ze(pn,"@firebase/remote-config","fire-rc"),Ze(pn,"@firebase/remote-config-compat","fire-rc-compat"),Ze(pn,"@firebase/storage","fire-gcs"),Ze(pn,"@firebase/storage-compat","fire-gcs-compat"),Ze(pn,"@firebase/firestore","fire-fst"),Ze(pn,"@firebase/firestore-compat","fire-fst-compat"),Ze(pn,"fire-js","fire-js"),Ze(pn,"firebase","fire-js-all"),pn),Tn=new Map,Sn=new Map;function Cn(e,t){try{e.container.addComponent(t)}catch(n){_n.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function An(e,t){e.container.addOrOverwriteComponent(t)}function Nn(e){var t=e.name;if(Sn.has(t))return _n.debug("There were multiple attempts to register component ".concat(t,".")),!1;Sn.set(t,e);var n,r=S(Tn.values());try{for(r.s();!(n=r.n()).done;){Cn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Dn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Rn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:In;Dn(e,t).clearInstance(n)}function Pn(){Sn.clear()}var On=(Ze(vn={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Ze(vn,"bad-app-name","Illegal App name: '{$appName}"),Ze(vn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ze(vn,"app-deleted","Firebase App named '{$appName}' already deleted"),Ze(vn,"no-options","Need to provide options, when not being deployed to hosting via source."),Ze(vn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ze(vn,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ze(vn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ze(vn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ze(vn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ze(vn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),vn),Ln=new xt("app","Firebase",On),Mn=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jt("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}]),e}(),Fn="9.23.0";function Un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:In,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ln.create("bad-app-name",{appName:String(i)});if(n||(n=lt()),!n)throw Ln.create("no-options");var a=Tn.get(i);if(a){if(Tt(n,a.options)&&Tt(r,a.config))return a;throw Ln.create("duplicate-app",{appName:i})}var o,u=new Gt(i),s=S(Sn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Mn(n,r,u);return Tn.set(i,l),l}function Vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In,t=Tn.get(e);if(!t&&e===In&&lt())return Un();if(!t)throw Ln.create("no-app",{appName:e});return t}function jn(){return Array.from(Tn.values())}function Bn(e){return zn.apply(this,arguments)}function zn(){return zn=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Tn.has(n)){e.next=6;break}return Tn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),zn.apply(this,arguments)}function qn(e,t,n){var r,i=null!==(r=En[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void _n.warn(u.join(" "))}Nn(new jt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Kn(e,t){if(null!==e&&"function"!==typeof e)throw Ln.create("invalid-log-argument");!function(e,t){var n,r=S(Wt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ht[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Kt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Gn(e){var t;t=e,Wt.forEach((function(e){e.setLogLevel(t)}))}var Wn="firebase-heartbeat-database",Hn=1,Qn="firebase-heartbeat-store",Yn=null;function $n(){return Yn||(Yn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=hn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(hn(u.result),e.oldVersion,e.newVersion,hn(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Wn,Hn,{upgrade:function(e,t){if(0===t)e.createObjectStore(Qn)}}).catch((function(e){throw Ln.create("idb-open",{originalErrorMessage:e.message})}))),Yn}function Jn(e){return Xn.apply(this,arguments)}function Xn(){return Xn=Xe($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$n();case 3:return n=e.sent,e.next=6,n.transaction(Qn).objectStore(Qn).get(tr(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof bt?_n.warn(e.t0.message):(i=Ln.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),_n.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Xn.apply(this,arguments)}function Zn(e,t){return er.apply(this,arguments)}function er(){return er=Xe($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$n();case 3:return r=e.sent,i=r.transaction(Qn,"readwrite"),a=i.objectStore(Qn),e.next=8,a.put(n,tr(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof bt?_n.warn(e.t0.message):(o=Ln.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),_n.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),er.apply(this,arguments)}function tr(e){return"".concat(e.name,"!").concat(e.options.appId)}var nr=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new or(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=Xe($e().mark((function e(){var t,n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=rr(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Xe($e().mark((function e(){var t,n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=rr(),n=ir(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=rt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function rr(){return(new Date).toISOString().substring(0,10)}function ir(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=S(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ur(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ur(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ar,or=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",wt().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Jn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Zn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Zn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ur(e){return rt(JSON.stringify({version:2,heartbeats:e})).length}ar="",Nn(new jt("platform-logger",(function(e){return new wn(e)}),"PRIVATE")),Nn(new jt("heartbeat",(function(e){return new nr(e)}),"PRIVATE")),qn(bn,xn,ar),qn(bn,xn,"esm2017"),qn("fire-js","");qn("firebase","9.23.0","app");var sr,cr,lr=function(e,t){return t.some((function(t){return e instanceof t}))};var fr=new WeakMap,hr=new WeakMap,dr=new WeakMap,pr=new WeakMap,vr=new WeakMap;var mr={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return hr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||dr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function yr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(cr||(cr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(wr(this),n),kr(fr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return kr(e.apply(wr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[wr(this),t].concat(r));return dr.set(a,t.sort?t.sort():[t]),kr(a)}}function gr(e){return"function"===typeof e?yr(e):(e instanceof IDBTransaction&&function(e){if(!hr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));hr.set(e,t)}}(e),lr(e,sr||(sr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,mr):e)}function kr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(kr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&fr.set(t,e)})).catch((function(){})),vr.set(t,e),t}(e);if(pr.has(e))return pr.get(e);var t=gr(e);return t!==e&&(pr.set(e,t),vr.set(t,e)),t}var wr=function(e){return vr.get(e)};var br,xr=["get","getKey","getAll","getAllKeys","count"],_r=["put","add","delete","clear"],Ir=new Map;function Er(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ir.get(t))return Ir.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=_r.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||xr.includes(n))){var a=function(){var e=Xe($e().mark((function e(t){var a,o,u,s,c,l,f=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ir.set(t,a),a}}}!function(e){mr=e(mr)}((function(e){return Zt(Zt({},e),{},{get:function(t,n,r){return Er(t,n)||e.get(t,n,r)},has:function(t,n){return!!Er(t,n)||e.has(t,n)}})}));var Tr="@firebase/installations",Sr="0.6.4",Cr=1e4,Ar="w:".concat(Sr),Nr="FIS_v2",Dr="https://firebaseinstallations.googleapis.com/v1",Rr=36e5,Pr=(Ze(br={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),Ze(br,"not-registered","Firebase Installation is not registered."),Ze(br,"installation-not-found","Firebase Installation not found."),Ze(br,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),Ze(br,"app-offline","Could not process request. Application offline."),Ze(br,"delete-pending-registration","Can't delete installation while there is a pending registration request."),br),Or=new xt("installations","Installations",Pr);function Lr(e){return e instanceof bt&&e.code.includes("request-failed")}function Mr(e){var t=e.projectId;return"".concat(Dr,"/projects/").concat(t,"/installations")}function Fr(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Ur(e,t){return Vr.apply(this,arguments)}function Vr(){return(Vr=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",Or.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jr(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Br(e,t){var n=t.refreshToken,r=jr(e);return r.append("Authorization",function(e){return"".concat(Nr," ").concat(e)}(n)),r}function zr(e){return qr.apply(this,arguments)}function qr(){return qr=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function Kr(e,t){return Gr.apply(this,arguments)}function Gr(){return(Gr=Xe($e().mark((function e(t,n){var r,i,a,o,u,s,c,l,f,h,d,p;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=Mr(r),u=jr(r),!(s=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,s.getHeartbeatsHeader();case 8:(c=e.sent)&&u.append("x-firebase-client",c);case 10:return l={fid:a,authVersion:Nr,appId:r.appId,sdkVersion:Ar},f={method:"POST",headers:u,body:JSON.stringify(l)},e.next=14,zr((function(){return fetch(o,f)}));case 14:if(!(h=e.sent).ok){e.next=23;break}return e.next=18,h.json();case 18:return d=e.sent,p={fid:d.fid||a,registrationStatus:2,refreshToken:d.refreshToken,authToken:Fr(d.authToken)},e.abrupt("return",p);case 23:return e.next=25,Ur("Create Installation",h);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wr(e){return new Promise((function(t){setTimeout(t,e)}))}var Hr=/^[cdef][\w-]{21}$/,Qr="";function Yr(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){var t=(n=e,btoa(String.fromCharCode.apply(String,h(n))).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Hr.test(t)?t:Qr}catch(WT){return Qr}}function $r(e){return"".concat(e.appName,"!").concat(e.appId)}var Jr=new Map;function Xr(e,t){var n=$r(e);Zr(n,t),function(e,t){var n=ti();n&&n.postMessage({key:e,fid:t});ni()}(n,t)}function Zr(e,t){var n=Jr.get(e);if(n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var ei=null;function ti(){return!ei&&"BroadcastChannel"in self&&((ei=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Zr(e.data.key,e.data.fid)}),ei}function ni(){0===Jr.size&&ei&&(ei.close(),ei=null)}var ri="firebase-installations-database",ii=1,ai="firebase-installations-store",oi=null;function ui(){return oi||(oi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=kr(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(kr(u.result),e.oldVersion,e.newVersion,kr(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(ri,ii,{upgrade:function(e,t){if(0===t)e.createObjectStore(ai)}})),oi}function si(e,t){return ci.apply(this,arguments)}function ci(){return ci=Xe($e().mark((function e(t,n){var r,i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$r(t),e.next=3,ui();case 3:return i=e.sent,a=i.transaction(ai,"readwrite"),o=a.objectStore(ai),e.next=8,o.get(r);case 8:return u=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.done;case 13:return u&&u.fid===n.fid||Xr(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),ci.apply(this,arguments)}function li(e){return fi.apply(this,arguments)}function fi(){return fi=Xe($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$r(t),e.next=3,ui();case 3:return r=e.sent,i=r.transaction(ai,"readwrite"),e.next=7,i.objectStore(ai).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)}))),fi.apply(this,arguments)}function hi(e,t){return di.apply(this,arguments)}function di(){return di=Xe($e().mark((function e(t,n){var r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$r(t),e.next=3,ui();case 3:return i=e.sent,a=i.transaction(ai,"readwrite"),o=a.objectStore(ai),e.next=8,o.get(r);case 8:if(u=e.sent,void 0!==(s=n(u))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(s,r);case 17:return e.next=19,a.done;case 19:return!s||u&&u.fid===s.fid||Xr(t,s.fid),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)}))),di.apply(this,arguments)}function pi(e){return vi.apply(this,arguments)}function vi(){return(vi=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hi(t.appConfig,(function(e){var r=mi(e),i=yi(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if((r=e.sent).fid!==Qr){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mi(e){return xi(e||{fid:Yr(),registrationStatus:0})}function yi(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Or.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return gi.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ki(e)}:{installationEntry:t}}function gi(){return(gi=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kr(t,n);case 3:return r=e.sent,e.abrupt("return",si(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!Lr(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,li(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,si(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ki(e){return wi.apply(this,arguments)}function wi(){return(wi=Xe($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,Wr(100);case 6:return e.next=8,bi(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,pi(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bi(e){return hi(e,(function(e){if(!e)throw Or.create("installation-not-found");return xi(e)}))}function xi(e){return 1===(t=e).registrationStatus&&t.registrationTime+Cr<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function _i(e,t){return Ii.apply(this,arguments)}function Ii(){return(Ii=Xe($e().mark((function e(t,n){var r,i,a,o,u,s,c,l,f,h,d;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=Ei(r,n),o=Br(r,n),!(u=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(s=e.sent)&&o.append("x-firebase-client",s);case 9:return c={installation:{sdkVersion:Ar,appId:r.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,zr((function(){return fetch(a,l)}));case 13:if(!(f=e.sent).ok){e.next=22;break}return e.next=17,f.json();case 17:return h=e.sent,d=Fr(h),e.abrupt("return",d);case 22:return e.next=24,Ur("Generate Auth Token",f);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(e,t){var n=t.fid;return"".concat(Mr(e),"/").concat(n,"/authTokens:generate")}function Ti(e){return Si.apply(this,arguments)}function Si(){return Si=Xe($e().mark((function e(t){var n,r,i,a,o=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,hi(t.appConfig,(function(e){if(!Pi(e))throw Or.create("not-registered");var i=e.authToken;if(!n&&Oi(i))return e;if(1===i.requestStatus)return r=Ci(t,n),e;if(!navigator.onLine)throw Or.create("app-offline");var a=Li(e);return r=Di(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ci(e,t){return Ai.apply(this,arguments)}function Ai(){return(Ai=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ni(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,Wr(100);case 6:return e.next=8,Ni(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",Ti(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ni(e){return hi(e,(function(e){if(!Pi(e))throw Or.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+Cr<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function Di(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=Xe($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_i(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,si(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!Lr(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,li(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,si(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Pi(e){return void 0!==e&&2===e.registrationStatus}function Oi(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Rr}(e)}function Li(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Mi(){return(Mi=Xe($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,pi(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):Ti(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fi(){return Fi=Xe($e().mark((function e(t){var n,r,i,a=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,Ui(r);case 4:return e.next=6,Ti(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}function Ui(e){return Vi.apply(this,arguments)}function Vi(){return(Vi=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pi(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ji(e){return Or.create("missing-app-config-values",{valueName:e})}var Bi,zi="installations",qi=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw ji("App Configuration");if(!e.name)throw ji("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw ji(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Dn(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},Ki=function(e){var t=Dn(e.getProvider("app").getImmediate(),zi).getImmediate(),n={getId:function(){return function(e){return Mi.apply(this,arguments)}(t)},getToken:function(e){return function(e){return Fi.apply(this,arguments)}(t,e)}};return n};Nn(new jt(zi,qi,"PUBLIC")),Nn(new jt("installations-internal",Ki,"PRIVATE")),qn(Tr,Sr),qn(Tr,Sr,"esm2017");var Gi="analytics",Wi="firebase_id",Hi="origin",Qi=6e4,Yi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$i="https://www.googletagmanager.com/gtag/js",Ji=new Jt("@firebase/analytics"),Xi=(Ze(Bi={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),Ze(Bi,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),Ze(Bi,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),Ze(Bi,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),Ze(Bi,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),Ze(Bi,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),Ze(Bi,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),Ze(Bi,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),Ze(Bi,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),Ze(Bi,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),Ze(Bi,"no-client-id",'The "client_id" field is empty.'),Ze(Bi,"invalid-gtag-resource","Trusted Types detected an invalid gtag resource: {$gtagURL}."),Bi),Zi=new xt("analytics","Analytics",Xi);function ea(e){if(!e.startsWith($i)){var t=Zi.create("invalid-gtag-resource",{gtagURL:e});return Ji.warn(t.message),""}return e}function ta(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function na(e,t){var n=function(e,t){var n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:ea}),r=document.createElement("script"),i="".concat($i,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ra(e,t,n,r,i,a){return ia.apply(this,arguments)}function ia(){return ia=Xe($e().mark((function e(t,n,r,i,a,o){var u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,ta(r);case 9:if(s=e.sent,!(c=s.find((function(e){return e.measurementId===a})))){e.next=14;break}return e.next=14,n[c.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),Ji.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),ia.apply(this,arguments)}function aa(e,t,n,r,i){return oa.apply(this,arguments)}function oa(){return oa=Xe($e().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=27;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,ta(r);case 7:s=e.sent,c=S(u),e.prev=9,f=$e().mark((function e(){var t,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.value,r=s.find((function(e){return e.measurementId===t})),!(i=r&&n[r.appId])){e.next=7;break}o.push(i),e.next=9;break;case 7:return o=[],e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),c.s();case 12:if((l=c.n()).done){e.next=19;break}return e.delegateYield(f(),"t0",14);case 14:if("break"!==e.t0){e.next=17;break}return e.abrupt("break",19);case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(9),c.e(e.t1);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return 0===o.length&&(o=Object.values(n)),e.next=30,Promise.all(o);case 30:t("event",i,a||{}),e.next=36;break;case 33:e.prev=33,e.t2=e.catch(0),Ji.error(e.t2);case 36:case"end":return e.stop()}}),e,null,[[0,33],[9,21,24,27]])}))),oa.apply(this,arguments)}function ua(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return i=Xe($e().mark((function i(a){var o,u,s,c,l,f,h,d,p,v,m,y,g=arguments;return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(i.prev=0,o=g.length,u=new Array(o>1?o-1:0),s=1;s<o;s++)u[s-1]=g[s];if("event"!==a){i.next=8;break}return c=u[0],l=u[1],i.next=6,aa(e,t,n,c,l);case 6:i.next=15;break;case 8:if("config"!==a){i.next=14;break}return f=u[0],h=u[1],i.next=12,ra(e,t,n,r,f,h);case 12:i.next=15;break;case 14:"consent"===a?(d=u[0],e("consent","update",d)):"get"===a?(p=u[0],v=u[1],m=u[2],e("get",p,v,m)):"set"===a?(y=u[0],e("set",y)):e.apply(void 0,[a].concat(u));case 15:i.next=20;break;case 17:i.prev=17,i.t0=i.catch(0),Ji.error(i.t0);case 20:case"end":return i.stop()}}),i,null,[[0,17]])}))),i.apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function sa(e){for(var t=window.document.getElementsByTagName("script"),n=0,r=Object.values(t);n<r.length;n++){var i=r[n];if(i.src&&i.src.includes($i)&&i.src.includes(e))return i}return null}var ca=30,la=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;d(this,e),this.throttleMetadata=t,this.intervalMillis=n}return y(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),fa=new la;function ha(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function da(e){return pa.apply(this,arguments)}function pa(){return pa=Xe($e().mark((function e(t){var n,r,i,a,o,u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:ha(i)},o=Yi.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(u=e.sent).status||304===u.status){e.next=18;break}return s="",e.prev=8,e.next=11,u.json();case 11:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw Zi.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 18:return e.abrupt("return",u.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),pa.apply(this,arguments)}function va(e){return ma.apply(this,arguments)}function ma(){return ma=Xe($e().mark((function e(t){var n,r,i,a,o,u,s,c,l=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:fa,r=l.length>2?l[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,u=i.measurementId,a){e.next=5;break}throw Zi.create("no-app-id");case 5:if(o){e.next=9;break}if(!u){e.next=8;break}return e.abrupt("return",{measurementId:u,appId:a});case 8:throw Zi.create("no-api-key");case 9:return s=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new _a,setTimeout(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:Qi),e.abrupt("return",ya({appId:a,apiKey:o,measurementId:u},s,c,n));case 13:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ya(e,t,n){return ga.apply(this,arguments)}function ga(){return ga=Xe($e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=p.length>3&&void 0!==p[3]?p[3]:fa,s=t.appId,c=t.measurementId,e.prev=3,e.next=6,ka(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!c){e.next=13;break}return Ji.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===e.t0||void 0===e.t0?void 0:e.t0.message,"]")),e.abrupt("return",{appId:s,measurementId:c});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,da(t);case 17:return l=e.sent,o.deleteThrottleMetadata(s),e.abrupt("return",l);case 22:if(e.prev=22,e.t1=e.catch(14),wa(f=e.t1)){e.next=33;break}if(o.deleteThrottleMetadata(s),!c){e.next=32;break}return Ji.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===f||void 0===f?void 0:f.message,"]")),e.abrupt("return",{appId:s,measurementId:c});case 32:throw e.t1;case 33:return h=503===Number(null===(u=null===f||void 0===f?void 0:f.customData)||void 0===u?void 0:u.httpStatus)?Ut(a,o.intervalMillis,ca):Ut(a,o.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},o.setThrottleMetadata(s,d),Ji.debug("Calling attemptFetch again in ".concat(h," millis")),e.abrupt("return",ya(t,d,r,o));case 38:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),ga.apply(this,arguments)}function ka(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(Zi.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function wa(e){if(!(e instanceof bt)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var ba,xa,_a=function(){function e(){d(this,e),this.listeners=[]}return y(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function Ia(){return(Ia=Xe($e().mark((function e(t,n,r,i,a){var o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,u=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e){xa=e}function Ta(e){ba=e}function Sa(){return Ca.apply(this,arguments)}function Ca(){return(Ca=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kt()){e.next=5;break}return Ji.warn(Zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,wt();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),Ji.warn(Zi.create("indexeddb-unavailable",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function Aa(){return Aa=Xe($e().mark((function e(t,n,r,i,a,o,u){var s,c,f,h,d,p,v,m;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=va(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ji.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return Ji.error(e)})),n.push(c),f=Sa().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([c,f]);case 6:return h=e.sent,d=l(h,2),p=d[0],v=d[1],sa(o)||na(o,p.measurementId),xa&&(a("consent","default",xa),Ea(void 0)),a("js",new Date),(m=null!==(s=null===u||void 0===u?void 0:u.config)&&void 0!==s?s:{})[Hi]="firebase",m.update=!0,null!=v&&(m[Wi]=v),a("config",p.measurementId,m),ba&&(a("set",ba),Ta(void 0)),e.abrupt("return",p.measurementId);case 20:case"end":return e.stop()}}),e)}))),Aa.apply(this,arguments)}var Na,Da,Ra=function(){function e(t){d(this,e),this.app=t}return y(e,[{key:"_delete",value:function(){return delete Pa[this.app.options.appId],Promise.resolve()}}]),e}(),Pa={},Oa=[],La={},Ma="dataLayer",Fa="gtag",Ua=!1;function Va(){var e=[];if(mt()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=Zi.create("invalid-analytics-context",{errorInfo:t});Ji.warn(n.message)}}function ja(e,t,n){Va();var r=e.options.appId;if(!r)throw Zi.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Zi.create("no-api-key");Ji.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Pa[r])throw Zi.create("already-exists",{id:r});if(!Ua){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ma);var i=ua(Pa,Oa,La,Ma,Fa),a=i.wrappedGtag,o=i.gtagCore;Da=a,Na=o,Ua=!0}return Pa[r]=function(e,t,n,r,i,a,o){return Aa.apply(this,arguments)}(e,Oa,La,t,Na,Ma,n),new Ra(e)}function Ba(e,t,n,r){e=Vt(e),function(e,t,n,r,i){return Ia.apply(this,arguments)}(Da,Pa[e.app.options.appId],t,n,r).catch((function(e){return Ji.error(e)}))}var za="@firebase/analytics",qa="0.10.0";function Ka(){return Ka="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ka.apply(this,arguments)}Nn(new jt(Gi,(function(e,t){var n=t.options;return ja(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Nn(new jt("analytics-internal",(function(e){try{var t=e.getProvider(Gi).getImmediate();return{logEvent:function(e,n,r){return Ba(t,e,n,r)}}}catch(n){throw Zi.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),qn(za,qa),qn(za,qa,"esm2017");function Ga(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var Wa,Ha={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Qa="EMAIL_SIGNIN",Ya="PASSWORD_RESET",$a="RECOVER_EMAIL",Ja="REVERT_SECOND_FACTOR_ADDITION",Xa="VERIFY_AND_CHANGE_EMAIL",Za="VERIFY_EMAIL";function eo(){return Ze({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var to=function(){var e;return Ze(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ze(e,"argument-error",""),Ze(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ze(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ze(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ze(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ze(e,"cordova-not-ready","Cordova framework is not ready."),Ze(e,"cors-unsupported","This browser is not supported."),Ze(e,"credential-already-in-use","This credential is already associated with a different user account."),Ze(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ze(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ze(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ze(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ze(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ze(e,"email-already-in-use","The email address is already in use by another account."),Ze(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ze(e,"expired-action-code","The action code has expired."),Ze(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ze(e,"internal-error","An internal AuthError has occurred."),Ze(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ze(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ze(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ze(e,"invalid-auth-event","An internal AuthError has occurred."),Ze(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ze(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ze(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ze(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ze(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ze(e,"invalid-email","The email address is badly formatted."),Ze(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ze(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ze(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ze(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ze(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ze(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ze(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ze(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ze(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ze(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ze(e,"wrong-password","The password is invalid or the user does not have a password."),Ze(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ze(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ze(e,"invalid-provider-id","The specified provider ID is invalid."),Ze(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ze(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ze(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ze(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ze(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ze(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ze(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ze(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ze(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ze(e,"missing-continue-uri","A continue URL must be provided in the request."),Ze(e,"missing-iframe-start","An internal AuthError has occurred."),Ze(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ze(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ze(e,"missing-password","A non-empty password must be provided"),Ze(e,"missing-multi-factor-info","No second factor identifier is provided."),Ze(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ze(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ze(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ze(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ze(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ze(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ze(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ze(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ze(e,"no-auth-event","An internal AuthError has occurred."),Ze(e,"no-such-provider","User was not linked to an account with the given provider."),Ze(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ze(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ze(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ze(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ze(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ze(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ze(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ze(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ze(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ze(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ze(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ze(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ze(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ze(e,"timeout","The operation has timed out."),Ze(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ze(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ze(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ze(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ze(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ze(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ze(e,"unverified-email","The operation requires a verified email."),Ze(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ze(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ze(e,"user-disabled","The user account has been disabled by an administrator."),Ze(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ze(e,"user-signed-out",""),Ze(e,"weak-password","The password must be 6 characters long or more."),Ze(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ze(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Ze(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Ze(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Ze(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Ze(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Ze(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Ze(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Ze(e,"invalid-req-type","Invalid request parameters."),Ze(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},no=eo,ro=new xt("auth","Firebase",eo()),io=new Jt("@firebase/auth");function ao(e){if(io.logLevel<=Kt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];io.warn.apply(io,["Auth (".concat(Fn,"): ").concat(e)].concat(n))}}function oo(e){if(io.logLevel<=Kt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];io.error.apply(io,["Auth (".concat(Fn,"): ").concat(e)].concat(n))}}function uo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fo.apply(void 0,[e].concat(n))}function so(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fo.apply(void 0,[e].concat(n))}function co(e,t,n){var r=Object.assign(Object.assign({},no()),Ze({},t,n));return new xt("auth","Firebase",r).create(t,{appName:e.name})}function lo(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&uo(e,"argument-error"),co(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function fo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return ro.create.apply(ro,[e].concat(n))}function ho(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fo.apply(void 0,[t].concat(r))}}function po(e){var t="INTERNAL ASSERTION FAILED: "+e;throw oo(t),new Error(t)}function vo(e,t){e||po(t)}function mo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yo(){return"http:"===go()||"https:"===go()}function go(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ko=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,vo(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())||yt()}return y(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yo()||mt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function wo(e,t){vo(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var bo=function(){function e(){d(this,e)}return y(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),xo=(Ze(Wa={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ze(Wa,"MISSING_CUSTOM_TOKEN","internal-error"),Ze(Wa,"INVALID_IDENTIFIER","invalid-email"),Ze(Wa,"MISSING_CONTINUE_URI","internal-error"),Ze(Wa,"INVALID_PASSWORD","wrong-password"),Ze(Wa,"MISSING_PASSWORD","missing-password"),Ze(Wa,"EMAIL_EXISTS","email-already-in-use"),Ze(Wa,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ze(Wa,"INVALID_IDP_RESPONSE","invalid-credential"),Ze(Wa,"INVALID_PENDING_TOKEN","invalid-credential"),Ze(Wa,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ze(Wa,"MISSING_REQ_TYPE","internal-error"),Ze(Wa,"EMAIL_NOT_FOUND","user-not-found"),Ze(Wa,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ze(Wa,"EXPIRED_OOB_CODE","expired-action-code"),Ze(Wa,"INVALID_OOB_CODE","invalid-action-code"),Ze(Wa,"MISSING_OOB_CODE","internal-error"),Ze(Wa,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ze(Wa,"INVALID_ID_TOKEN","invalid-user-token"),Ze(Wa,"TOKEN_EXPIRED","user-token-expired"),Ze(Wa,"USER_NOT_FOUND","user-token-expired"),Ze(Wa,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ze(Wa,"INVALID_CODE","invalid-verification-code"),Ze(Wa,"INVALID_SESSION_INFO","invalid-verification-id"),Ze(Wa,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ze(Wa,"MISSING_SESSION_INFO","missing-verification-id"),Ze(Wa,"SESSION_EXPIRED","code-expired"),Ze(Wa,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ze(Wa,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ze(Wa,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ze(Wa,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ze(Wa,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ze(Wa,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ze(Wa,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ze(Wa,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ze(Wa,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ze(Wa,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ze(Wa,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ze(Wa,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Ze(Wa,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Ze(Wa,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Ze(Wa,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Ze(Wa,"MISSING_CLIENT_TYPE","missing-client-type"),Ze(Wa,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Ze(Wa,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Ze(Wa,"INVALID_REQ_TYPE","invalid-req-type"),Wa),_o=new ko(3e4,6e4);function Io(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Eo(e,t,n,r){return To.apply(this,arguments)}function To(){return To=Xe($e().mark((function e(t,n,r,i){var a,o=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",So(t,a,Xe($e().mark((function e(){var a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ct(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",bo.fetch()(Do(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function So(e,t,n){return Co.apply(this,arguments)}function Co(){return Co=Xe($e().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d,p;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},xo),n),e.prev=2,a=new Ro(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Po(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),f=l(c,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Po(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Po(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Po(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw co(t,p,d);case 34:uo(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof bt)){e.next=41;break}throw e.t0;case 41:uo(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Co.apply(this,arguments)}function Ao(e,t,n,r){return No.apply(this,arguments)}function No(){return No=Xe($e().mark((function e(t,n,r,i){var a,o,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Eo(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&uo(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Do(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?wo(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Ro=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(so(n.auth,"network-request-failed"))}),_o.get())}))}return y(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Po(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=so(e,t,r);return i.customData._tokenResponse=n,i}function Oo(e,t){return Lo.apply(this,arguments)}function Lo(){return(Lo=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mo(e,t){return Fo.apply(this,arguments)}function Fo(){return(Fo=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(e,t){return Vo.apply(this,arguments)}function Vo(){return(Vo=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Bo(){return Bo=Xe($e().mark((function e(t){var n,r,i,a,o,u,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Vt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ho((a=qo(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:jo(zo(a.auth_time)),issuedAtTime:jo(zo(a.iat)),expirationTime:jo(zo(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Bo.apply(this,arguments)}function zo(e){return 1e3*Number(e)}function qo(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return oo("JWT malformed, contained fewer than 3 sections"),null;try{var a=it(r);return a?JSON.parse(a):(oo("Failed to decode base64 JWT payload"),null)}catch(o){return oo("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Ko(e,t){return Go.apply(this,arguments)}function Go(){return Go=Xe($e().mark((function e(t,n){var r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof bt&&Wo(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Go.apply(this,arguments)}function Wo(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ho=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return y(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Xe($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qo=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return y(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=jo(this.lastLoginAt),this.creationTime=jo(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Yo(e){return $o.apply(this,arguments)}function $o(){return $o=Xe($e().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ko(t,Uo(r,{idToken:i}));case 6:ho(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Ga(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=Xo(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Qo(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),$o.apply(this,arguments)}function Jo(){return(Jo=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vt(t),e.next=3,Yo(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function Zo(e,t){return eu.apply(this,arguments)}function eu(){return(eu=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,So(t,{},Xe($e().mark((function e(){var r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ct({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Do(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",bo.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tu=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return y(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ho(e.idToken,"internal-error"),ho("undefined"!==typeof e.idToken,"internal-error"),ho("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=qo(e);return ho(t,"internal-error"),ho("undefined"!==typeof t.exp,"internal-error"),ho("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Xe($e().mark((function e(t){var n,r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ho(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Xe($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zo(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return po("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ho("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ho("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ho("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function nu(e,t){ho("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ru=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Ga(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ho(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new Qo(a.createdAt||void 0,a.lastLoginAt||void 0)}return y(e,[{key:"getIdToken",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ko(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ho(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Bo.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Jo.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ho(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){ho(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Xe($e().mark((function e(t){var n,r,i=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Yo(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ko(this,Oo(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;ho(k&&_,t,"internal-error");var I=tu.fromJSON(this.name,_);ho("string"===typeof k,t,"internal-error"),nu(f,t.name),nu(h,t.name),ho("boolean"===typeof w,t,"internal-error"),ho("boolean"===typeof b,t,"internal-error"),nu(d,t.name),nu(p,t.name),nu(v,t.name),nu(m,t.name),nu(y,t.name),nu(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Xe($e().mark((function t(n,r){var i,a,o,u=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new tu).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Yo(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),iu=new Map;function au(e){vo(e instanceof Function,"Expected a class definition");var t=iu.get(e);return t?(vo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,iu.set(e,t),t)}var ou=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return y(e,[{key:"_isAvailable",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ou.type="NONE";var uu=ou;function su(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var cu=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=su(this.userKey,a.apiKey,o),this.fullPersistenceKey=su("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return y(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ru._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Xe($e().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(au(uu),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||au(uu),u=su(i,n.config.apiKey,n.name),s=null,c=S(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=ru._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function lu(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pu(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(fu(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mu(t))return"Blackberry";if(yu(t))return"Webos";if(hu(t))return"Safari";if((t.includes("chrome/")||du(t))&&!t.includes("edge/"))return"Chrome";if(vu(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function fu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/firefox\//i.test(e)}function hu(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function du(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/crios\//i.test(e)}function pu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/iemobile/i.test(e)}function vu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/android/i.test(e)}function mu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/blackberry/i.test(e)}function yu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/webos/i.test(e)}function gu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return gu(e)||vu(e)||yu(e)||mu(e)||/windows phone/i.test(e)||pu(e)}function wu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=lu(pt());break;case"Worker":t="".concat(lu(pt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Fn,"/").concat(r)}function bu(e){return xu.apply(this,arguments)}function xu(){return(xu=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eo(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _u(e,t){return Iu.apply(this,arguments)}function Iu(){return(Iu=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"GET","/v2/recaptchaConfig",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eu(e){return void 0!==e&&void 0!==e.getResponse}function Tu(e){return void 0!==e&&void 0!==e.enterprise}var Su=y((function e(t){if(d(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Cu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=so("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Au(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Nu=function(){function e(t){d(this,e),this.type="recaptcha-enterprise",this.auth=Lu(t)}return y(e,[{key:"verify",value:function(){var e=Xe($e().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Tu(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Xe($e().mark((function e(n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_u(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Su(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Tu(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Cu("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Du(e,t,n){return Ru.apply(this,arguments)}function Ru(){return Ru=Xe($e().mark((function e(t,n,r){var i,a,o,u,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new Nu(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Ru.apply(this,arguments)}var Pu=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return y(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Xe($e().mark((function e(t){var n,r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=S(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=S(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ou=function(){function e(t,n,r,i){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mu(this),this.idTokenSubscription=new Mu(this),this.beforeStateQueue=new Pu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ro,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return y(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=au(t)),this._initializationPromise=this.queue(Xe($e().mark((function r(){var i,a;return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,cu.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Xe($e().mark((function e(t){var n,r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return ho(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yo(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Vt(t):null)&&ho(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Xe($e().mark((function e(t){var n,r=this,i=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&ho(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Xe($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(au(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=Xe($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_u(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Su(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Nu(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new xt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ho(n=t&&au(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,cu.create(this,[au(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Xe($e().mark((function e(t){var n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ho(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ho(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wu(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Xe($e().mark((function e(){var t,n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ze({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Xe($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&ao("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Lu(e){return Vt(e)}var Mu=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=Dt((function(e){return n.observer=e}))}return y(e,[{key:"next",get:function(){return ho(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Fu(e,t,n){var r=Lu(e);ho(r._canInitEmulator,r,"emulator-config-failed"),ho(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Uu(t),o=function(e){var t=Uu(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Vu(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:Vu(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Uu(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Vu(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ju=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return y(e,[{key:"toJSON",value:function(){return po("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return po("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return po("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return po("not implemented")}}]),e}();function Bu(e,t){return zu.apply(this,arguments)}function zu(){return(zu=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:resetPassword",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qu(e,t){return Ku.apply(this,arguments)}function Ku(){return(Ku=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gu(e,t){return Wu.apply(this,arguments)}function Wu(){return(Wu=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:update",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hu(e,t){return Qu.apply(this,arguments)}function Qu(){return(Qu=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,"POST","/v1/accounts:signInWithPassword",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yu(e,t){return $u.apply(this,arguments)}function $u(){return($u=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:sendOobCode",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ju(e,t){return Xu.apply(this,arguments)}function Xu(){return(Xu=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yu(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zu(e,t){return es.apply(this,arguments)}function es(){return(es=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yu(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ts(e,t){return ns.apply(this,arguments)}function ns(){return(ns=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yu(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return(is=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yu(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function as(e,t){return os.apply(this,arguments)}function os(){return(os=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,"POST","/v1/accounts:signInWithEmailLink",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(e,t){return ss.apply(this,arguments)}function ss(){return(ss=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,"POST","/v1/accounts:signInWithEmailLink",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cs=function(e){k(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return y(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Xe($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Du(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Hu(t,i));case 11:return e.abrupt("return",Hu(t,r).catch(function(){var e=Xe($e().mark((function e(n){var i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Du(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Hu(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",as(t,{email:this._email,oobCode:this._password}));case 13:uo(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",qu(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",us(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:uo(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ju);function ls(e,t){return fs.apply(this,arguments)}function fs(){return(fs=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,"POST","/v1/accounts:signInWithIdp",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hs=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return y(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ls(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ls(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ls(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ct(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):uo("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ga(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ju);function ds(e,t){return ps.apply(this,arguments)}function ps(){return(ps=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:sendVerificationCode",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(){return(vs=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,"POST","/v1/accounts:signInWithPhoneNumber",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ms(){return(ms=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ao(t,"POST","/v1/accounts:signInWithPhoneNumber",Io(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Po(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ys=Ze({},"USER_NOT_FOUND","user-not-found");function gs(){return(gs=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ao(t,"POST","/v1/accounts:signInWithPhoneNumber",Io(t,r),ys));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ks=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return vs.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ms.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return gs.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ju);var ws=function(){function e(t){var n,r,i,a,o,u;d(this,e);var s=At(Nt(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ho(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return y(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=At(Nt(e)).link,n=t?At(Nt(t)).deep_link_id:null,r=At(Nt(e)).deep_link_id;return(r?At(Nt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(WT){return null}}}]),e}();var bs=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return y(e,null,[{key:"credential",value:function(e,t){return cs._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ws.parseLink(t);return ho(n,"argument-error"),cs._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();bs.PROVIDER_ID="password",bs.EMAIL_PASSWORD_SIGN_IN_METHOD="password",bs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var xs=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return y(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),_s=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return y(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(xs),Is=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ho(e.idToken||e.accessToken,"argument-error"),hs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ho("providerId"in t&&"signInMethod"in t,"argument-error"),hs._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(_s),Es=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"facebook.com")}return y(n,null,[{key:"credential",value:function(e){return hs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(WT){return null}}}]),n}(_s);Es.FACEBOOK_SIGN_IN_METHOD="facebook.com",Es.PROVIDER_ID="facebook.com";var Ts=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return y(n,null,[{key:"credential",value:function(e,t){return hs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(WT){return null}}}]),n}(_s);Ts.GOOGLE_SIGN_IN_METHOD="google.com",Ts.PROVIDER_ID="google.com";var Ss=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"github.com")}return y(n,null,[{key:"credential",value:function(e){return hs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(WT){return null}}}]),n}(_s);Ss.GITHUB_SIGN_IN_METHOD="github.com",Ss.PROVIDER_ID="github.com";var Cs=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return y(n,[{key:"_getIdTokenResponse",value:function(e){return ls(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ls(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ls(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ju),As=function(e){k(n,e);var t=_(n);function n(e){return d(this,n),ho(e.startsWith("saml."),"argument-error"),t.call(this,e)}return y(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Cs.fromJSON(e);return ho(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Cs._create(r,n)}catch(i){return null}}}]),n}(xs),Ns=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"twitter.com")}return y(n,null,[{key:"credential",value:function(e,t){return hs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(WT){return null}}}]),n}(_s);function Ds(e,t){return Rs.apply(this,arguments)}function Rs(){return(Rs=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,"POST","/v1/accounts:signUp",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ns.TWITTER_SIGN_IN_METHOD="twitter.com",Ns.PROVIDER_ID="twitter.com";var Ps=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return y(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Xe($e().mark((function t(n,r,i){var a,o,u,s,c=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ru._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Os(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Xe($e().mark((function t(n,r,i){var a;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Os(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Os(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ls(){return Ls=Xe($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lu(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Ps({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ds(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Ps._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Ls.apply(this,arguments)}var Ms=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o,u;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(x(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return y(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(bt);function Fs(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ms._fromErrorAndOperation(e,n,t,r);throw n}))}function Us(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Vs(e,t){return js.apply(this,arguments)}function js(){return js=Xe($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vt(t),e.next=3,qs(!0,r,n);case 3:return e.t0=Mo,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Us(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),js.apply(this,arguments)}function Bs(e,t){return zs.apply(this,arguments)}function zs(){return zs=Xe($e().mark((function e(t,n){var r,i,a=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ko,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Ps._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),zs.apply(this,arguments)}function qs(e,t,n){return Ks.apply(this,arguments)}function Ks(){return(Ks=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yo(n);case 2:i=Us(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ho(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gs(e,t){return Ws.apply(this,arguments)}function Ws(){return Ws=Xe($e().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ko(t,Fs(i,a,n,t),r);case 6:return ho((o=e.sent).idToken,i,"internal-error"),ho(u=qo(o.idToken),i,"internal-error"),s=u.sub,ho(t.uid===s,i,"user-mismatch"),e.abrupt("return",Ps._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&uo(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ws.apply(this,arguments)}function Hs(e,t){return Qs.apply(this,arguments)}function Qs(){return Qs=Xe($e().mark((function e(t,n){var r,i,a,o,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Fs(t,i,n);case 4:return a=e.sent,e.next=7,Ps._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}function Ys(e,t){return $s.apply(this,arguments)}function $s(){return($s=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hs(Lu(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Js(e,t){return Xs.apply(this,arguments)}function Xs(){return(Xs=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vt(t),e.next=3,qs(!1,r,n.providerId);case 3:return e.abrupt("return",Bs(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zs(e,t){return ec.apply(this,arguments)}function ec(){return(ec=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gs(Vt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tc(e,t){return nc.apply(this,arguments)}function nc(){return(nc=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,"POST","/v1/accounts:signInWithCustomToken",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rc(){return(rc=Xe($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lu(t),e.next=3,tc(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Ps._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ic=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return y(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ac._fromServerResponse(e,t):"totpInfo"in t?oc._fromServerResponse(e,t):uo(e,"internal-error")}}]),e}(),ac=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ic),oc=function(e){k(n,e);var t=_(n);function n(e){return d(this,n),t.call(this,"totp",e)}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ic);function uc(e,t,n){var r;ho((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ho("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ho(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ho(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function sc(){return sc=Xe($e().mark((function e(t,n,r){var i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Lu(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Du(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&uc(a,u,r),e.next=9,Zu(a,u);case 9:e.next=14;break;case 11:return r&&uc(a,o,r),e.next=14,Zu(a,o).catch(function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Du(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&uc(a,n,r),e.next=8,Zu(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),sc.apply(this,arguments)}function cc(){return(cc=Xe($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bu(Vt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lc(){return(lc=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gu(Vt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fc(e,t){return hc.apply(this,arguments)}function hc(){return(hc=Xe($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vt(t),e.next=3,Bu(r,{oobCode:n});case 3:i=e.sent,ho(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ho(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ho(i.mfaInfo,r,"internal-error");case 13:ho(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ic._fromServerResponse(Lu(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dc(){return(dc=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fc(Vt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pc(e,t,n){return vc.apply(this,arguments)}function vc(){return vc=Xe($e().mark((function e(t,n,r){var i,a,o,u,s,c,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Lu(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Du(a,o,"signUpPassword");case 5:s=e.sent,u=Ds(a,s),e.next=10;break;case 9:u=Ds(a,o).catch(function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Du(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Ds(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,Ps._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function mc(e,t,n){return Ys(Vt(e),bs.credential(t,n))}function yc(){return yc=Xe($e().mark((function e(t,n,r){var i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){ho(t.handleCodeInApp,a,"argument-error"),t&&uc(a,e,t)},a=Lu(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Du(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,ts(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,ts(a,o).catch(function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Du(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,ts(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}function gc(){return(gc=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vt(t),ho((a=bs.credentialWithLink(n,r||mo()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ys(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kc(e,t){return wc.apply(this,arguments)}function wc(){return(wc=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:createAuthUri",Io(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bc(){return(bc=Xe($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yo()?mo():"http://localhost",i={identifier:n,continueUri:r},e.next=4,kc(Vt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xc(){return(xc=Xe($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&uc(r.auth,a,n),e.next=8,Ju(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _c(){return(_c=Xe($e().mark((function e(t,n,r){var i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&uc(i.auth,o,r),e.next=8,rs(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ic(e,t){return Ec.apply(this,arguments)}function Ec(){return(Ec=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eo(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tc(e,t){return Sc.apply(this,arguments)}function Sc(){return(Sc=Xe($e().mark((function e(t,n){var r,i,a,o,u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Vt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ko(a,Ic(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cc(e,t,n){return Ac.apply(this,arguments)}function Ac(){return(Ac=Xe($e().mark((function e(t,n,r){var i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ko(t,qu(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nc=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Dc=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return y(n)}(Nc),Rc=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return y(n)}(Nc),Pc=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return y(n)}(Dc),Oc=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return y(n)}(Nc),Lc=function(e){k(n,e);var t=_(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return y(n)}(Dc);function Mc(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=qo(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Nc(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Rc(a,i);case"github.com":return new Pc(a,i);case"google.com":return new Oc(a,i);case"twitter.com":return new Lc(a,i,e.screenName||null);case"custom":case"anonymous":return new Nc(a,null);default:return new Nc(a,r,i)}}(n)}var Fc=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.auth=r}return y(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ze({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Uc=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return y(e,[{key:"resolveSignIn",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Lu(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ic._fromServerResponse(r,e)}));ho(i.mfaPendingCredential,r,"internal-error");var o=Fc._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Xe($e().mark((function e(t){var a,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Ps._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return ho(n.user,r,"internal-error"),e.abrupt("return",Ps._forOperation(n.user,n.operationType,u));case 17:uo(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Vc(e,t){return Eo(e,"POST","/v2/accounts/mfaEnrollment:start",Io(e,t))}function jc(e,t){return Eo(e,"POST","/v2/accounts/mfaEnrollment:finalize",Io(e,t))}var Bc=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ic._fromServerResponse(t.auth,e)})))}))}return y(e,[{key:"getSession",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Fc,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Xe($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ko(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Xe($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Ko(this.user,Eo(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Io(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),zc=new WeakMap;var qc="__sak",Kc=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return y(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch(WT){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Gc=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=pt();return hu(e)||gu(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ku(),e._shouldAllowMigration=!0,e}return y(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);gt()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Xe($e().mark((function e(t,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(w(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Xe($e().mark((function e(t){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(w(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(w(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Kc);Gc.type="LOCAL";var Wc=Gc,Hc=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return y(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Kc);Hc.type="SESSION";var Qc=Hc;function Yc(e){return Promise.all(e.map(function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var $c=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return y(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Xe($e().mark((function e(t){var n,r,i,a,o,u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Yc(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Jc(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}$c.receivers=[];var Xc=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return y(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Xe($e().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Jc("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Zc(){return window}function el(e){Zc().location.href=e}function tl(){return"undefined"!==typeof Zc().WorkerGlobalScope&&"function"===typeof Zc().importScripts}function nl(){return rl.apply(this,arguments)}function rl(){return(rl=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function il(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var al="firebaseLocalStorageDb",ol="firebaseLocalStorage",ul="fbase_key",sl=function(){function e(t){d(this,e),this.request=t}return y(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function cl(e,t){return e.transaction([ol],t?"readwrite":"readonly").objectStore(ol)}function ll(){var e=indexedDB.deleteDatabase(al);return new sl(e).toPromise()}function fl(){var e=indexedDB.open(al,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ol,{keyPath:ul})}catch(r){n(r)}})),e.addEventListener("success",Xe($e().mark((function n(){var r;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ol)){n.next=12;break}return r.close(),n.next=5,ll();case 5:return n.t0=t,n.next=8,fl();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function hl(e,t,n){return dl.apply(this,arguments)}function dl(){return dl=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cl(t,!0).put((Ze(i={},ul,n),Ze(i,"value",r),i)),e.abrupt("return",new sl(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),dl.apply(this,arguments)}function pl(e,t){return vl.apply(this,arguments)}function vl(){return vl=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cl(t,!1).get(n),e.next=3,new sl(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}function ml(e,t){var n=cl(e,!0).delete(t);return new sl(n).toPromise()}var yl=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return y(e,[{key:"_openDb",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,fl();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tl()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Xe($e().mark((function e(){var t=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=$c._getInstance(tl()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Xe($e().mark((function e(n,r){var i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Xe($e().mark((function e(){var t,n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nl();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Xc(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&il()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,fl();case 5:return t=e.sent,e.next=8,hl(t,qc,"1");case 8:return e.next=10,ml(t,qc);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Xe($e().mark((function e(t,n){var r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return hl(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return pl(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Xe($e().mark((function e(t){var n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ml(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Xe($e().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=cl(e,!1).getAll();return new sl(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=S(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Xe($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();yl.type="LOCAL";var gl=yl;function kl(e,t){return Eo(e,"POST","/v2/accounts/mfaSignIn:start",Io(e,t))}function wl(e,t){return Eo(e,"POST","/v2/accounts/mfaSignIn:finalize",Io(e,t))}var bl=1e12,xl=function(){function e(t){d(this,e),this.auth=t,this.counter=bl,this._widgets=new Map}return y(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new _l(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||bl;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||bl;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||bl,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_l=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ho(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return y(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Il=Au("rcb"),El=new ko(3e4,6e4),Tl=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Zc().grecaptcha)||void 0===t?void 0:t.render)}return y(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ho(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Eu(Zc().grecaptcha)?Promise.resolve(Zc().grecaptcha):new Promise((function(r,i){var a=Zc().setTimeout((function(){i(so(e,"network-request-failed"))}),El.get());Zc()[Il]=function(){Zc().clearTimeout(a),delete Zc()[Il];var o=Zc().grecaptcha;if(o&&Eu(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(so(e,"internal-error"))},Cu("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Ct({onload:Il,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(so(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Zc().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Sl=function(){function e(){d(this,e)}return y(e,[{key:"load",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new xl(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Cl="recaptcha",Al={theme:"light",type:"image"},Nl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Al),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=Cl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lu(r),this.isInvisible="invisible"===this.parameters.size,ho("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;ho(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sl:new Tl,this.validateStartingState()}return y(e,[{key:"verify",value:function(){var e=Xe($e().mark((function e(){var t,n,r,i=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ho(!this.parameters.sitekey,this.auth,"argument-error"),ho(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ho("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Zc()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ho(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Xe($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho(yo()&&!tl(),this.auth,"internal-error"),e.next=3,Dl();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,bu(this.auth);case 8:ho(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ho(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Dl(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Rl=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return y(e,[{key:"confirm",value:function(e){var t=ks._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Pl(){return(Pl=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lu(t),e.next=3,Fl(i,n,Vt(r));case 3:return a=e.sent,e.abrupt("return",new Rl(a,(function(e){return Ys(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ol(e,t,n){return Ll.apply(this,arguments)}function Ll(){return(Ll=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vt(t),e.next=3,qs(!1,i,"phone");case 3:return e.next=5,Fl(i.auth,n,Vt(r));case 5:return a=e.sent,e.abrupt("return",new Rl(a,(function(e){return Js(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ml(){return(Ml=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vt(t),e.next=3,Fl(i.auth,n,Vt(r));case 3:return a=e.sent,e.abrupt("return",new Rl(a,(function(e){return Zs(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fl(e,t,n){return Ul.apply(this,arguments)}function Ul(){return Ul=Xe($e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ho("string"===typeof a,t,"argument-error"),ho(r.type===Cl,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return ho("enroll"===u.type,t,"internal-error"),e.next=13,Vc(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return ho("signin"===u.type,t,"internal-error"),ho(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,kl(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ds(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Ul.apply(this,arguments)}function Vl(){return(Vl=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bs(Vt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jl=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Lu(t)}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return Fl(this.auth,e,Vt(t))}}],[{key:"credential",value:function(e,t){return ks._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ks._fromTokenResponse(n,r):null}}]),e}();function Bl(e,t){return t?au(t):(ho(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}jl.PROVIDER_ID="phone",jl.PHONE_SIGN_IN_METHOD="phone";var zl=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return ls(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ls(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ls(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ju);function ql(e){return Hs(e.auth,new zl(e),e.bypassAuthState)}function Kl(e){var t=e.auth,n=e.user;return ho(n,t,"internal-error"),Gs(n,new zl(e),e.bypassAuthState)}function Gl(e){return Wl.apply(this,arguments)}function Wl(){return(Wl=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ho(r=t.user,n,"internal-error"),e.abrupt("return",Bs(r,new zl(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hl=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return y(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Xe($e().mark((function t(n,r){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Xe($e().mark((function e(t){var n,r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ql;case"linkViaPopup":case"linkViaRedirect":return Gl;case"reauthViaPopup":case"reauthViaRedirect":return Kl;default:uo(this.auth,"internal-error")}}},{key:"resolve",value:function(e){vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ql=new ko(2e3,1e4);function Yl(e,t,n){return $l.apply(this,arguments)}function $l(){return($l=Xe($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lu(t),lo(t,n,xs),a=Bl(i,r),o=new ef(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jl(){return(Jl=Xe($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lo((i=Vt(t)).auth,n,xs),a=Bl(i.auth,r),o=new ef(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xl(e,t,n){return Zl.apply(this,arguments)}function Zl(){return(Zl=Xe($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lo((i=Vt(t)).auth,n,xs),a=Bl(i.auth,r),o=new ef(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ef=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=x(u),u}return y(n,[{key:"executeNotNull",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ho(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Xe($e().mark((function e(){var t,n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vo(1===this.filter.length,"Popup operations only handle one event"),t=Jc(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(so(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(so(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(so(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Ql.get())}()}}]),n}(Hl);ef.currentPopupAction=null;var tf="pendingRedirect",nf=new Map,rf=function(e){k(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return y(n,[{key:"execute",value:function(){var e=Xe($e().mark((function e(){var t,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=nf.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,af(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ka(w(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:nf.set(this.auth._key(),t);case 21:return this.bypassAuthState||nf.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Xe($e().mark((function e(t){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ka(w(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ka(w(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Hl);function af(e,t){return of.apply(this,arguments)}function of(){return(of=Xe($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ff(n),i=lf(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uf(e,t){return sf.apply(this,arguments)}function sf(){return(sf=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t)._set(ff(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cf(e,t){nf.set(e._key(),t)}function lf(e){return au(e._redirectPersistence)}function ff(e){return su(tf,e.config.apiKey,e.name)}function hf(e,t,n){return function(e,t,n){return df.apply(this,arguments)}(e,t,n)}function df(){return(df=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lu(t),lo(t,n,xs),e.next=4,i._initializationPromise;case 4:return a=Bl(i,r),e.next=7,uf(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pf(e,t,n){return function(e,t,n){return vf.apply(this,arguments)}(e,t,n)}function vf(){return(vf=Xe($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lo((i=Vt(t)).auth,n,xs),e.next=4,i.auth._initializationPromise;case 4:return a=Bl(i.auth,r),e.next=7,uf(a,i.auth);case 7:return e.next=9,xf(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mf(e,t,n){return function(e,t,n){return yf.apply(this,arguments)}(e,t,n)}function yf(){return(yf=Xe($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lo((i=Vt(t)).auth,n,xs),e.next=4,i.auth._initializationPromise;case 4:return a=Bl(i.auth,r),e.next=7,qs(!1,i,n.providerId);case 7:return e.next=9,uf(a,i.auth);case 9:return e.next=11,xf(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gf(e,t){return kf.apply(this,arguments)}function kf(){return(kf=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lu(t)._initializationPromise;case 2:return e.abrupt("return",wf(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wf(e,t){return bf.apply(this,arguments)}function bf(){return bf=Xe($e().mark((function e(t,n){var r,i,a,o,u,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Lu(t),a=Bl(i,n),o=new rf(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),bf.apply(this,arguments)}function xf(e){return _f.apply(this,arguments)}function _f(){return(_f=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jc("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var If=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return y(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Tf(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(so(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ef(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ef(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ef(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Tf(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Sf(e){return Cf.apply(this,arguments)}function Cf(){return Cf=Xe($e().mark((function e(t){var n,r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Eo(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}var Af=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nf=/^https?/;function Df(){return(Df=Xe($e().mark((function e(t){var n,r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Sf(t);case 4:n=e.sent,r=n.authorizedDomains,i=S(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Rf(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:uo(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Rf(e){var t=mo(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Nf.test(r))return!1;if(Af.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Pf=new ko(3e4,6e4);function Of(){var e=Zc().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Lf=null;function Mf(e){return Lf=Lf||function(e){return new Promise((function(t,n){var r,i,a;function o(){Of(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Of(),n(so(e,"network-request-failed"))},timeout:Pf.get()})}if(null===(i=null===(r=Zc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Zc().gapi)||void 0===a?void 0:a.load)){var u=Au("iframefcb");return Zc()[u]=function(){gapi.load?o():n(so(e,"network-request-failed"))},Cu("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Lf=null,e}))}(e),Lf}var Ff=new ko(5e3,15e3),Uf="__/auth/iframe",Vf="emulator/auth/iframe",jf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zf(e){var t=e.config;ho(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?wo(t,Vf):"https://".concat(e.config.authDomain,"/").concat(Uf),r={apiKey:t.apiKey,appName:e.name,v:Fn},i=Bf.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ct(r).slice(1))}function qf(e){return Kf.apply(this,arguments)}function Kf(){return Kf=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf(t);case 2:return n=e.sent,ho(r=Zc().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:zf(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jf,dontclear:!0},(function(e){return new Promise(function(){var n=Xe($e().mark((function n(r,i){var a,o,u;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Zc().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=so(t,"network-request-failed"),o=Zc().setTimeout((function(){i(a)}),Ff.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Kf.apply(this,arguments)}var Gf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wf=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return y(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Hf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Gf),{width:r.toString(),height:i.toString(),top:a,left:o}),c=pt().toLowerCase();n&&(u=du(c)?"_blank":n),fu(c)&&(t=t||"http://localhost",s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return gu(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Wf(null);var h=window.open(t||"",u,f);ho(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Wf(h)}var Qf="__/auth/handler",Yf="emulator/auth/handler",$f=encodeURIComponent("fac");function Jf(e,t,n,r,i,a){return Xf.apply(this,arguments)}function Xf(){return(Xf=Xe($e().mark((function e(t,n,r,i,a,o){var u,s,c,f,h,d,p,v,m,y,g,k,w;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ho(t.config.authDomain,t,"auth-domain-config-required"),ho(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Fn,eventId:a},n instanceof xs)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",Et(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)f=l(c[s],2),h=f[0],d=f[1],u[h]=d;for(n instanceof _s&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=p.join(",")),t.tenantId&&(u.tid=t.tenantId),v=u,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,w=k?"#".concat($f,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(Zf(t),"?").concat(Ct(v).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zf(e){var t=e.config;return t.emulator?wo(t,Yf):"https://".concat(t.authDomain,"/").concat(Qf)}var eh="webStorageSupport",th=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qc,this._completeRedirectFn=wf,this._overrideRedirectResult=cf}return y(e,[{key:"_openPopup",value:function(){var e=Xe($e().mark((function e(t,n,r,i){var a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vo(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Jf(t,n,r,mo(),i);case 3:return o=e.sent,e.abrupt("return",Hf(t,o,Jc()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Xe($e().mark((function e(t,n,r,i){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Jf(t,n,r,mo(),i);case 4:return el(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(vo(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qf(t);case 2:return n=e.sent,r=new If(t),n.register("authEvent",(function(e){return ho(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(eh,{type:eh},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[eh];void 0!==i&&t(!!i),uo(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Df.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ku()||hu()||gu()}}]),e}(),nh=th,rh=function(){function e(t){d(this,e),this.factorId=t}return y(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return po("unexpected MultiFactorSessionType")}}}]),e}(),ih=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return y(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Eo(e,"POST","/v2/accounts/mfaEnrollment:finalize",Io(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Eo(e,"POST","/v2/accounts/mfaSignIn:finalize",Io(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(rh),ah=function(){function e(){d(this,e)}return y(e,null,[{key:"assertion",value:function(e){return ih._fromCredential(e)}}]),e}();ah.FACTOR_ID="phone";var oh=function(){function e(){d(this,e)}return y(e,null,[{key:"assertionForEnrollment",value:function(e,t){return uh._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return uh._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,i=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},Eo(i,"POST","/v2/accounts/mfaEnrollment:start",Io(i,a));case 4:return r=e.sent,e.abrupt("return",sh._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();oh.FACTOR_ID="totp";var uh=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return y(n,[{key:"_finalizeEnroll",value:function(){var e=Xe($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",jc(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",wl(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(rh),sh=function(){function e(t,n,r,i,a,o,u){d(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return y(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(ch(e)||ch(t))&&(r=!0),r&&(ch(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),ch(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function ch(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var lh="@firebase/auth",fh="0.23.2",hh=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return y(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ho(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var dh,ph=ft("authIdTokenMaxAge")||300,vh=null;function mh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn(),t=Dn(e,"auth");if(t.isInitialized())return t.getImmediate();var n,r=function(e,t){var n=Dn(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Tt(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;uo(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:nh,persistence:[gl,Wc,Qc]}),i=ft("authTokenSyncURL");if(i){var a=(n=i,function(){var e=Xe($e().mark((function e(t){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,t.getIdTokenResult();case 4:e.t0=e.sent;case 5:if(r=e.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>ph)){e.next=9;break}return e.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,vh!==a){e.next=12;break}return e.abrupt("return");case 12:return vh=a,e.next=15,fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());!function(e,t,n){Vt(e).beforeAuthStateChanged(t,n)}(r,a,(function(){return a(r.currentUser)})),function(e,t,n,r){Vt(e).onIdTokenChanged(t,n,r)}(r,(function(e){return a(e)}))}var o=st("auth");return o&&Fu(r,"http://".concat(o)),r}dh="Browser",Nn(new jt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;ho(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:dh,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wu(dh)},l=new Ou(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(au);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Nn(new jt("auth-internal",(function(e){return function(e){return new hh(e)}(Lu(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),qn(lh,fh,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(dh)),qn(lh,fh,"esm2017");var yh,gh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},kh={},wh=wh||{},bh=gh||self;function xh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function _h(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ih="closure_uid_"+(1e9*Math.random()>>>0),Eh=0;function Th(e,t,n){return e.call.apply(e.bind,arguments)}function Sh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ch(e,t,n){return(Ch=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Th:Sh).apply(null,arguments)}function Ah(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Nh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Dh(){this.s=this.s,this.o=this.o}Dh.prototype.s=!1,Dh.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ih)&&e[Ih]||(e[Ih]=++Eh))},Dh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Rh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ph(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Oh(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(xh(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Lh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Lh.prototype.h=function(){this.defaultPrevented=!0};var Mh=function(){if(!bh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{bh.addEventListener("test",(function(){}),t),bh.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Fh(e){return/^[\s\xa0]*$/.test(e)}function Uh(){var e=bh.navigator;return e&&(e=e.userAgent)?e:""}function Vh(e){return-1!=Uh().indexOf(e)}function jh(e){return jh[" "](e),e}jh[" "]=function(){};var Bh,zh,qh=Vh("Opera"),Kh=Vh("Trident")||Vh("MSIE"),Gh=Vh("Edge"),Wh=Gh||Kh,Hh=Vh("Gecko")&&!(-1!=Uh().toLowerCase().indexOf("webkit")&&!Vh("Edge"))&&!(Vh("Trident")||Vh("MSIE"))&&!Vh("Edge"),Qh=-1!=Uh().toLowerCase().indexOf("webkit")&&!Vh("Edge");function Yh(){var e=bh.document;return e?e.documentMode:void 0}e:{var $h="",Jh=function(){var e=Uh();return Hh?/rv:([^\);]+)(\)|;)/.exec(e):Gh?/Edge\/([\d\.]+)/.exec(e):Kh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Qh?/WebKit\/(\S+)/.exec(e):qh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Jh&&($h=Jh?Jh[1]:""),Kh){var Xh=Yh();if(null!=Xh&&Xh>parseFloat($h)){Bh=String(Xh);break e}}Bh=$h}if(bh.document&&Kh){var Zh=Yh();zh=Zh||(parseInt(Bh,10)||void 0)}else zh=void 0;var ed=zh;function td(e,t){if(Lh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Hh){e:{try{jh(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:nd[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&td.$.h.call(this)}}Nh(td,Lh);var nd={2:"touch",3:"pen",4:"mouse"};td.prototype.h=function(){td.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var rd="closure_listenable_"+(1e6*Math.random()|0),id=0;function ad(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++id,this.fa=this.ia=!1}function od(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ud(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function sd(e){var t={};for(var n in e)t[n]=e[n];return t}var cd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ld(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<cd.length;a++)n=cd[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function fd(e){this.src=e,this.g={},this.h=0}function hd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Rh(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(od(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function dd(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}fd.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=dd(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ad(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var pd="closure_lm_"+(1e6*Math.random()|0),vd={};function md(e,t,n,r,i){if(r&&r.once)return gd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)md(e,t[a],n,r,i);return null}return n=Ed(n),e&&e[rd]?e.O(t,n,_h(r)?!!r.capture:!!r,i):yd(e,t,n,!1,r,i)}function yd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=_h(i)?!!i.capture:!!i,u=_d(e);if(u||(e[pd]=u=new fd(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=xd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Mh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function gd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)gd(e,t[a],n,r,i);return null}return n=Ed(n),e&&e[rd]?e.P(t,n,_h(r)?!!r.capture:!!r,i):yd(e,t,n,!0,r,i)}function kd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)kd(e,t[a],n,r,i);else r=_h(r)?!!r.capture:!!r,n=Ed(n),e&&e[rd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=dd(a=e.g[t],n,r,i))&&(od(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=_d(e))&&(t=e.g[t.toString()],e=-1,t&&(e=dd(t,n,r,i)),(n=-1<e?t[e]:null)&&wd(n))}function wd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[rd])hd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_d(t))?(hd(n,e),0==n.h&&(n.src=null,t[pd]=null)):od(e)}}}function bd(e){return e in vd?vd[e]:vd[e]="on"+e}function xd(e,t){if(e.fa)e=!0;else{t=new td(t,this);var n=e.listener,r=e.la||e.src;e.ia&&wd(e),e=n.call(r,t)}return e}function _d(e){return(e=e[pd])instanceof fd?e:null}var Id="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ed(e){return"function"===typeof e?e:(e[Id]||(e[Id]=function(t){return e.handleEvent(t)}),e[Id])}function Td(){Dh.call(this),this.i=new fd(this),this.S=this,this.J=null}function Sd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Lh(t,e);else if(t instanceof Lh)t.target=t.target||e;else{var i=t;ld(t=new Lh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Cd(o,r,!0,t)&&i}if(i=Cd(o=t.g=e,r,!0,t)&&i,i=Cd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Cd(o=t.g=n[a],r,!1,t)&&i}function Cd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&hd(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Nh(Td,Dh),Td.prototype[rd]=!0,Td.prototype.removeEventListener=function(e,t,n,r){kd(this,e,t,n,r)},Td.prototype.N=function(){if(Td.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)od(n[r]);delete t.g[e],t.h--}}this.J=null},Td.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Td.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ad=bh.JSON.stringify,Nd=function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Dd(){var e=Vd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Rd=function(){function e(){d(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=Pd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Pd=new Nd((function(){return new Od}),(function(e){return e.reset()})),Od=function(){function e(){d(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ld(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Md(e){bh.setTimeout((function(){throw e}),0)}var Fd,Ud=!1,Vd=new Rd,jd=function(){var e=bh.Promise.resolve(void 0);Fd=function(){e.then(Bd)}},Bd=function(){for(var e;e=Dd();){try{e.h.call(e.g)}catch(n){Md(n)}var t=Pd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ud=!1};function zd(e,t){Td.call(this),this.h=e||1,this.g=t||bh,this.j=Ch(this.qb,this),this.l=Date.now()}function qd(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Kd(e,t,n){if("function"===typeof e)n&&(e=Ch(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ch(e.handleEvent,e)}return 2147483647<Number(t)?-1:bh.setTimeout(e,t||0)}function Gd(e){e.g=Kd((function(){e.g=null,e.i&&(e.i=!1,Gd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Nh(zd,Td),(yh=zd.prototype).ga=!1,yh.T=null,yh.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Sd(this,"tick"),this.ga&&(qd(this),this.start()))}},yh.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yh.N=function(){zd.$.N.call(this),qd(this),delete this.g};var Wd=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Gd(this)}},{key:"N",value:function(){Ka(w(n.prototype),"N",this).call(this),this.g&&(bh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Dh);function Hd(e){Dh.call(this),this.h=e,this.g={}}Nh(Hd,Dh);var Qd=[];function Yd(e,t,n,r){Array.isArray(n)||(n&&(Qd[0]=n.toString()),n=Qd);for(var i=0;i<n.length;i++){var a=md(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function $d(e){ud(e.g,(function(e,t){this.g.hasOwnProperty(t)&&wd(e)}),e),e.g={}}function Jd(){this.g=!0}function Xd(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ad(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Hd.prototype.N=function(){Hd.$.N.call(this),$d(this)},Hd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jd.prototype.Ea=function(){this.g=!1},Jd.prototype.info=function(){};var Zd={},ep=null;function tp(){return ep=ep||new Td}function np(e){Lh.call(this,Zd.Ta,e)}function rp(e){var t=tp();Sd(t,new np(t))}function ip(e,t){Lh.call(this,Zd.STAT_EVENT,e),this.stat=t}function ap(e){var t=tp();Sd(t,new ip(t,e))}function op(e,t){Lh.call(this,Zd.Ua,e),this.size=t}function up(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return bh.setTimeout((function(){e()}),t)}Zd.Ta="serverreachability",Nh(np,Lh),Zd.STAT_EVENT="statevent",Nh(ip,Lh),Zd.Ua="timingevent",Nh(op,Lh);var sp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},cp={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function lp(){}function fp(e){return e.h||(e.h=e.i())}function hp(){}lp.prototype.h=null;var dp,pp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vp(){Lh.call(this,"d")}function mp(){Lh.call(this,"c")}function yp(){}function gp(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Hd(this),this.P=wp,e=Wh?125:void 0,this.V=new zd(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kp}function kp(){this.i=null,this.g="",this.h=!1}Nh(vp,Lh),Nh(mp,Lh),Nh(yp,lp),yp.prototype.g=function(){return new XMLHttpRequest},yp.prototype.i=function(){return{}},dp=new yp;var wp=45e3,bp={},xp={};function _p(e,t,n){e.L=1,e.v=zp(Fp(t)),e.s=n,e.S=!0,Ip(e,null)}function Ip(e,t){e.G=Date.now(),Cp(e),e.A=Fp(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),tv(n.i,"t",r),e.C=0,n=e.l.J,e.h=new kp,e.g=nm(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Wd(Ch(e.Pa,e,e.g),e.O)),Yd(e.U,e.g,"readystatechange",e.nb),t=e.I?sd(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),rp(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ep(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Tp(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Sp(e,n))==xp){4==t&&(e.o=4,ap(14),i=!1),Xd(e.j,e.m,null,"[Incomplete Response]");break}if(r==bp){e.o=4,ap(15),Xd(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Xd(e.j,e.m,r,null),Pp(e,r)}Ep(e)&&r!=xp&&r!=bp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ap(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qv(t),t.M=!0,ap(11))):(Xd(e.j,e.m,n,"[Invalid Chunked Response]"),Rp(e),Dp(e))}function Sp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?xp:(n=Number(t.substring(n,r)),isNaN(n)?bp:(r+=1)+n>t.length?xp:(t=t.slice(r,r+n),e.C=r+n,t))}function Cp(e){e.Y=Date.now()+e.P,Ap(e,e.P)}function Ap(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=up(Ch(e.lb,e),t)}function Np(e){e.B&&(bh.clearTimeout(e.B),e.B=null)}function Dp(e){0==e.l.H||e.J||Jv(e.l,e)}function Rp(e){Np(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,qd(e.V),$d(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Pp(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||sv(n.i,e)))if(!e.K&&sv(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;$v(n),jv(n)}Hv(n),ap(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=up(Ch(n.ib,n),6e3));if(1>=uv(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Zv(n,11)}else if((e.K||n.g==e)&&$v(n),!Fh(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(cv(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Bp(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=tm(r,r.J?r.pa:null,r.Y),d.K){lv(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Np(p),Cp(p)),r.g=d}else Wv(r);0<n.j.length&&zv(n)}else"stop"!=a[0]&&"close"!=a[0]||Zv(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Zv(n,7):Vv(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}rp()}catch(a){}}function Op(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(xh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(xh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(xh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(yh=gp.prototype).setTimeout=function(e){this.P=e},yh.nb=function(e){e=e.target;var t=this.M;t&&3==Pv(e)?t.l():this.Pa(e)},yh.Pa=function(e){try{if(e==this.g)e:{var t=Pv(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Wh||this.g&&(this.h.h||this.g.ja()||Ov(this.g)))){this.J||4!=t||7==n||rp(),Np(this);var r=this.g.da();this.ca=r;t:if(Ep(this)){var i=Ov(this.g);e="";var a=i.length,o=4==Pv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Rp(this),Dp(this);var u="";break t}this.h.i=new bh.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fh(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ap(12),Rp(this),Dp(this);break e}Xd(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pp(this,r)}this.S?(Tp(this,t,u),Wh&&this.i&&3==t&&(Yd(this.U,this.V,"tick",this.mb),this.V.start())):(Xd(this.j,this.m,u,null),Pp(this,u)),4==t&&Rp(this),this.i&&!this.J&&(4==t?Jv(this.l,this):(this.i=!1,Cp(this)))}else(function(e){var t={};e=(e.g&&2<=Pv(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Fh(e[n])){var r=Ld(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,ap(12)):(this.o=0,ap(13)),Rp(this),Dp(this)}}}catch(t){}},yh.mb=function(){if(this.g){var e=Pv(this.g),t=this.g.ja();this.C<t.length&&(Np(this),Tp(this,e,t),this.i&&4!=e&&Cp(this))}},yh.cancel=function(){this.J=!0,Rp(this)},yh.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(rp(),ap(17)),Rp(this),this.o=2,Dp(this)):Ap(this,this.Y-e)};var Lp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mp(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Mp){this.h=e.h,Up(this,e.j),this.s=e.s,this.g=e.g,Vp(this,e.m),this.l=e.l;var t=e.i,n=new Jp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),jp(this,n),this.o=e.o}else e&&(t=String(e).match(Lp))?(this.h=!1,Up(this,t[1]||"",!0),this.s=qp(t[2]||""),this.g=qp(t[3]||"",!0),Vp(this,t[4]),this.l=qp(t[5]||"",!0),jp(this,t[6]||"",!0),this.o=qp(t[7]||"")):(this.h=!1,this.i=new Jp(null,this.h))}function Fp(e){return new Mp(e)}function Up(e,t,n){e.j=n?qp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function jp(e,t,n){t instanceof Jp?(e.i=t,function(e,t){t&&!e.j&&(Xp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zp(this,t),tv(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Kp(t,Yp)),e.i=new Jp(t,e.h))}function Bp(e,t,n){e.i.set(t,n)}function zp(e){return Bp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function qp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Kp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Gp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Mp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Kp(t,Wp,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Kp(t,Wp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Kp(n,"/"==n.charAt(0)?Qp:Hp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Kp(n,$p)),e.join("")};var Wp=/[#\/\?@]/g,Hp=/[#\?:]/g,Qp=/[#\?]/g,Yp=/[#\?@]/g,$p=/#/g;function Jp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Xp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zp(e,t){Xp(e),t=nv(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ev(e,t){return Xp(e),t=nv(e,t),e.g.has(t)}function tv(e,t,n){Zp(e,t),0<n.length&&(e.i=null,e.g.set(nv(e,t),Ph(n)),e.h+=n.length)}function nv(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(yh=Jp.prototype).add=function(e,t){Xp(this),this.i=null,e=nv(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},yh.forEach=function(e,t){Xp(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},yh.ta=function(){Xp(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},yh.Z=function(e){Xp(this);var t=[];if("string"===typeof e)ev(this,e)&&(t=t.concat(this.g.get(nv(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},yh.set=function(e,t){return Xp(this),this.i=null,ev(this,e=nv(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},yh.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},yh.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var rv=y((function e(t,n){d(this,e),this.g=t,this.map=n}));function iv(e){this.l=e||av,bh.PerformanceNavigationTiming?e=0<(e=bh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(bh.g&&bh.g.Ka&&bh.g.Ka()&&bh.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var av=10;function ov(e){return!!e.h||!!e.g&&e.g.size>=e.j}function uv(e){return e.h?1:e.g?e.g.size:0}function sv(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function cv(e,t){e.g?e.g.add(t):e.h=t}function lv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function fv(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=S(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Ph(e.i)}iv.prototype.cancel=function(){if(this.i=fv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=S(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var hv,dv=function(){function e(){d(this,e)}return y(e,[{key:"stringify",value:function(e){return bh.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return bh.JSON.parse(e,void 0)}}]),e}();function pv(){this.g=new dv}function vv(e,t,n){var r=n||"";try{Op(e,(function(e,n){var i=e;_h(e)&&(i=Ad(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function mv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function yv(e){this.l=e.fc||null,this.j=e.ob||!1}function gv(e,t){Td.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=kv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nh(yv,lp),yv.prototype.g=function(){return new gv(this.l,this.j)},yv.prototype.i=(hv={},function(){return hv}),Nh(gv,Td);var kv=0;function wv(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function bv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,xv(e)}function xv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(yh=gv.prototype).open=function(e,t){if(this.readyState!=kv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,xv(this)},yh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||bh).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},yh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bv(this)),this.readyState=kv},yh.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,xv(this)),this.g&&(this.readyState=3,xv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof bh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wv(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},yh.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?bv(this):xv(this),3==this.readyState&&wv(this)}},yh.Za=function(e){this.g&&(this.response=this.responseText=e,bv(this))},yh.Ya=function(e){this.g&&(this.response=e,bv(this))},yh.ka=function(){this.g&&bv(this)},yh.setRequestHeader=function(e,t){this.v.append(e,t)},yh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},yh.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(gv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var _v=bh.JSON.parse;function Iv(e){Td.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ev,this.L=this.M=!1}Nh(Iv,Td);var Ev="",Tv=/^https?$/i,Sv=["POST","PUT"];function Cv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Av(e),Dv(e)}function Av(e){e.F||(e.F=!0,Sd(e,"complete"),Sd(e,"error"))}function Nv(e){if(e.h&&"undefined"!=typeof wh&&(!e.C[1]||4!=Pv(e)||2!=e.da()))if(e.v&&4==Pv(e))Kd(e.La,0,e);else if(Sd(e,"readystatechange"),4==Pv(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Lp)[1]||null;!a&&bh.self&&bh.self.location&&(a=bh.self.location.protocol.slice(0,-1)),i=!Tv.test(a?a.toLowerCase():"")}t=i}if(t)Sd(e,"complete"),Sd(e,"success");else{e.m=6;try{var o=2<Pv(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Av(e)}}finally{Dv(e)}}}function Dv(e,t){if(e.g){Rv(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Sd(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Rv(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(bh.clearTimeout(e.A),e.A=null)}function Pv(e){return e.g?e.g.readyState:0}function Ov(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ev:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Vm){return null}}function Lv(e){var t="";return ud(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lv(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Bp(e,t,n))}function Fv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Uv(e){this.Ga=0,this.j=[],this.l=new Jd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fv("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fv("baseRetryDelayMs",5e3,e),this.hb=Fv("retryDelaySeedMs",1e4,e),this.eb=Fv("forwardChannelMaxRetries",2,e),this.xa=Fv("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new iv(e&&e.concurrentRequestLimit),this.Ja=new pv,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Vv(e){if(Bv(e),3==e.H){var t=e.W++,n=Fp(e.I);if(Bp(n,"SID",e.K),Bp(n,"RID",t),Bp(n,"TYPE","terminate"),Kv(e,n),(t=new gp(e,e.l,t)).L=2,t.v=zp(Fp(n)),n=!1,bh.navigator&&bh.navigator.sendBeacon)try{n=bh.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&bh.Image&&((new Image).src=t.v,n=!0),n||(t.g=nm(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Cp(t)}em(e)}function jv(e){e.g&&(Qv(e),e.g.cancel(),e.g=null)}function Bv(e){jv(e),e.u&&(bh.clearTimeout(e.u),e.u=null),$v(e),e.i.cancel(),e.m&&("number"===typeof e.m&&bh.clearTimeout(e.m),e.m=null)}function zv(e){if(!ov(e.i)&&!e.m){e.m=!0;var t=e.Na;Fd||jd(),Ud||(Fd(),Ud=!0),Vd.add(t,e),e.C=0}}function qv(e,t){var n;n=t?t.m:e.W++;var r=Fp(e.I);Bp(r,"SID",e.K),Bp(r,"RID",n),Bp(r,"AID",e.V),Kv(e,r),e.o&&e.s&&Mv(r,e.o,e.s),n=new gp(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Gv(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),cv(e.i,n),_p(n,r,t)}function Kv(e,t){e.na&&ud(e.na,(function(e,n){Bp(t,n,e)})),e.h&&Op({},(function(e,n){Bp(t,n,e)}))}function Gv(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ch(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{vv(l,o,"req"+c+"_")}catch($m){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Wv(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Fd||jd(),Ud||(Fd(),Ud=!0),Vd.add(t,e),e.A=0}}function Hv(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=up(Ch(e.Ma,e),Xv(e,e.A)),e.A++,!0)}function Qv(e){null!=e.B&&(bh.clearTimeout(e.B),e.B=null)}function Yv(e){e.g=new gp(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Fp(e.wa);Bp(t,"RID","rpc"),Bp(t,"SID",e.K),Bp(t,"AID",e.V),Bp(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Bp(t,"TO",e.qa),Bp(t,"TYPE","xmlhttp"),Kv(e,t),e.o&&e.s&&Mv(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=zp(Fp(t)),n.s=null,n.S=!0,Ip(n,e)}function $v(e){null!=e.v&&(bh.clearTimeout(e.v),e.v=null)}function Jv(e,t){var n=null;if(e.g==t){$v(e),Qv(e),e.g=null;var r=2}else{if(!sv(e.i,t))return;n=t.F,lv(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Sd(r=tp(),new op(r,n)),zv(e)}else Wv(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(uv(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=up(Ch(e.Na,e,t),Xv(e,e.C)),e.C++,!0))}(e,t)||2==r&&Hv(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Zv(e,5);break;case 4:Zv(e,10);break;case 3:Zv(e,6);break;default:Zv(e,2)}}function Xv(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Zv(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ch(e.pb,e);n||(n=new Mp("//www.google.com/images/cleardot.gif"),bh.location&&"http"==bh.location.protocol||Up(n,"https"),zp(n)),function(e,t){var n=new Jd;if(bh.Image){var r=new Image;r.onload=Ah(mv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ah(mv,n,r,"TestLoadImage: error",!1,t),r.onabort=Ah(mv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ah(mv,n,r,"TestLoadImage: timeout",!1,t),bh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ap(2);e.H=0,e.h&&e.h.za(t),em(e),Bv(e)}function em(e){if(e.H=0,e.ma=[],e.h){var t=fv(e.i);0==t.length&&0==e.j.length||(Oh(e.ma,t),Oh(e.ma,e.j),e.i.i.length=0,Ph(e.j),e.j.length=0),e.h.ya()}}function tm(e,t,n){var r=n instanceof Mp?Fp(n):new Mp(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Vp(r,r.m);else{var i=bh.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Mp(null);r&&Up(a,r),t&&(a.g=t),i&&Vp(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Bp(r,n,t),Bp(r,"VER",e.ra),Kv(e,r),r}function nm(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Iv(new yv({ob:!0})):new Iv(e.va)).Oa(e.J),t}function rm(){}function im(){if(Kh&&!(10<=Number(ed)))throw Error("Environmental error: no available transport.")}function am(e,t){Td.call(this),this.g=new Uv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Fh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Fh(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new sm(this)}function om(e){vp.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function um(){mp.call(this),this.status=1}function sm(e){this.g=e}function cm(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function lm(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function fm(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(yh=Iv.prototype).Oa=function(e){this.M=e},yh.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():dp.g(),this.C=this.u?fp(this.u):fp(dp),this.g.onreadystatechange=Ch(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Cv(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=S(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=bh.FormData&&e instanceof bh.FormData,!(0<=Rh(Sv,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=S(n);try{for(c.s();!(s=c.n()).done;){var f=l(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Rv(this),0<this.B&&((this.L=function(e){return Kh&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ch(this.ua,this)):this.A=Kd(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Cv(this,u)}},yh.ua=function(){"undefined"!=typeof wh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sd(this,"timeout"),this.abort(8))},yh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Sd(this,"complete"),Sd(this,"abort"),Dv(this))},yh.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dv(this,!0)),Iv.$.N.call(this)},yh.La=function(){this.s||(this.G||this.v||this.l?Nv(this):this.kb())},yh.kb=function(){Nv(this)},yh.isActive=function(){return!!this.g},yh.da=function(){try{return 2<Pv(this)?this.g.status:-1}catch(hv){return-1}},yh.ja=function(){try{return this.g?this.g.responseText:""}catch(hv){return""}},yh.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),_v(t)}},yh.Ia=function(){return this.m},yh.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(yh=Uv.prototype).ra=8,yh.H=1,yh.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new gp(this,this.l,e),n=this.s;if(this.U&&(n?ld(n=sd(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Gv(this,t,r),Bp(i=Fp(this.I),"RID",e),Bp(i,"CVER",22),this.F&&Bp(i,"X-HTTP-Session-Id",this.F),Kv(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Lv(n)))+"&"+r:this.o&&Mv(i,this.o,n)),cv(this.i,t),this.bb&&Bp(i,"TYPE","init"),this.P?(Bp(i,"$req",r),Bp(i,"SID","null"),t.aa=!0,_p(t,i,null)):_p(t,i,r),this.H=2}}else 3==this.H&&(e?qv(this,e):0==this.j.length||ov(this.i)||qv(this))},yh.Ma=function(){if(this.u=null,Yv(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=up(Ch(this.jb,this),e)}},yh.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ap(10),jv(this),Yv(this))},yh.ib=function(){null!=this.v&&(this.v=null,jv(this),Hv(this),ap(19))},yh.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ap(2)):(this.l.info("Failed to ping google.com"),ap(1))},yh.isActive=function(){return!!this.h&&this.h.isActive(this)},(yh=rm.prototype).Ba=function(){},yh.Aa=function(){},yh.za=function(){},yh.ya=function(){},yh.isActive=function(){return!0},yh.Va=function(){},im.prototype.g=function(e,t){return new am(e,t)},Nh(am,Td),am.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ap(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=tm(e,null,e.Y),zv(e)},am.prototype.close=function(){Vv(this.g)},am.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ad(e),e=n);t.j.push(new rv(t.fb++,e)),3==t.H&&zv(t)},am.prototype.N=function(){this.g.h=null,delete this.j,Vv(this.g),delete this.g,am.$.N.call(this)},Nh(om,vp),Nh(um,mp),Nh(sm,rm),sm.prototype.Ba=function(){Sd(this.g,"a")},sm.prototype.Aa=function(e){Sd(this.g,new om(e))},sm.prototype.za=function(e){Sd(this.g,new um)},sm.prototype.ya=function(){Sd(this.g,"b")},Nh(cm,(function(){this.blockSize=-1})),cm.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},cm.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)lm(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){lm(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){lm(this,r),i=0;break}}this.h=i,this.i+=t},cm.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var hm={};function dm(e){return-128<=e&&128>e?function(e,t){var n=hm;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new fm([0|e],0>e?-1:0)})):new fm([0|e],0>e?-1:0)}function pm(e){if(isNaN(e)||!isFinite(e))return mm;if(0>e)return bm(pm(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=vm;return new fm(t,0)}var vm=4294967296,mm=dm(0),ym=dm(1),gm=dm(16777216);function km(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function wm(e){return-1==e.h}function bm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new fm(n,~e.h).add(ym)}function xm(e,t){return e.add(bm(t))}function _m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Im(e,t){this.g=e,this.h=t}function Em(e,t){if(km(t))throw Error("division by zero");if(km(e))return new Im(mm,mm);if(wm(e))return t=Em(bm(e),t),new Im(bm(t.g),bm(t.h));if(wm(t))return t=Em(e,bm(t)),new Im(bm(t.g),t.h);if(30<e.g.length){if(wm(e)||wm(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ym,r=t;0>=r.X(e);)n=Tm(n),r=Tm(r);var i=Sm(n,1),a=Sm(r,1);for(r=Sm(r,2),n=Sm(n,2);!km(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Sm(r,1),n=Sm(n,1)}return t=xm(e,i.R(t)),new Im(i,t)}for(i=mm;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=pm(n)).R(t);wm(o)||0<o.X(e);)o=(a=pm(n-=r)).R(t);km(a)&&(a=ym),i=i.add(a),e=xm(e,o)}return new Im(i,e)}function Tm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new fm(n,e.h)}function Sm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new fm(i,e.h)}(yh=fm.prototype).ea=function(){if(wm(this))return-bm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:vm+r)*t,t*=vm}return e},yh.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(km(this))return"0";if(wm(this))return"-"+bm(this).toString(e);for(var t=pm(Math.pow(e,6)),n=this,r="";;){var i=Em(n,t).g,a=((0<(n=xm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(km(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},yh.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},yh.X=function(e){return wm(e=xm(this,e))?-1:km(e)?0:1},yh.abs=function(){return wm(this)?bm(this):this},yh.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new fm(n,-2147483648&n[n.length-1]?-1:0)},yh.R=function(e){if(km(this)||km(e))return mm;if(wm(this))return wm(e)?bm(this).R(bm(e)):bm(bm(this).R(e));if(wm(e))return bm(this.R(bm(e)));if(0>this.X(gm)&&0>e.X(gm))return pm(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,_m(n,2*r+2*i),n[2*r+2*i+1]+=a*s,_m(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,_m(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,_m(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new fm(n,0)},yh.gb=function(e){return Em(this,e).h},yh.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new fm(n,this.h&e.h)},yh.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new fm(n,this.h|e.h)},yh.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new fm(n,this.h^e.h)},im.prototype.createWebChannel=im.prototype.g,am.prototype.send=am.prototype.u,am.prototype.open=am.prototype.m,am.prototype.close=am.prototype.close,sp.NO_ERROR=0,sp.TIMEOUT=8,sp.HTTP_ERROR=6,cp.COMPLETE="complete",hp.EventType=pp,pp.OPEN="a",pp.CLOSE="b",pp.ERROR="c",pp.MESSAGE="d",Td.prototype.listen=Td.prototype.O,Iv.prototype.listenOnce=Iv.prototype.P,Iv.prototype.getLastError=Iv.prototype.Sa,Iv.prototype.getLastErrorCode=Iv.prototype.Ia,Iv.prototype.getStatus=Iv.prototype.da,Iv.prototype.getResponseJson=Iv.prototype.Wa,Iv.prototype.getResponseText=Iv.prototype.ja,Iv.prototype.send=Iv.prototype.ha,Iv.prototype.setWithCredentials=Iv.prototype.Oa,cm.prototype.digest=cm.prototype.l,cm.prototype.reset=cm.prototype.reset,cm.prototype.update=cm.prototype.j,fm.prototype.add=fm.prototype.add,fm.prototype.multiply=fm.prototype.R,fm.prototype.modulo=fm.prototype.gb,fm.prototype.compare=fm.prototype.X,fm.prototype.toNumber=fm.prototype.ea,fm.prototype.toString=fm.prototype.toString,fm.prototype.getBits=fm.prototype.D,fm.fromNumber=pm,fm.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return bm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=pm(Math.pow(n,8)),i=mm,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=pm(Math.pow(n,o)),i=i.R(o).add(pm(u))):i=(i=i.R(r)).add(pm(u))}return i};var Cm=kh.createWebChannelTransport=function(){return new im},Am=kh.getStatEventTarget=function(){return tp()},Nm=kh.ErrorCode=sp,Dm=kh.EventType=cp,Rm=kh.Event=Zd,Pm=kh.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Om=kh.FetchXmlHttpFactory=yv,Lm=kh.WebChannel=hp,Mm=kh.XhrIo=Iv,Fm=kh.Md5=cm,Um=kh.Integer=fm,Vm="@firebase/firestore",jm=function(){function e(t){d(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();jm.UNAUTHENTICATED=new jm(null),jm.GOOGLE_CREDENTIALS=new jm("google-credentials-uid"),jm.FIRST_PARTY=new jm("first-party-uid"),jm.MOCK_USER=new jm("mock-user");var Bm="9.23.0",zm=new Jt("@firebase/firestore");function qm(){return zm.logLevel}function Km(e){if(zm.logLevel<=Kt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Hm);zm.debug.apply(zm,["Firestore (".concat(Bm,"): ").concat(e)].concat(h(i)))}}function Gm(e){if(zm.logLevel<=Kt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Hm);zm.error.apply(zm,["Firestore (".concat(Bm,"): ").concat(e)].concat(h(i)))}}function Wm(e){if(zm.logLevel<=Kt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Hm);zm.warn.apply(zm,["Firestore (".concat(Bm,"): ").concat(e)].concat(h(i)))}}function Hm(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Qm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Bm,") INTERNAL ASSERTION FAILED: ")+e;throw Gm(t),new Error(t)}function Ym(e,t){e||Qm()}function $m(e,t){return e}var Jm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xm=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(bt),Zm=y((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ey=y((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ty=function(){function e(){d(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(jm.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ny=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ry=function(){function e(t){d(this,e),this.t=t,this.currentUser=jm.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Zm;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Zm,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Km("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Km("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Zm)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Km("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ym("string"==typeof n.accessToken),new ey(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ym(null===e||"string"==typeof e),new jm(e)}}]),e}(),iy=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=jm.FIRST_PARTY,this.g=new Map}return y(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),ay=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new iy(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(jm.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),oy=y((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),uy=function(){function e(t){d(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Km("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Km("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Km("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Km("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ym("string"==typeof t.token),e.T=t.token,new oy(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function sy(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var cy=function(){function e(){d(this,e)}return y(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=sy(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function ly(e,t){return e<t?-1:e>t?1:0}function fy(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function hy(e){return e+"\0"}var dy=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Xm(Jm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xm(Jm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Xm(Jm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xm(Jm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ly(this.nanoseconds,e.nanoseconds):ly(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),py=function(){function e(t){d(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new dy(0,0))}},{key:"max",value:function(){return new e(new dy(253402300799,999999999))}}]),e}(),vy=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&Qm(),void 0===r?r=t.length-n:r>t.length-n&&Qm(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),my=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,h(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(vy),yy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gy=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return yy.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Xm(Jm.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Xm(Jm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Xm(Jm.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(vy),ky=function(){function e(t){d(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===my.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(my.fromString(t))}},{key:"fromName",value:function(t){return new e(my.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(my.emptyPath())}},{key:"comparator",value:function(e,t){return my.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new my(t.slice()))}}]),e}(),wy=y((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function by(e){return e.fields.find((function(e){return 2===e.kind}))}function xy(e){return e.fields.filter((function(e){return 2!==e.kind}))}wy.UNKNOWN_ID=-1;var _y=y((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var Iy=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,Sy.min())}}]),e}();function Ey(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=py.fromTimestamp(1e9===r?new dy(n+1,0):new dy(n,r));return new Sy(i,ky.empty(),t)}function Ty(e){return new Sy(e.readTime,e.key,-1)}var Sy=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(py.min(),ky.empty(),-1)}},{key:"max",value:function(){return new e(py.max(),ky.empty(),-1)}}]),e}();function Cy(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ky.comparator(e.documentKey,t.documentKey))?n:ly(e.largestBatchId,t.largestBatchId)}var Ay="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ny=function(){function e(){d(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Dy(e){return Ry.apply(this,arguments)}function Ry(){return(Ry=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Jm.FAILED_PRECONDITION&&t.message===Ay){e.next=2;break}throw t;case 2:Km("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Py=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Qm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=S(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Oy=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new Zm,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new Fy(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=zy(e.target.error);r.v.reject(new Fy(t,n))}}return y(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Km("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Vy(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Fy(n,t)}}}]),e}(),Ly=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(pt())&&Gm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"$",value:function(){var e=Xe($e().mark((function e(t){var n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Km("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Fy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Xm(Jm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Xm(Jm.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Fy(t,n))},i.onupgradeneeded=function(e){Km("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){Km("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Xe($e().mark((function e(t,n,r,i){var a,o,u,s,c=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=$e().mark((function e(){var n,u,s,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Oy.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Py.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Km("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Km("SimpleDb","Removing database:",e),jy(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!kt())return!1;if(e.C())return!0;var t=pt(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDd62gnmqwbIN-JLetUJLVbn_H6h6iFb-s",REACT_APP_APP_ID:"1:407211607571:web:0607065c9301a8b6ea61e6",REACT_APP_AUTH_DOMAIN:"nwitter-5e46f.firebaseapp.com",REACT_APP_MEASUREMENT_ID:"G-6RE4L6CFJ3",REACT_APP_MESSAGING_SENDER_ID:"407211607571",REACT_APP_PROJECT_ID:"nwitter-5e46f",REACT_APP_STORAGE_BUCKET:"nwitter-5e46f.appspot.com"})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),My=function(){function e(t){d(this,e),this.L=t,this.q=!1,this.U=null}return y(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return jy(this.L.delete())}}]),e}(),Fy=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,Jm.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(Xm);function Uy(e){return"IndexedDbTransactionError"===e.name}var Vy=function(){function e(t){d(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Km("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Km("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),jy(n)}},{key:"add",value:function(e){return Km("SimpleDb","ADD",this.store.name,e,e),jy(this.store.add(e))}},{key:"get",value:function(e){var t=this;return jy(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Km("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Km("SimpleDb","DELETE",this.store.name,e),jy(this.store.delete(e))}},{key:"count",value:function(){return Km("SimpleDb","COUNT",this.store.name),jy(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Py((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Py((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Km("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new Py((function(n,r){t.onerror=function(e){var t=zy(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Py((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new My(i),o=t(i.primaryKey,i.value,a);if(o instanceof Py){var u=o.catch((function(e){return a.done(),Py.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Py.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function jy(e){return new Py((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=zy(e.target.error);n(t)}}))}var By=!1;function zy(e){var t=Ly.S(pt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Xm("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return By||(By=!0,setTimeout((function(){throw r}),0)),r}}return e}var qy=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return y(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Km("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Km,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Uy(e.t4)){e.next=17;break}Km("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Dy(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Ky=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"nt",value:function(){var e=Xe($e().mark((function e(){var t,n=this,r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Py.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Km("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Km("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Ty(t);Cy(r,n)>0&&(n=r)})),new Sy(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Gy=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Wy(e){return null==e}function Hy(e){return 0===e&&1/e==-1/0}function Qy(e){return"number"==typeof e&&Number.isInteger(e)&&!Hy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Yy(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Jy(t)),t=$y(e.get(n),t);return Jy(t)}function $y(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Jy(e){return e+"\x01\x01"}function Xy(e){var t=e.length;if(Ym(t>=2),2===t)return Ym("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),my.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Qm(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Qm()}a=o+2}return new my(r)}Gy.ct=-1;var Zy=["userId","batchId"];function eg(e,t){return[e,Yy(t)]}function tg(e,t,n){return[e,Yy(t),n]}var ng={},rg=["prefixPath","collectionGroup","readTime","documentId"],ig=["prefixPath","collectionGroup","documentId"],ag=["collectionGroup","readTime","prefixPath","documentId"],og=["canonicalId","targetId"],ug=["targetId","path"],sg=["path","targetId"],cg=["collectionId","parent"],lg=["indexId","uid"],fg=["uid","sequenceNumber"],hg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dg=["indexId","uid","orderedDocumentKey"],pg=["userId","collectionPath","documentId"],vg=["userId","collectionPath","largestBatchId"],mg=["userId","collectionGroup","largestBatchId"],yg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),gg=[].concat(h(yg),["documentOverlays"]),kg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wg=kg,bg=[].concat(wg,["indexConfiguration","indexState","indexEntries"]),xg=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return y(n)}(Ny);function _g(e,t){var n=$m(e);return Ly.M(n.ht,t)}function Ig(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Eg(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Sg=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Ag.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ag.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ag.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Cg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Cg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Cg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Cg(this.root,e,this.comparator,!0)}}]),e}(),Cg=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Ag=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Qm();if(this.right.isRed())throw Qm();var e=this.left.check();if(e!==this.right.check())throw Qm();return e+(this.isRed()?0:1)}}]),e}();Ag.EMPTY=null,Ag.RED=!0,Ag.BLACK=!1,Ag.EMPTY=new(function(){function e(){d(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw Qm()}},{key:"value",get:function(){throw Qm()}},{key:"color",get:function(){throw Qm()}},{key:"left",get:function(){throw Qm()}},{key:"right",get:function(){throw Qm()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ag(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Ng=function(){function e(t){d(this,e),this.comparator=t,this.data=new Sg(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Dg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Dg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Dg=function(){function e(t){d(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Rg(e){return e.hasNext()?e.getNext():void 0}var Pg=function(){function e(t){d(this,e),this.fields=t,t.sort(gy.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new Ng(gy.comparator),i=S(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=S(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=S(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return fy(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Og=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(E(Error));var Lg=function(e){function t(e){d(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ly(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Og("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Lg.EMPTY_BYTE_STRING=new Lg("");var Mg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fg(e){if(Ym(!!e),"string"==typeof e){var t=0,n=Mg.exec(e);if(Ym(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ug(e.seconds),nanos:Ug(e.nanos)}}function Ug(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Vg(e){return"string"==typeof e?Lg.fromBase64String(e):Lg.fromUint8Array(e)}function jg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bg(e){var t=e.mapValue.fields.__previous_value__;return jg(t)?Bg(t):t}function zg(e){var t=Fg(e.mapValue.fields.__local_write_time__.timestampValue);return new dy(t.seconds,t.nanos)}var qg=y((function e(t,n,r,i,a,o,u,s,c){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),Kg=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Gg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wg={nullValue:"NULL_VALUE"};function Hg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jg(e)?4:uk(e)?9007199254740991:10:Qm()}function Qg(e,t){if(e===t)return!0;var n=Hg(e);if(n!==Hg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zg(e).isEqual(zg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Fg(e.timestampValue),r=Fg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Vg(e.bytesValue).isEqual(Vg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ug(e.geoPointValue.latitude)===Ug(t.geoPointValue.latitude)&&Ug(e.geoPointValue.longitude)===Ug(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ug(e.integerValue)===Ug(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ug(e.doubleValue),r=Ug(t.doubleValue);return n===r?Hy(n)===Hy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fy(e.arrayValue.values||[],t.arrayValue.values||[],Qg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ig(n)!==Ig(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qg(n[i],r[i])))return!1;return!0}(e,t);default:return Qm()}}function Yg(e,t){return void 0!==(e.values||[]).find((function(e){return Qg(e,t)}))}function $g(e,t){if(e===t)return 0;var n=Hg(e),r=Hg(t);if(n!==r)return ly(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ly(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ug(e.integerValue||e.doubleValue),r=Ug(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jg(e.timestampValue,t.timestampValue);case 4:return Jg(zg(e),zg(t));case 5:return ly(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Vg(e),r=Vg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ly(n[i],r[i]);if(0!==a)return a}return ly(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ly(Ug(e.latitude),Ug(t.latitude));return 0!==n?n:ly(Ug(e.longitude),Ug(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=$g(n[i],r[i]);if(a)return a}return ly(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Gg.mapValue&&t===Gg.mapValue)return 0;if(e===Gg.mapValue)return 1;if(t===Gg.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ly(r[o],a[o]);if(0!==u)return u;var s=$g(n[r[o]],i[a[o]]);if(0!==s)return s}return ly(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Qm()}}function Jg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ly(e,t);var n=Fg(e),r=Fg(t),i=ly(n.seconds,r.seconds);return 0!==i?i:ly(n.nanos,r.nanos)}function Xg(e){return Zg(e)}function Zg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Fg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Vg(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ky.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=S(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Zg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=S(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Zg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Qm();var t,n}function ek(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function tk(e){return!!e&&"integerValue"in e}function nk(e){return!!e&&"arrayValue"in e}function rk(e){return!!e&&"nullValue"in e}function ik(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ak(e){return!!e&&"mapValue"in e}function ok(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Eg(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ok(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ok(e.arrayValue.values[r]);return n}return Object.assign({},e)}function uk(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function sk(e){return"nullValue"in e?Wg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ek(Kg.empty(),ky.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Qm()}function ck(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ek(Kg.empty(),ky.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Gg:Qm()}function lk(e,t){var n=$g(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function fk(e,t){var n=$g(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var hk=function(){function e(t){d(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ak(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ok(t)}},{key:"setAll",value:function(e){var t=this,n=gy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ok(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ak(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Qg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ak(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Eg(t,(function(t,n){return e[t]=n}));var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ok(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function dk(e){var t=[];return Eg(e.fields,(function(e,n){var r=new gy([e]);if(ak(n)){var i=dk(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=S(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Pg(t)}var pk=function(){function e(t,n,r,i,a,o,u){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(py.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=hk.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=hk.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=py.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,py.min(),py.min(),py.min(),hk.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,py.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,py.min(),py.min(),hk.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,py.min(),py.min(),hk.empty(),2)}}]),e}(),vk=y((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function mk(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ky.comparator(ky.fromName(o.referenceValue),n.key):$g(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function yk(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Qg(e.position[n],t.position[n]))return!1;return!0}var gk=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function kk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var wk=y((function e(){d(this,e)})),bk=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($g(t,this.value)):null!==t&&Hg(this.value)===Hg(t)&&this.matchesComparison($g(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qm()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Dk(e,t,r):"array-contains"===t?new Lk(e,r):"in"===t?new Mk(e,r):"not-in"===t?new Fk(e,r):"array-contains-any"===t?new Uk(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Rk(e,n):new Pk(e,n)}}]),n}(wk),xk=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return y(n,[{key:"matches",value:function(e){return _k(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=S(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(wk);function _k(e){return"and"===e.op}function Ik(e){return"or"===e.op}function Ek(e){return Tk(e)&&_k(e)}function Tk(e){var t,n=S(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof xk)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Sk(e){if(e instanceof bk)return e.field.canonicalString()+e.op.toString()+Xg(e.value);if(Ek(e))return e.filters.map((function(e){return Sk(e)})).join(",");var t=e.filters.map((function(e){return Sk(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ck(e,t){return e instanceof bk?function(e,t){return t instanceof bk&&e.op===t.op&&e.field.isEqual(t.field)&&Qg(e.value,t.value)}(e,t):e instanceof xk?function(e,t){return t instanceof xk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ck(n,t.filters[r])}),!0)}(e,t):void Qm()}function Ak(e,t){var n=e.filters.concat(t);return xk.create(n,e.op)}function Nk(e){return e instanceof bk?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Xg(e.value))}(e):e instanceof xk?function(e){return e.op.toString()+" {"+e.getFilters().map(Nk).join(" ,")+"}"}(e):"Filter"}var Dk=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=ky.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=ky.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(bk),Rk=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Ok("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bk),Pk=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Ok("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bk);function Ok(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ky.fromName(e.referenceValue)}))}var Lk=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return nk(t)&&Yg(t.arrayValue,this.value)}}]),n}(bk),Mk=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Yg(this.value.arrayValue,t)}}]),n}(bk),Fk=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(Yg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Yg(this.value.arrayValue,t)}}]),n}(bk),Uk=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!nk(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Yg(t.value.arrayValue,e)}))}}]),n}(bk),Vk=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function jk(e){return new Vk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Bk(e){var t=$m(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Sk(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Wy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Xg(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Xg(e)})).join(",")),t.dt=n}return t.dt}function zk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!kk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ck(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yk(e.startAt,t.startAt)&&yk(e.endAt,t.endAt)}function qk(e){return ky.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Kk(e,t){return e.filters.filter((function(e){return e instanceof bk&&e.field.isEqual(t)}))}function Gk(e,t,n){var r,i=Wg,a=!0,o=S(Kk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Wg,c=!0;switch(u.op){case"<":case"<=":s=sk(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Wg}lk({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];lk({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Wk(e,t,n){var r,i=Gg,a=!0,o=S(Kk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Gg,c=!0;switch(u.op){case">=":case">":s=ck(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Gg}fk({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];fk({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Hk=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function Qk(e,t,n,r,i,a,o,u){return new Hk(e,t,n,r,i,a,o,u)}function Yk(e){return new Hk(e)}function $k(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Jk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Xk(e){var t,n=S(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Zk(e){return null!==e.collectionGroup}function ew(e){var t=$m(e);if(null===t.wt){t.wt=[];var n=Xk(t),r=Jk(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new gk(n)),t.wt.push(new gk(gy.keyField(),"asc"));else{var i,a=!1,o=S(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new gk(gy.keyField(),s))}}}return t.wt}function tw(e){var t=$m(e);if(!t._t)if("F"===t.limitType)t._t=jk(t.path,t.collectionGroup,ew(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=S(ew(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new gk(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new vk(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new vk(t.startAt.position,t.startAt.inclusive):null;t._t=jk(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function nw(e,t){t.getFirstInequalityField(),Xk(e);var n=e.filters.concat([t]);return new Hk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function rw(e,t,n){return new Hk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function iw(e,t){return zk(tw(e),tw(t))&&e.limitType===t.limitType}function aw(e){return"".concat(Bk(tw(e)),"|lt:").concat(e.limitType)}function ow(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Nk(e)})).join(", "),"]")),Wy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Xg(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Xg(e)})).join(",")),"Target(".concat(t,")")}(tw(e)),"; limitType=").concat(e.limitType,")")}function uw(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ky.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=S(ew(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=S(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=mk(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ew(e),t))&&!(e.endAt&&!function(e,t,n){var r=mk(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ew(e),t))}(e,t)}function sw(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function cw(e){return function(t,n){var r,i=!1,a=S(ew(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=lw(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function lw(e,t,n){var r=e.field.isKeyField()?ky.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$g(r,i):Qm()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qm()}}var fw=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Eg(this.inner,(function(t,n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Tg(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),hw=new Sg(ky.comparator);function dw(){return hw}var pw=new Sg(ky.comparator);function vw(){for(var e=pw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function mw(e){var t=pw;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function yw(){return kw()}function gw(){return kw()}function kw(){return new fw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var ww=new Sg(ky.comparator),bw=new Ng(ky.comparator);function xw(){for(var e=bw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var _w=new Ng(ly);function Iw(){return _w}function Ew(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hy(t)?"-0":t}}function Tw(e){return{integerValue:""+e}}function Sw(e,t){return Qy(t)?Tw(t):Ew(e,t)}var Cw=y((function e(){d(this,e),this._=void 0}));function Aw(e,t,n){return e instanceof Rw?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&jg(t)&&(t=Bg(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Pw?Ow(e,t):e instanceof Lw?Mw(e,t):function(e,t){var n=Dw(e,t),r=Uw(n)+Uw(e.gt);return tk(n)&&tk(e.gt)?Tw(r):Ew(e.serializer,r)}(e,t)}function Nw(e,t,n){return e instanceof Pw?Ow(e,t):e instanceof Lw?Mw(e,t):n}function Dw(e,t){return e instanceof Fw?tk(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Rw=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(Cw),Pw=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Cw);function Ow(e,t){var n,r=Vw(t),i=S(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Qg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Lw=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Cw);function Mw(e,t){var n,r=Vw(t),i=S(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Qg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Fw=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return y(n)}(Cw);function Uw(e){return Ug(e.integerValue||e.doubleValue)}function Vw(e){return nk(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var jw=y((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Bw=y((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),zw=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function qw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Kw=y((function e(){d(this,e)}));function Gw(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new rb(e.key,zw.none()):new $w(e.key,e.data,zw.none());var n,r=e.data,i=hk.empty(),a=new Ng(gy.comparator),o=S(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Jw(e.key,i,new Pg(a.toArray()),zw.none())}function Ww(e,t,n){e instanceof $w?function(e,t,n){var r=e.value.clone(),i=Zw(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Jw?function(e,t,n){if(qw(e.precondition,t)){var r=Zw(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Xw(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Hw(e,t,n,r){return e instanceof $w?function(e,t,n,r){if(!qw(e.precondition,t))return n;var i=e.value.clone(),a=eb(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Jw?function(e,t,n,r){if(!qw(e.precondition,t))return n;var i=eb(e.fieldTransforms,r,t),a=t.data;return a.setAll(Xw(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return qw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Qw(e,t){var n,r=null,i=S(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Dw(a.transform,o||null);null!=u&&(null===r&&(r=hk.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Yw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&fy(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pw&&t instanceof Pw||e instanceof Lw&&t instanceof Lw?fy(e.elements,t.elements,Qg):e instanceof Fw&&t instanceof Fw?Qg(e.gt,t.gt):e instanceof Rw&&t instanceof Rw}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var $w=function(e){k(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Kw),Jw=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Kw);function Xw(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Zw(e,t,n){var r=new Map;Ym(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Nw(o,u,n[i]))}return r}function eb(e,t,n){var r,i=new Map,a=S(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Aw(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var tb,nb,rb=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Kw),ib=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Kw),ab=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ww(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=S(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Hw(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=S(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Hw(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=gw();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Gw(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(py.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),xw())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&fy(this.mutations,e.mutations,(function(e,t){return Yw(e,t)}))&&fy(this.baseMutations,e.baseMutations,(function(e,t){return Yw(e,t)}))}}]),e}(),ob=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){Ym(t.mutations.length===r.length);for(var i=ww,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ub=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),sb=y((function e(t,n){d(this,e),this.count=t,this.unchangedNames=n}));function cb(e){switch(e){default:return Qm();case Jm.CANCELLED:case Jm.UNKNOWN:case Jm.DEADLINE_EXCEEDED:case Jm.RESOURCE_EXHAUSTED:case Jm.INTERNAL:case Jm.UNAVAILABLE:case Jm.UNAUTHENTICATED:return!1;case Jm.INVALID_ARGUMENT:case Jm.NOT_FOUND:case Jm.ALREADY_EXISTS:case Jm.PERMISSION_DENIED:case Jm.FAILED_PRECONDITION:case Jm.ABORTED:case Jm.OUT_OF_RANGE:case Jm.UNIMPLEMENTED:case Jm.DATA_LOSS:return!0}}function lb(e){if(void 0===e)return Gm("GRPC error has no .code"),Jm.UNKNOWN;switch(e){case tb.OK:return Jm.OK;case tb.CANCELLED:return Jm.CANCELLED;case tb.UNKNOWN:return Jm.UNKNOWN;case tb.DEADLINE_EXCEEDED:return Jm.DEADLINE_EXCEEDED;case tb.RESOURCE_EXHAUSTED:return Jm.RESOURCE_EXHAUSTED;case tb.INTERNAL:return Jm.INTERNAL;case tb.UNAVAILABLE:return Jm.UNAVAILABLE;case tb.UNAUTHENTICATED:return Jm.UNAUTHENTICATED;case tb.INVALID_ARGUMENT:return Jm.INVALID_ARGUMENT;case tb.NOT_FOUND:return Jm.NOT_FOUND;case tb.ALREADY_EXISTS:return Jm.ALREADY_EXISTS;case tb.PERMISSION_DENIED:return Jm.PERMISSION_DENIED;case tb.FAILED_PRECONDITION:return Jm.FAILED_PRECONDITION;case tb.ABORTED:return Jm.ABORTED;case tb.OUT_OF_RANGE:return Jm.OUT_OF_RANGE;case tb.UNIMPLEMENTED:return Jm.UNIMPLEMENTED;case tb.DATA_LOSS:return Jm.DATA_LOSS;default:return Qm()}}(nb=tb||(tb={}))[nb.OK=0]="OK",nb[nb.CANCELLED=1]="CANCELLED",nb[nb.UNKNOWN=2]="UNKNOWN",nb[nb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nb[nb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nb[nb.NOT_FOUND=5]="NOT_FOUND",nb[nb.ALREADY_EXISTS=6]="ALREADY_EXISTS",nb[nb.PERMISSION_DENIED=7]="PERMISSION_DENIED",nb[nb.UNAUTHENTICATED=16]="UNAUTHENTICATED",nb[nb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nb[nb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nb[nb.ABORTED=10]="ABORTED",nb[nb.OUT_OF_RANGE=11]="OUT_OF_RANGE",nb[nb.UNIMPLEMENTED=12]="UNIMPLEMENTED",nb[nb.INTERNAL=13]="INTERNAL",nb[nb.UNAVAILABLE=14]="UNAVAILABLE",nb[nb.DATA_LOSS=15]="DATA_LOSS";var fb=function(){function e(){d(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return y(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return hb}},{key:"getOrCreateInstance",value:function(){return null===hb&&(hb=new e),hb}}]),e}(),hb=null;function db(){return new TextEncoder}var pb=new Um([4294967295,4294967295],0);function vb(e){var t=db().encode(e),n=new Fm;return n.update(t),new Uint8Array(n.digest())}function mb(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Um([n,r],0),new Um([i,a],0)]}var yb=function(){function e(t,n,r){if(d(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gb("Invalid padding: ".concat(n));if(r<0)throw new gb("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new gb("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new gb("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Um.fromNumber(this.It)}return y(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Um.fromNumber(n)));return 1===r.compare(pb)&&(r=new Um([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=l(mb(vb(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=l(mb(vb(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),gb=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return y(n)}(E(Error)),kb=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,wb.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(py.min(),i,new Sg(ly),dw(),xw())}}]),e}(),wb=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,xw(),xw(),xw())}}]),e}(),bb=y((function e(t,n,r,i){d(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),xb=y((function e(t,n){d(this,e),this.targetId=t,this.Vt=n})),_b=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ib=function(){function e(){d(this,e),this.St=0,this.Dt=Sb(),this.Ct=Lg.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return y(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=xw(),t=xw(),n=xw();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Qm()}})),new wb(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=Sb()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),Eb=function(){function e(t){d(this,e),this.Gt=t,this.Qt=new Map,this.jt=dw(),this.zt=Tb(),this.Wt=new Sg(ly)}return y(e,[{key:"Ht",value:function(e){var t,n=S(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=S(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:Qm()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(qk(a))if(0===r){var o=new ky(a.path);this.Yt(n,o,pk.newNoDocument(o,py.min()))}else Ym(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=fb.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Vg(c).toUint8Array()}catch(e){if(e instanceof Og)return Wm("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new yb(a,f,d)}catch(e){return Wm(e instanceof gb?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&qk(a.target)){var o=new ky(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,pk.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=xw();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new kb(e,n,this.Wt,this.jt,r);return this.jt=dw(),this.zt=Tb(),this.Wt=new Sg(ly),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new Ib,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new Ng(ly),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Km("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new Ib),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Tb(){return new Sg(ky.comparator)}function Sb(){return new Sg(ky.comparator)}var Cb={asc:"ASCENDING",desc:"DESCENDING"},Ab={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nb={and:"AND",or:"OR"},Db=y((function e(t,n){d(this,e),this.databaseId=t,this.useProto3Json=n}));function Rb(e,t){return e.useProto3Json||Wy(t)?t:{value:t}}function Pb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ob(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Lb(e,t){return Pb(e,t.toTimestamp())}function Mb(e){return Ym(!!e),py.fromTimestamp(function(e){var t=Fg(e);return new dy(t.seconds,t.nanos)}(e))}function Fb(e,t){return function(e){return new my(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ub(e){var t=my.fromString(e);return Ym(ux(t)),t}function Vb(e,t){return Fb(e.databaseId,t.path)}function jb(e,t){var n=Ub(t);if(n.get(1)!==e.databaseId.projectId)throw new Xm(Jm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xm(Jm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ky(Kb(n))}function Bb(e,t){return Fb(e.databaseId,t)}function zb(e){var t=Ub(e);return 4===t.length?my.emptyPath():Kb(t)}function qb(e){return new my(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Kb(e){return Ym(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Gb(e,t,n){return{name:Vb(e,t),fields:n.value.mapValue.fields}}function Wb(e,t,n){var r=jb(e,t.name),i=Mb(t.updateTime),a=t.createTime?Mb(t.createTime):py.min(),o=new hk({mapValue:{fields:t.fields}}),u=pk.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Hb(e,t){return"found"in t?function(e,t){Ym(!!t.found),t.found.name,t.found.updateTime;var n=jb(e,t.found.name),r=Mb(t.found.updateTime),i=t.found.createTime?Mb(t.found.createTime):py.min(),a=new hk({mapValue:{fields:t.found.fields}});return pk.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Ym(!!t.missing),Ym(!!t.readTime);var n=jb(e,t.missing),r=Mb(t.readTime);return pk.newNoDocument(n,r)}(e,t):Qm()}function Qb(e,t){var n;if(t instanceof $w)n={update:Gb(e,t.key,t.value)};else if(t instanceof rb)n={delete:Vb(e,t.key)};else if(t instanceof Jw)n={update:Gb(e,t.key,t.data),updateMask:ox(t.fieldMask)};else{if(!(t instanceof ib))return Qm();n={verify:Vb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Rw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Lw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Fw)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Qm()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Lb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Qm()}(e,t.precondition)),n}function Yb(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?zw.updateTime(Mb(e.updateTime)):void 0!==e.exists?zw.exists(e.exists):zw.none()}(t.currentDocument):zw.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ym("REQUEST_TIME"===t.setToServerValue),n=new Rw;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Pw(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Lw(i)}else"increment"in t?n=new Fw(e,t.increment):Qm();var a=gy.fromServerFormat(t.fieldPath);return new jw(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=jb(e,t.update.name),a=new hk({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Pg(t.map((function(e){return gy.fromServerFormat(e)})))}(t.updateMask);return new Jw(i,a,o,n,r)}return new $w(i,a,n,r)}if(t.delete){var u=jb(e,t.delete);return new rb(u,n)}if(t.verify){var s=jb(e,t.verify);return new ib(s,n)}return Qm()}function $b(e,t){return{documents:[Bb(e,t.path)]}}function Jb(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Bb(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Bb(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ax(xk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:rx(e.field),direction:ex(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=Rb(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Xb(e){var t=zb(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ym(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Zb(e);return t instanceof xk&&Ek(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new gk(ix(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Wy(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new vk(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new vk(n,t)}(n.endAt)),Qk(t,i,u,o,s,"F",c,l)}function Zb(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ix(e.unaryFilter.field);return bk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ix(e.unaryFilter.field);return bk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ix(e.unaryFilter.field);return bk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ix(e.unaryFilter.field);return bk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qm()}}(e):void 0!==e.fieldFilter?function(e){return bk.create(ix(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qm()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return xk.create(e.compositeFilter.filters.map((function(e){return Zb(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Qm()}}(e.compositeFilter.op))}(e):Qm()}function ex(e){return Cb[e]}function tx(e){return Ab[e]}function nx(e){return Nb[e]}function rx(e){return{fieldPath:e.canonicalString()}}function ix(e){return gy.fromServerFormat(e.fieldPath)}function ax(e){return e instanceof bk?function(e){if("=="===e.op){if(ik(e.value))return{unaryFilter:{field:rx(e.field),op:"IS_NAN"}};if(rk(e.value))return{unaryFilter:{field:rx(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ik(e.value))return{unaryFilter:{field:rx(e.field),op:"IS_NOT_NAN"}};if(rk(e.value))return{unaryFilter:{field:rx(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rx(e.field),op:tx(e.op),value:e.value}}}(e):e instanceof xk?function(e){var t=e.getFilters().map((function(e){return ax(e)}));return 1===t.length?t[0]:{compositeFilter:{op:nx(e.op),filters:t}}}(e):Qm()}function ox(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ux(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var sx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:py.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:py.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Lg.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),cx=y((function e(t){d(this,e),this.fe=t}));function lx(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:fx(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Vb(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Pb(e,t.version.toTimestamp()),createTime:Pb(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hx(t.version)};else{if(!t.isUnknownDocument())return Qm();r.unknownDocument={path:n.path.toArray(),version:hx(t.version)}}return r}function fx(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function hx(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dx(e){var t=new dy(e.seconds,e.nanoseconds);return py.fromTimestamp(t)}function px(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Yb(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Yb(e.fe,t)})),u=dy.fromMillis(t.localWriteTimeMs);return new ab(t.batchId,u,n,o)}function vx(e){var t,n,r=dx(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?dx(e.lastLimboFreeSnapshotVersion):py.min();return void 0!==e.query.documents?(Ym(1===(n=e.query).documents.length),t=tw(Yk(zb(n.documents[0])))):t=function(e){return tw(Xb(e))}(e.query),new sx(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Lg.fromBase64String(e.resumeToken))}function mx(e,t){var n,r=hx(t.snapshotVersion),i=hx(t.lastLimboFreeSnapshotVersion);n=qk(t.target)?$b(e.fe,t.target):Jb(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Bk(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function yx(e){var t=Xb({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?rw(t,t.limit,"L"):t}function gx(e,t){return new ub(t.largestBatchId,Yb(e.fe,t.overlayMutation))}function kx(e,t){var n=t.path.lastSegment();return[e,Yy(t.path.popLast()),n]}function wx(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:hx(r.readTime),documentKey:Yy(r.documentKey.path),largestBatchId:r.largestBatchId}}var bx=function(){function e(){d(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return xx(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:dx(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return xx(e).put({bundleId:(n=t).id,createTime:hx(Mb(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return _x(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:yx(t.bundledQuery),readTime:dx(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return _x(e).put(function(e){return{name:e.name,readTime:hx(Mb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function xx(e){return _g(e,"bundles")}function _x(e){return _g(e,"namedQueries")}var Ix=function(){function e(t,n){d(this,e),this.serializer=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ex(e).get(kx(this.userId,t)).next((function(e){return e?gx(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=yw();return Py.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new ub(t,a);i.push(r.we(e,o))})),Py.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Yy(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ex(e).J("collectionPathOverlayIndex",i))})),Py.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=yw(),a=Yy(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ex(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=gx(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=yw(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ex(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=gx(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return Ex(e).put(function(e,t,n){var r=l(kx(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Qb(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ex(e){return _g(e,"documentOverlays")}var Tx=function(){function e(){d(this,e)}return y(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ug(e.integerValue));else if("doubleValue"in e){var n=Ug(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Hy(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Vg(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?uk(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Qm()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),ky.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function Sx(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Cx(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Sx(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Tx.Ve=new Tx;var Ax=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=Cx(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=Cx(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Nx=function(){function e(t){d(this,e),this.je=t}return y(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),Dx=function(){function e(t){d(this,e),this.je=t}return y(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),Rx=function(){function e(){d(this,e),this.je=new Ax,this.ze=new Nx(this.je),this.We=new Dx(this.je)}return y(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),Px=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ox(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Lx(e.arrayValue,t.arrayValue))?n:0!==(n=Lx(e.directionalValue,t.directionalValue))?n:ky.comparator(e.documentKey,t.documentKey)}function Lx(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Mx=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=S(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"tn",value:function(e){Ym(e.collectionGroup===this.collectionId);var t=by(e);if(void 0!==t&&!this.en(t))return!1;for(var n=xy(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],u))return!1}return!0}},{key:"en",value:function(e){var t,n=S(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Fx(e){var t,n;if(Ym(e instanceof bk||e instanceof xk),e instanceof bk){if(e instanceof Mk){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return bk.create(e.field,"==",t)})))||[];return xk.create(r,"or")}return e}var i=e.filters.map((function(e){return Fx(e)}));return xk.create(i,e.op)}function Ux(e){if(0===e.getFilters().length)return[];var t=zx(Fx(e));return Ym(Bx(t)),Vx(t)||jx(t)?[t]:t.getFilters()}function Vx(e){return e instanceof bk}function jx(e){return e instanceof xk&&Ek(e)}function Bx(e){return Vx(e)||jx(e)||function(e){if(e instanceof xk&&Ik(e)){var t,n=S(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Vx(r)&&!jx(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function zx(e){if(Ym(e instanceof bk||e instanceof xk),e instanceof bk)return e;if(1===e.filters.length)return zx(e.filters[0]);var t=e.filters.map((function(e){return zx(e)})),n=xk.create(t,e.op);return Bx(n=Gx(n))?n:(Ym(n instanceof xk),Ym(_k(n)),Ym(n.filters.length>1),n.filters.reduce((function(e,t){return qx(e,t)})))}function qx(e,t){var n;return Ym(e instanceof bk||e instanceof xk),Ym(t instanceof bk||t instanceof xk),n=e instanceof bk?t instanceof bk?function(e,t){return xk.create([e,t],"and")}(e,t):Kx(e,t):t instanceof bk?Kx(t,e):function(e,t){if(Ym(e.filters.length>0&&t.filters.length>0),_k(e)&&_k(t))return Ak(e,t.getFilters());var n=Ik(e)?e:t,r=Ik(e)?t:e,i=n.filters.map((function(e){return qx(e,r)}));return xk.create(i,"or")}(e,t),Gx(n)}function Kx(e,t){if(_k(t))return Ak(t,e.getFilters());var n=t.filters.map((function(t){return qx(e,t)}));return xk.create(n,"or")}function Gx(e){if(Ym(e instanceof bk||e instanceof xk),e instanceof bk)return e;var t=e.getFilters();if(1===t.length)return Gx(t[0]);if(Tk(e))return e;var n=t.map((function(e){return Gx(e)})),r=[];return n.forEach((function(t){t instanceof bk?r.push(t):t instanceof xk&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:xk.create(r,e.op)}var Wx=function(){function e(){d(this,e),this.rn=new Hx}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),Py.resolve()}},{key:"getCollectionParents",value:function(e,t){return Py.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Py.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Py.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Py.resolve(null)}},{key:"getIndexType",value:function(e,t){return Py.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Py.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Py.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Py.resolve(Sy.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Py.resolve(Sy.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Py.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Py.resolve()}}]),e}(),Hx=function(){function e(){d(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ng(my.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ng(my.comparator)).toArray()}}]),e}(),Qx=new Uint8Array(0),Yx=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.on=new Hx,this.un=new fw((function(e){return Bk(e)}),(function(e,t){return zk(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Yy(i)};return $x(e).put(a)}return Py.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[hy(t),""],!1,!0);return $x(e).j(r).next((function(e){var r,i=S(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Xy(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Xx(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Zx(e);return a.next((function(e){o.put(wx(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Xx(e),r=Zx(e),i=Jx(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Jx(e),i=!0,a=new Map;return Py.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=xw(),o=[];return Py.forEach(a,(function(i,a){var u;Km("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Bk(t)));var s=function(e,t){var n=by(t);if(void 0===n)return null;var r,i=S(Kk(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=S(xy(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=S(Kk(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=S(xy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Gk(e,o.fieldPath,e.startAt):Wk(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new vk(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=S(xy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Wk(e,o.fieldPath,e.endAt):Gk(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new vk(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Py.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=ky.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Py.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ux(xk.create(e.filters,"and")).map((function(t){return jk(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.dn(t[d/c]):Qx,f=u.wn(e,s,n[d%c],r),p=u._n(e,s,i[d%c],a),v=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,h(u.createRange(f,p,v)))},d=0;d<s;++d)f();return l}},{key:"wn",value:function(e,t,n,r){var i=new Px(e,ky.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new Px(e,ky.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new Mx(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=S(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return Py.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ng(gy.comparator),r=!1,i=S(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=S(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=S(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new Rx,i=S(xy(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);Tx.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new Rx;return Tx.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new Rx;return Tx.Ve._e(ek(this.databaseId,t),n.He(function(e){var t=xy(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Rx);var i,a=0,o=S(xy(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=S(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.yn(t,s.fieldPath)&&nk(c))r=this.pn(r,s,c);else{var h=f.He(s.kind);Tx.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=h(e),a=[],o=S(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=S(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Rx;f.seed(l.Qe()),Tx.Ve._e(s,f.He(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof bk&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Xx(e),i=Zx(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Py.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Iy(t.sequenceNumber,new Sy(dx(t.readTime),new ky(Xy(t.documentKey)),t.largestBatchId)):Iy.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new _y(gy.fromServerFormat(n),r)}));return new wy(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ly(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Xx(e),a=Zx(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Py.forEach(t,(function(t){return a.put(wx(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Py.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Py.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Py.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?Py.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return Jx(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return Jx(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=Jx(e),i=new Ng(Ox);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new Px(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new Ng(Ox),r=this.mn(t,e);if(null==r)return n;var i=by(t);if(null!=i){var a=e.data.field(i.fieldPath);if(nk(a)){var o,u=S(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Px(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Px(t.indexId,e.key,Qx,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;Km("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Rg(a),s=Rg(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Rg(o)):l?(i(u),u=Rg(a)):(u=Rg(a),s=Rg(o))}}(r,i,Ox,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),Py.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return Zx(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Ox(e,t)})).filter((function(e,t,n){return!t||0!==Ox(e,n[t-1])}));var r=[];r.push(e);var i,a=S(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Ox(o,e),s=Ox(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Qx,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Qx,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return Ox(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(e_)}},{key:"getMinOffset",value:function(e,t){var n=this;return Py.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||Qm()}))})).next(e_)}}]),e}();function $x(e){return _g(e,"collectionParents")}function Jx(e){return _g(e,"indexEntries")}function Xx(e){return _g(e,"indexConfiguration")}function Zx(e){return _g(e,"indexState")}function e_(e){Ym(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Cy(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Sy(t.readTime,t.documentKey,n)}var t_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},n_=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function r_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Ym(1===u)})));var c,l=[],f=S(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=tg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Py.waitFor(a).next((function(){return l}))}function i_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Qm();t=e.noDocument}return JSON.stringify(t).length}n_.DEFAULT_COLLECTION_PERCENTILE=10,n_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,n_.DEFAULT=new n_(41943040,n_.DEFAULT_COLLECTION_PERCENTILE,n_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),n_.DISABLED=new n_(-1,0,0);var a_=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return u_(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=s_(e),o=u_(e);return o.add({}).next((function(u){Ym("number"==typeof u);var s,c=new ab(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Qb(e.fe,t)})),i=n.mutations.map((function(t){return Qb(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Ng((function(e,t){return ly(e.canonicalString(),t.canonicalString())})),d=S(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=tg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,ng))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),Py.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return u_(e).get(t).next((function(e){return e?(Ym(e.userId===n.userId),px(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?Py.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return u_(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ym(t.batchId>=r),a=px(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return u_(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return u_(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return px(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=eg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return s_(e).X({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],f=u[2],h=Xy(c);if(s===n.userId&&t.path.isEqual(h))return u_(e).get(f).next((function(e){if(!e)throw Qm();Ym(e.userId===n.userId),a.push(px(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ng(ly),i=[];return t.forEach((function(t){var a=eg(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=s_(e).X({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],f=Xy(s);u===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(u)})),Py.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=eg(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Ng(ly);return s_(e).X({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],f=o[2],h=Xy(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(u_(e).get(t).next((function(e){if(null===e)throw Qm();Ym(e.userId===n.userId),r.push(px(n.serializer,e))})))})),Py.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return r_(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),Py.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Py.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return s_(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Xy(e[1]);i.push(a)}else r.done()})).next((function(){Ym(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return o_(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return c_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return Ym(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function o_(e,t,n){var r=eg(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return s_(e).X({range:a,Y:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function u_(e){return _g(e,"mutations")}function s_(e){return _g(e,"documentMutations")}function c_(e){return _g(e,"mutationQueues")}var l_=function(){function e(t){d(this,e),this.Nn=t}return y(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),f_=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.serializer=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new l_(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return py.fromTimestamp(new dy(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return h_(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return Ym(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return h_(e).X((function(o,u){var s=vx(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Py.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return h_(e).X((function(e,n){var r=vx(n);t(r)}))}},{key:"$n",value:function(e){return d_(e).get("targetGlobalKey").next((function(e){return Ym(null!==e),e}))}},{key:"On",value:function(e,t){return d_(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return h_(e).put(mx(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Bk(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return h_(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=vx(n);zk(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=p_(e);return t.forEach((function(t){var o=Yy(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Py.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=p_(e);return Py.forEach(t,(function(t){var a=Yy(t.path);return Py.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=p_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=p_(e),i=xw();return r.X({range:n,Y:!0},(function(e,t,n){var r=Xy(e[1]),a=new ky(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Yy(t.path),r=IDBKeyRange.bound([n],[hy(n)],!1,!0),i=0;return p_(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return h_(e).get(t).next((function(e){return e?vx(e):null}))}}]),e}();function h_(e){return _g(e,"targets")}function d_(e){return _g(e,"targetGlobal")}function p_(e){return _g(e,"targetDocuments")}function v_(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=ly(r,o);return 0===s?ly(i,u):s}var m_=function(){function e(t){d(this,e),this.Ln=t,this.buffer=new Ng(v_),this.qn=0}return y(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();v_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),y_=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;Km("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Uy(e.t0)){e.next=12;break}Km("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Dy(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),g_=function(){function e(t,n){d(this,e),this.jn=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Py.resolve(Gy.ct);var r=new m_(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Km("LruGarbageCollector","Garbage collection skipped; disabled"),Py.resolve(t_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Km("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),t_):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Km("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),qm()<=Kt.DEBUG&&Km("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Py.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function k_(e,t){return new g_(e,t)}var w_=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=k_(this,n)}return y(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return b_(e,n)}},{key:"removeReference",value:function(e,t,n){return b_(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return b_(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return c_(e).Z((function(r){return o_(e,r,t).next((function(e){return e&&(n=!0),Py.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,py.min()),p_(e).delete([0,Yy(o.path)])}))}));i.push(s)}})).next((function(){return Py.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return b_(e,t)}},{key:"Yn",value:function(e,t){var n,r=p_(e),i=Gy.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Gy.ct&&t(new ky(Xy(n)),i),i=s,n=u):i=Gy.ct})).next((function(){i!==Gy.ct&&t(new ky(Xy(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function b_(e,t){return p_(e).put(function(e,t){return{targetId:0,path:Yy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var x_=function(){function e(){d(this,e),this.changes=new fw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,pk.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Py.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),__=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return S_(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return S_(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],fx(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=pk.newInvalidDocument(t);return S_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(C_(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:pk.newInvalidDocument(t)};return S_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(C_(t))},(function(e,i){r={document:n.ts(t,i),size:i_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=dw();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=dw(),i=new Sg(ky.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,i_(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return Py.resolve();var r=new Ng(N_);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(C_(r.first()),C_(r.last())),a=r.getIterator(),o=a.getNext();return S_(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ky.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&N_(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(C_(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),fx(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return S_(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=dw(),o=S(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(ky.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(uw(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=dw(),o=A_(t,n),u=A_(t,Sy.max());return S_(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(ky.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new E_(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return T_(e).get("remoteDocumentGlobalKey").next((function(e){return Ym(!!e),e}))}},{key:"Zn",value:function(e,t){return T_(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Wb(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ky.fromSegments(t.noDocument.path),i=dx(t.noDocument.readTime);n=pk.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Qm();var a=ky.fromSegments(t.unknownDocument.path),o=dx(t.unknownDocument.version);n=pk.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new dy(e[0],e[1]);return py.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(py.min()))return n}return pk.newInvalidDocument(e)}}]),e}();function I_(e){return new __(e)}var E_=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new fw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ng((function(e,t){return ly(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=lx(t.os.serializer,o);i=i.add(a.path.popLast());var c=i_(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=lx(t.os.serializer,o.convertToNoDocument(py.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),Py.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(x_);function T_(e){return _g(e,"remoteDocumentGlobal")}function S_(e){return _g(e,"remoteDocumentsV14")}function C_(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function A_(e,t){var n=t.documentKey.path.toArray();return[e,fx(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function N_(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ly(n[a],r[a]))return i;return(i=ly(n.length,r.length))||((i=ly(n[n.length-2],r[r.length-2]))||ly(n[n.length-1],r[r.length-1]))}var D_=y((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),R_=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Hw(r.mutation,e,Pg.empty(),dy.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,xw()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xw(),i=yw();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=vw();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=yw();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,xw())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=dw(),a=kw(),o=kw();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Jw)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Hw(o.mutation,t,o.mutation.getFieldMask(),dy.now())):a.set(t.key,Pg.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new D_(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=kw(),i=new Sg((function(e,t){return e-t})),a=xw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=S(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Pg.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||xw()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=gw();c.forEach((function(e){if(!a.has(e)){var n=Gw(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Py.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ky.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Py.resolve(yw()),u=-1,s=a;return o.next((function(t){return Py.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Py.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,xw())})).next((function(e){return{batchId:u,changes:mw(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ky(t)).next((function(e){var t=vw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=vw();return this.indexManager.getCollectionParents(e,i).next((function(o){return Py.forEach(o,(function(o){var u=function(e,t){return new Hk(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,pk.newInvalidDocument(r)))}));var n=vw();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Hw(a.mutation,i,Pg.empty(),dy.now()),uw(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),P_=function(){function e(t){d(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return Py.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Mb(n.createTime)}),Py.resolve()}},{key:"getNamedQuery",value:function(e,t){return Py.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:yx(e.bundledQuery),readTime:Mb(e.readTime)}}(t)),Py.resolve()}}]),e}(),O_=function(){function e(){d(this,e),this.overlays=new Sg(ky.comparator),this.ls=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return Py.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=yw();return Py.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),Py.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),Py.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=yw(),i=t.length+1,a=new ky(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Py.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Sg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=yw(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=yw(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Py.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ub(t,n));var a=this.ls.get(t);void 0===a&&(a=xw(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),L_=function(){function e(){d(this,e),this.fs=new Ng(M_.ds),this.ws=new Ng(M_._s)}return y(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new M_(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new M_(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new ky(new my([])),r=new M_(n,e),i=new M_(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new ky(new my([])),n=new M_(t,e),r=new M_(t,e+1),i=xw();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new M_(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),M_=function(){function e(t,n){d(this,e),this.key=t,this.As=n}return y(e,null,[{key:"ds",value:function(e,t){return ky.comparator(e.key,t.key)||ly(e.As,t.As)}},{key:"_s",value:function(e,t){return ly(e.As,t.As)||ky.comparator(e.key,t.key)}}]),e}(),F_=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Ng(M_.ds)}return y(e,[{key:"checkEmpty",value:function(e){return Py.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ab(i,t,n,r);this.mutationQueue.push(a);var o,u=S(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new M_(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Py.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Py.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return Py.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Py.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return Py.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new M_(t,0),i=new M_(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),Py.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ng(ly);return t.forEach((function(e){var t=new M_(e,0),i=new M_(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),Py.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ky.isDocumentKey(i)||(i=i.child(""));var a=new M_(new ky(i),0),o=new Ng(ly);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),Py.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ym(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return Py.forEach(t.mutations,(function(i){var a=new M_(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new M_(t,0),r=this.Rs.firstAfterOrEqual(n);return Py.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Py.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),U_=function(){function e(t){d(this,e),this.Ds=t,this.docs=new Sg(ky.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Py.resolve(n?n.document.mutableCopy():pk.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=dw();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():pk.newInvalidDocument(e))})),Py.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=dw(),a=t.path,o=new ky(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Cy(Ty(l),n)<=0||(r.has(l.key)||uw(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Py.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Qm()}},{key:"Cs",value:function(e,t){return Py.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new V_(this)}},{key:"getSize",value:function(e){return Py.resolve(this.size)}}]),e}(),V_=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).os=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),Py.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(x_),j_=function(){function e(t){d(this,e),this.persistence=t,this.xs=new fw((function(e){return Bk(e)}),zk),this.lastRemoteSnapshotVersion=py.min(),this.highestTargetId=0,this.Ns=0,this.ks=new L_,this.targetCount=0,this.Ms=l_.kn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),Py.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Py.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Py.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),Py.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Py.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new l_(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,Py.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),Py.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Py.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Py.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Py.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return Py.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),Py.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Py.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),Py.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return Py.resolve(n)}},{key:"containsKey",value:function(e,t){return Py.resolve(this.ks.containsKey(t))}}]),e}(),B_=function(){function e(t,n){var r=this;d(this,e),this.$s={},this.overlays={},this.Os=new Gy(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new j_(this),this.indexManager=new Wx,this.remoteDocumentCache=new U_((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new cx(n),this.qs=new P_(this.serializer)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new O_,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new F_(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Km("MemoryPersistence","Starting transaction:",e);var i=new z_(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return Py.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),z_=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(Ny),q_=function(){function e(t){d(this,e),this.persistence=t,this.Qs=new L_,this.js=null}return y(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw Qm()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Py.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Py.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),Py.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Py.forEach(this.Ws,(function(r){var i=ky.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,py.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return Py.or([function(){return Py.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),K_=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Oy("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zy,{unique:!0}),e.createObjectStore("documentMutations")}(e),G_(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Py.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),G_(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:py.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Py.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:pg});t.createIndex("collectionPathOverlayIndex",vg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",mg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:rg});t.createIndex("documentKeyIndex",ig),t.createIndex("collectionGroupIndex",ag)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:lg}).createIndex("sequenceNumberIndex",fg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:hg}).createIndex("documentKeyIndex",dg,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=i_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Py.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Py.forEach(r,(function(r){Ym(r.userId===n.userId);var i=px(t.serializer,r);return r_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new my(n),o=function(e){return[0,Yy(e)]}(a);r.push(t.get(o).next((function(n){return n?Py.resolve():function(n){return t.put({targetId:0,path:Yy(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Py.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:cg});var n=t.store("collectionParents"),r=new Hx,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Yy(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new my(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],Xy(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=vx(r),a=mx(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ky(my.fromString(i.document.name).popFirst(5)):i.noDocument?ky.fromSegments(i.noDocument.path):i.unknownDocument?ky.fromSegments(i.unknownDocument.path):Qm()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Py.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=I_(this.serializer),a=new B_(q_.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:xw();px(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Py.forEach(r,(function(e,r){var o=new jm(r),u=Ix.de(n.serializer,o),s=a.getIndexManager(o),c=a_.de(o,n.serializer,s,a.referenceDelegate);return new R_(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new xg(t,Gy.ct),e).next()}))}))}}]),e}();function G_(e){e.createObjectStore("targetDocuments",{keyPath:ug}).createIndex("documentTargetsIndex",sg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",og,{unique:!0}),e.createObjectStore("targetGlobal")}var W_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",H_=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new Xm(Jm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new w_(this,i),this.di=n+"main",this.serializer=new cx(s),this.wi=new Ly(this.di,this.ui,new K_(this.serializer)),this.Bs=new f_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=I_(this.serializer),this.qs=new bx,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Gm("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Xm(Jm.FAILED_PRECONDITION,W_);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Gy(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=Xe($e().mark((function n(r){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=Xe($e().mark((function t(n){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Y_(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Uy(t))return Km("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Km("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return Q_(e).get("owner").next((function(e){return Py.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return Y_(e).delete(this.clientId)}},{key:"bi",value:function(){var e=Xe($e().mark((function e(){var t,n,r,i,a=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=_g(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Py.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=S(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?Py.resolve(!0):Q_(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new Xm(Jm.FAILED_PRECONDITION,W_);return!1}}return!(!t.networkEnabled||!t.inForeground)||Y_(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Km("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Xe($e().mark((function e(){var t=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new xg(e,Gy.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Y_(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return a_.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Yx(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Ix.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Km("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?bg:14===i?wg:13===i?kg:12===i?gg:11===i?yg:void Qm();return this.wi.runTransaction(e,o,u,(function(i){return a=new xg(i,r.Os?r.Os.next():Gy.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw Gm("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new Xm(Jm.FAILED_PRECONDITION,Ay);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return Q_(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Xm(Jm.FAILED_PRECONDITION,W_)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Q_(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=Q_(e);return n.get("owner").next((function(e){return t.Ri(e)?(Km("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Py.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Gm("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!vt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Km("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Gm("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Gm("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Ly.D()}}]),e}();function Q_(e){return _g(e,"owner")}function Y_(e){return _g(e,"clientMetadata")}function $_(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var J_=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return y(e,null,[{key:"Li",value:function(t,n){var r,i=xw(),a=xw(),o=S(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),X_=function(){function e(){d(this,e),this.qi=!1}return y(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if($k(t))return Py.resolve(null);var r=tw(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=rw(t,null,"F"),r=tw(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=xw.apply(void 0,h(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,rw(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return $k(t)||r.isEqual(py.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(qm()<=Kt.DEBUG&&Km("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ow(t)),i.Wi(e,o,t,Ey(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new Ng(cw(e));return t.forEach((function(t,r){uw(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return qm()<=Kt.DEBUG&&Km("QueryEngine","Using full collection scan to execute query:",ow(t)),this.Ui.getDocumentsMatchingQuery(e,t,Sy.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Z_=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Sg(ly),this.Yi=new fw((function(e){return Bk(e)}),zk),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return y(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R_(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function eI(e,t,n,r){return new Z_(e,t,n,r)}function tI(e,t){return nI.apply(this,arguments)}function nI(){return nI=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$m(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=xw(),s=S(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=S(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=S(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=S(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}function rI(e,t){var n=$m(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Py.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ym(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=xw(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function iI(e){var t=$m(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function aI(e,t){var n=$m(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Lg.EMPTY_BYTE_STRING,py.min()).withLastLimboFreeSnapshotVersion(py.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=dw(),s=xw();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(oI(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(py.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Py.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function oI(e,t,n){var r=xw(),i=xw();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=dw();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(py.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Km("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function uI(e,t){var n=$m(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function sI(e,t){var n=$m(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,Py.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new sx(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function cI(e,t,n){return lI.apply(this,arguments)}function lI(){return lI=Xe($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$m(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Uy(e.t1)){e.next=12;break}throw e.t1;case 12:Km("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),lI.apply(this,arguments)}function fI(e,t,n){var r=$m(e),i=py.min(),a=xw();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=$m(e),i=r.Yi.get(n);return void 0!==i?Py.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,tw(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:py.min(),n?a:xw())})).next((function(e){return pI(r,sw(t),e),{documents:e,ir:a}}))}))}function hI(e,t){var n=$m(e),r=$m(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function dI(e,t){var n=$m(e),r=n.Xi.get(t)||py.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,Ey(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return pI(n,t,e),e}))}function pI(e,t,n){var r=e.Xi.get(t)||py.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function vI(e,t,n,r){return mI.apply(this,arguments)}function mI(){return mI=Xe($e().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=$m(t),o=xw(),u=dw(),s=S(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,sI(a,function(e){return tw(Yk(my.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return oI(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),mI.apply(this,arguments)}function yI(e,t){return gI.apply(this,arguments)}function gI(){return gI=Xe($e().mark((function e(t,n){var r,i,a,o=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:xw(),e.next=3,sI(t,tw(yx(n.bundledQuery)));case 3:return i=e.sent,a=$m(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Mb(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Lg.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}function kI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function wI(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function bI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var xI=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Xm(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Gm("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),_I=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Xm(i.error.code,i.error.message))),a?new e(t,i.state,r):(Gm("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),II=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Iw(),o=0;i&&o<r.activeTargetIds.length;++o)i=Qy(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Gm("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),EI=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Gm("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),TI=function(){function e(){d(this,e),this.activeTargetIds=Iw()}return y(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),SI=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Sg(ly),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=kI(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new TI),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return y(e,[{key:"start",value:function(){var e=Xe($e().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=S(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(kI(this.persistenceKey,i)))&&(o=II.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=S(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(bI(this.persistenceKey,e));if(n){var r=_I.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(bI(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Km("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Km("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Km("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Km("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Gm("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(Xe($e().mark((function e(){var r,i,a,o,u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=Gy.ct;if(null!=e)try{var n=JSON.parse(e);Ym("number"==typeof n),t=n}catch(e){Gm("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Gy.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new xI(this.currentUser,e,t,n),i=wI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=wI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=bI(this.persistenceKey,e),i=new _I(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return II.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return xI.ar(new jm(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return _I.ar(r,t)}},{key:"br",value:function(e){return EI.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:Km("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Iw();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),CI=function(){function e(){d(this,e),this.Hr=new TI,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new TI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),AI=function(){function e(){d(this,e)}return y(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),NI=function(){function e(){var t=this;d(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return y(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Km("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=S(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Km("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=S(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),DI=null;function RI(){return null===DI?DI=268435456+Math.round(2147483648*Math.random()):DI++,"0x"+DI.toString(16)}var PI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},OI=function(){function e(t){d(this,e),this.ro=t.ro,this.oo=t.oo}return y(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),LI="WebChannelConnection",MI=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return y(n,[{key:"Ao",value:function(e,t,n,r){var i=RI();return new Promise((function(a,o){var u=new Mm;u.setWithCredentials(!0),u.listenOnce(Dm.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Nm.NO_ERROR:var t=u.getResponseJson();Km(LI,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Nm.TIMEOUT:Km(LI,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Xm(Jm.DEADLINE_EXCEEDED,"Request time out"));break;case Nm.HTTP_ERROR:var n=u.getStatus();if(Km(LI,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Jm).indexOf(t)>=0?t:Jm.UNKNOWN}(s.status);o(new Xm(c,s.message))}else o(new Xm(Jm.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Xm(Jm.UNAVAILABLE,"Connection failed."));break;default:Qm()}}finally{Km(LI,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Km(LI,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=RI(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Cm(),o=Am(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new Om({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");Km(LI,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new OI({ro:function(t){h?Km(LI,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Km(LI,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Km(LI,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Lm.EventType.OPEN,(function(){h||Km(LI,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Lm.EventType.CLOSE,(function(){h||(h=!0,Km(LI,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Lm.EventType.ERROR,(function(t){h||(h=!0,Wm(LI,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new Xm(Jm.UNAVAILABLE,"The operation could not be completed")))})),p(l,Lm.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Ym(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Km(LI,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=tb[e];if(void 0!==t)return lb(t)}(u),c=o.message;void 0===s&&(s=Jm.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new Xm(s,c)),l.close()}else Km(LI,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,Rm.STAT_EVENT,(function(t){t.stat===Pm.PROXY?Km(LI,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Pm.NOPROXY&&Km(LI,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=RI(),o=this.To(e,t);Km("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return Km("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Wm("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=PI[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function FI(){return"undefined"!=typeof window?window:null}function UI(){return"undefined"!=typeof document?document:null}function VI(e){return new Db(e,!0)}var jI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Km("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),BI=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new jI(t,n)}return y(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===Jm.RESOURCE_EXHAUSTED?(Gm(n.toString()),Gm("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===Jm.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new Xm(Jm.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(Xe($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Km("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Km("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),zI=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return y(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Qm()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Ym(void 0===t||"string"==typeof t),Lg.fromBase64String(t||"")):(Ym(void 0===t||t instanceof Uint8Array),Lg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Jm.UNKNOWN:lb(e.code);return new Xm(t,e.message||"")}(o);n=new _b(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=jb(e,s.document.name),l=Mb(s.document.updateTime),f=s.document.createTime?Mb(s.document.createTime):py.min(),h=new hk({mapValue:{fields:s.document.fields}}),d=pk.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new bb(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=jb(e,m.document),g=m.readTime?Mb(m.readTime):py.min(),k=pk.newNoDocument(y,g),w=m.removedTargetIds||[];n=new bb([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var x=jb(e,b.document),_=b.removedTargetIds||[];n=new bb([],_,x,null)}else{if(!("filter"in t))return Qm();t.filter;var I=t.filter;I.targetId;var E=I.count,T=void 0===E?0:E,S=I.unchangedNames,C=new sb(T,S),A=I.targetId;n=new xb(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return py.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?py.min():t.readTime?Mb(t.readTime):py.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=qb(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=qk(r)?{documents:$b(e,r)}:{query:Jb(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ob(e,t.resumeToken);var i=Rb(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(py.min())>0){n.readTime=Pb(e,t.snapshotVersion.toTimestamp());var a=Rb(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qm()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=qb(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(BI),qI=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return y(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Ka(w(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Ym(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(Ym(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Mb(e.updateTime):Mb(t);return n.isEqual(py.min())&&(n=Mb(t)),new Bw(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Mb(e.commitTime);return this.listener.cu(n,t)}return Ym(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=qb(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Qb(t.serializer,e)}))};this.Wo(n)}}]),n}(BI),KI=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return y(n,[{key:"fu",value:function(){if(this.lu)throw new Xm(Jm.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Jm.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Xm(Jm.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Jm.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Xm(Jm.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return y((function e(){d(this,e)}))}());var GI=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return y(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Gm(t),this.mu=!1):Km("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),WI=y((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=rE(o),!e.t0){e.next=5;break}return Km("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=$m(t)).vu.add(4),e.next=4,YI(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,HI(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new GI(r,i)}));function HI(e){return QI.apply(this,arguments)}function QI(){return(QI=Xe($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rE(t)){e.next=18;break}n=S(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function YI(e){return $I.apply(this,arguments)}function $I(){return($I=Xe($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function JI(e,t){var n=$m(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),nE(n)?tE(n):RE(n).Ko()&&ZI(n,t))}function XI(e,t){var n=$m(e),r=RE(n);n.Au.delete(t),r.Ko()&&eE(n,t),0===n.Au.size&&(r.Ko()?r.jo():rE(n)&&n.bu.set("Unknown"))}function ZI(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(py.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}RE(e).su(t)}function eE(e,t){e.Vu.qt(t),RE(e).iu(t)}function tE(e){e.Vu=new Eb({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),RE(e).start(),e.bu.gu()}function nE(e){return rE(e)&&!RE(e).Uo()&&e.Au.size>0}function rE(e){return 0===$m(e).vu.size}function iE(e){e.Vu=void 0}function aE(e){return oE.apply(this,arguments)}function oE(){return(oE=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){ZI(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uE(e,t){return sE.apply(this,arguments)}function sE(){return(sE=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:iE(t),nE(t)?(t.bu.Iu(n),tE(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cE(e,t,n){return lE.apply(this,arguments)}function lE(){return lE=Xe($e().mark((function e(t,n,r){var i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof _b&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Xe($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=S(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Km("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,fE(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof bb?t.Vu.Ht(n):n instanceof xb?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(py.min())){e.next=29;break}return e.prev=14,e.next=17,iI(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Lg.EMPTY_BYTE_STRING,r.snapshotVersion)),eE(e,t);var i=new sx(r.target,t,n,r.sequenceNumber);ZI(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Km("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,fE(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),lE.apply(this,arguments)}function fE(e,t,n){return hE.apply(this,arguments)}function hE(){return(hE=Xe($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Uy(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,YI(t);case 5:t.bu.set("Offline"),r||(r=function(){return iI(t.localStore)}),t.asyncQueue.enqueueRetryable(Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Km("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,HI(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dE(e,t){return t().catch((function(n){return fE(e,n,t)}))}function pE(e){return vE.apply(this,arguments)}function vE(){return(vE=Xe($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=$m(t),r=PE(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!mE(n)){e.next=19;break}return e.prev=3,e.next=6,uI(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,yE(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,fE(n,e.t0);case 17:e.next=2;break;case 19:gE(n)&&kE(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function mE(e){return rE(e)&&e.Eu.length<10}function yE(e,t){e.Eu.push(t);var n=PE(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function gE(e){return rE(e)&&!PE(e).Uo()&&e.Eu.length>0}function kE(e){PE(e).start()}function wE(e){return bE.apply(this,arguments)}function bE(){return(bE=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:PE(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xE(e){return _E.apply(this,arguments)}function _E(){return(_E=Xe($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=PE(t),r=S(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IE(e,t,n){return EE.apply(this,arguments)}function EE(){return EE=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=ob.from(i,n,r),e.next=3,dE(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,pE(t);case 5:case"end":return e.stop()}}),e)}))),EE.apply(this,arguments)}function TE(e,t){return SE.apply(this,arguments)}function SE(){return SE=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&PE(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!cb(i=n.code)||i===Jm.ABORTED){e.next=7;break}return r=t.Eu.shift(),PE(t).Qo(),e.next=5,dE(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,pE(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:gE(t)&&kE(t);case 5:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}function CE(e,t){return AE.apply(this,arguments)}function AE(){return(AE=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=$m(t)).asyncQueue.verifyOperationInProgress(),Km("RemoteStore","RemoteStore received new credentials"),i=rE(r),r.vu.add(3),e.next=6,YI(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,HI(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NE(e,t){return DE.apply(this,arguments)}function DE(){return(DE=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$m(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,HI(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,YI(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RE(e){return e.Su||(e.Su=function(e,t,n){var r=$m(e);return r.fu(),new zI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:aE.bind(null,e),ao:uE.bind(null,e),nu:cE.bind(null,e)}),e.Ru.push(function(){var t=Xe($e().mark((function t(n){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),nE(e)?tE(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:iE(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function PE(e){return e.Du||(e.Du=function(e,t,n){var r=$m(e);return r.fu(),new qI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:wE.bind(null,e),ao:TE.bind(null,e),au:xE.bind(null,e),cu:IE.bind(null,e)}),e.Ru.push(function(){var t=Xe($e().mark((function t(n){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,pE(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Km("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var OE=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Zm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xm(Jm.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function LE(e,t){if(Gm("AsyncQueue","".concat(t,": ").concat(e)),Uy(e))return new Xm(Jm.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ME=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||ky.comparator(e.key,n.key)}:function(e,t){return ky.comparator(e.key,t.key)},this.keyedMap=vw(),this.sortedSet=new Sg(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),FE=function(){function e(){d(this,e),this.Cu=new Sg(ky.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Qm():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),UE=function(){function e(t,n,r,i,a,o,u,s,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,ME.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),VE=y((function e(){d(this,e),this.Nu=void 0,this.listeners=[]})),jE=y((function e(){d(this,e),this.queries=new fw((function(e){return aw(e)}),iw),this.onlineState="Unknown",this.ku=new Set}));function BE(e,t){return zE.apply(this,arguments)}function zE(){return zE=Xe($e().mark((function e(t,n){var r,i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$m(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new VE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=LE(e.t0,"Initialization of query '".concat(ow(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&HE(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),zE.apply(this,arguments)}function qE(e,t){return KE.apply(this,arguments)}function KE(){return KE=Xe($e().mark((function e(t,n){var r,i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$m(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),KE.apply(this,arguments)}function GE(e,t){var n,r=$m(e),i=!1,a=S(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=S(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&HE(r)}function WE(e,t,n){var r=$m(e),i=r.queries.get(t);if(i){var a,o=S(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function HE(e){e.ku.forEach((function(e){e.next()}))}var QE=function(){function e(t,n,r){d(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=S(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new UE(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=UE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),YE=function(){function e(t,n){d(this,e),this.Gu=t,this.byteLength=n}return y(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),$E=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"rr",value:function(e){return jb(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?Wb(this.serializer,e.document,!1):pk.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return Mb(e)}}]),e}(),JE=function(){function e(t,n,r){d(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XE(t)}return y(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=my.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new $E(this.serializer),i=S(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=S(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||xw()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Xe($e().mark((function e(){var t,n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vI(this.localStore,new $E(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=S(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,yI(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function XE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var ZE=y((function e(t){d(this,e),this.key=t})),eT=y((function e(t){d(this,e),this.key=t})),tT=function(){function e(t,n){d(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=xw(),this.mutatedKeys=xw(),this.tc=cw(t),this.ec=new ME(this.tc)}return y(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new FE,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=uw(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qm()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new UE(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new FE,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=xw(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new eT(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new ZE(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=xw();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return UE.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),nT=y((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),rT=y((function e(t){d(this,e),this.key=t,this.fc=!1})),iT=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new fw((function(e){return aw(e)}),iw),this._c=new Map,this.mc=new Set,this.gc=new Sg(ky.comparator),this.yc=new Map,this.Ic=new L_,this.Tc={},this.Ec=new Map,this.Ac=l_.Mn(),this.onlineState="Unknown",this.vc=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function aT(e,t){return oT.apply(this,arguments)}function oT(){return oT=Xe($e().mark((function e(t,n){var r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=XT(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,sI(r.localStore,tw(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,uT(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&JI(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),oT.apply(this,arguments)}function uT(e,t,n,r,i){return sT.apply(this,arguments)}function sT(){return sT=Xe($e().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=Xe($e().mark((function e(t,n,r,i){var a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,fI(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(CT(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,fI(t.localStore,n,!0);case 3:return o=e.sent,u=new tT(n,o.ir),s=u.sc(o.documents),c=wb.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),CT(t,r,l.cc),f=new nT(n,r,u),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),sT.apply(this,arguments)}function cT(e,t){return lT.apply(this,arguments)}function lT(){return lT=Xe($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$m(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!iw(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,cI(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),XI(r.remoteStore,i.targetId),TT(r,i.targetId)})).catch(Dy);case 9:e.next=14;break;case 11:return TT(r,i.targetId),e.next=14,cI(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),lT.apply(this,arguments)}function fT(e,t,n){return hT.apply(this,arguments)}function hT(){return hT=Xe($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ZT(t),e.prev=1,e.next=4,function(e,t){var n,r,i=$m(e),a=dy.now(),o=t.reduce((function(e,t){return e.add(t.key)}),xw());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=dw(),s=xw();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=S(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Qw(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Jw(c.key,l,dk(l.value.mapValue),zw.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:mw(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Sg(ly)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,DT(i,a.changes);case 9:return e.next=11,pE(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=LE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),hT.apply(this,arguments)}function dT(e,t){return pT.apply(this,arguments)}function pT(){return(pT=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$m(t),e.prev=1,e.next=4,aI(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(Ym(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Ym(n.fc):e.removedDocuments.size>0&&(Ym(n.fc),n.fc=!1))})),e.next=8,DT(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Dy(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function vT(e,t,n){var r=$m(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=$m(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=S(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&HE(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function mT(e,t,n){return yT.apply(this,arguments)}function yT(){return yT=Xe($e().mark((function e(t,n,r){var i,a,o,u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=$m(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Sg(ky.comparator)).insert(o,pk.newNoDocument(o,py.min())),s=xw().add(o),c=new kb(py.min(),new Map,new Sg(ly),u,s),e.next=9,dT(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),NT(i),e.next=16;break;case 14:return e.next=16,cI(i.localStore,n,!1).then((function(){return TT(i,n,r)})).catch(Dy);case 16:case"end":return e.stop()}}),e)}))),yT.apply(this,arguments)}function gT(e,t){return kT.apply(this,arguments)}function kT(){return(kT=Xe($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$m(t),i=n.batch.batchId,e.prev=1,e.next=4,rI(r.localStore,n);case 4:return a=e.sent,ET(r,i,null),IT(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,DT(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Dy(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function wT(e,t,n){return bT.apply(this,arguments)}function bT(){return(bT=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$m(t),e.prev=1,e.next=4,function(e,t){var n=$m(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ym(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,ET(i,n,r),IT(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,DT(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Dy(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function xT(e,t){return _T.apply(this,arguments)}function _T(){return(_T=Xe($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rE((r=$m(t)).remoteStore)||Km("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=$m(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=LE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function IT(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function ET(e,t,n){var r=$m(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function TT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=S(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||ST(e,t)}))}function ST(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(XI(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),NT(e))}function CT(e,t,n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof ZE?(e.Ic.addReference(a.key,t),AT(e,a)):a instanceof eT?(Km("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||ST(e,a.key)):Qm()}}catch(o){i.e(o)}finally{i.f()}}function AT(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Km("SyncEngine","New document in limbo: "+n),e.mc.add(r),NT(e))}function NT(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new ky(my.fromString(t)),r=e.Ac.next();e.yc.set(r,new rT(n)),e.gc=e.gc.insert(n,r),JI(e.remoteStore,new sx(tw(Yk(n.path)),r,"TargetPurposeLimboResolution",Gy.ct))}}function DT(e,t,n){return RT.apply(this,arguments)}function RT(){return RT=Xe($e().mark((function e(t,n,r){var i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$m(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=J_.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=Xe($e().mark((function e(t,n){var r,i,a,o,u,s,c,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$m(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Py.forEach(n,(function(t){return Py.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Py.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Uy(e.t0)){e.next=10;break}throw e.t0;case 10:Km("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=S(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),RT.apply(this,arguments)}function PT(e,t){return OT.apply(this,arguments)}function OT(){return(OT=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=$m(t)).currentUser.isEqual(n)){e.next=11;break}return Km("SyncEngine","User change. New user:",n.toKey()),e.next=5,tI(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new Xm(Jm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,DT(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LT(e,t){var n=$m(e),r=n.yc.get(t);if(r&&r.fc)return xw().add(r.key);var i=xw(),a=n._c.get(t);if(!a)return i;var o,u=S(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function MT(e,t){return FT.apply(this,arguments)}function FT(){return FT=Xe($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$m(t),e.next=3,fI(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&CT(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)}))),FT.apply(this,arguments)}function UT(e,t){return VT.apply(this,arguments)}function VT(){return(VT=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$m(t),e.abrupt("return",dI(r.localStore,n).then((function(e){return DT(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jT(e,t,n,r){return BT.apply(this,arguments)}function BT(){return BT=Xe($e().mark((function e(t,n,r,i){var a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$m(t),e.next=3,function(e,t){var n=$m(e),r=$m(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Py.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,pE(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(ET(a,n,i||null),IT(a,n),function(e,t){$m($m(e).mutationQueue).Cn(t)}(a.localStore,n)):Qm();case 11:return e.next=13,DT(a,o);case 13:e.next=16;break;case 15:Km("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),BT.apply(this,arguments)}function zT(e,t){return qT.apply(this,arguments)}function qT(){return qT=Xe($e().mark((function e(t,n){var r,i,a,o,u,s,c,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(XT(r=$m(t)),ZT(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,KT(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,NE(r.remoteStore,!0);case 9:o=S(a);try{for(o.s();!(u=o.n()).done;)s=u.value,JI(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return TT(r,t),cI(r.localStore,t,!0)})),XI(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,KT(r,c);case 21:return function(e){var t=$m(e);t.yc.forEach((function(e,n){XI(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Sg(ky.comparator)}(r),r.vc=!1,e.next=25,NE(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),qT.apply(this,arguments)}function KT(e,t,n){return GT.apply(this,arguments)}function GT(){return GT=Xe($e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=$m(t),a=[],o=[],u=S(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,sI(i.localStore,tw(f[0]));case 11:l=e.sent,h=S(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,MT(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,hI(i.localStore,c);case 36:return y=e.sent,e.next=39,sI(i.localStore,y);case 39:return l=e.sent,e.next=42,uT(i,WT(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),GT.apply(this,arguments)}function WT(e){return Qk(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function HT(e){var t=$m(e);return $m($m(t.localStore).persistence).$i()}function QT(e,t,n,r){return YT.apply(this,arguments)}function YT(){return YT=Xe($e().mark((function e(t,n,r,i){var a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=$m(t)).vc){e.next=3;break}return e.abrupt("return",void Km("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,dI(a.localStore,sw(o[0]));case 10:return u=e.sent,s=kb.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Lg.EMPTY_BYTE_STRING),e.next=14,DT(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,cI(a.localStore,n,!0);case 17:return TT(a,n,i),e.abrupt("break",20);case 19:Qm();case 20:case"end":return e.stop()}}),e)}))),YT.apply(this,arguments)}function $T(e,t,n){return JT.apply(this,arguments)}function JT(){return(JT=Xe($e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=XT(t)).vc){e.next=45;break}a=S(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return Km("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,hI(i.localStore,u);case 12:return s=e.sent,e.next=15,sI(i.localStore,s);case 15:return c=e.sent,e.next=18,uT(i,WT(s),c.targetId,!1,c.resumeToken);case 18:JI(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=S(r),e.prev=30,h=$e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,cI(i.localStore,t,!1).then((function(){XI(i.remoteStore,t),TT(i,t)})).catch(Dy);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function XT(e){var t=$m(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=LT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mT.bind(null,t),t.dc.nu=GE.bind(null,t.eventManager),t.dc.Pc=WE.bind(null,t.eventManager),t}function ZT(e){var t=$m(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wT.bind(null,t),t}function eS(e,t,n){var r=$m(e);(function(){var e=Xe($e().mark((function e(t,n,r){var i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=$m(e),r=Mb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(XE(i)),a=new JE(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,DT(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=$m(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Wm("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var tS=function(){function e(){d(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=VI(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return eI(this.persistence,new X_,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new B_(q_.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new CI}},{key:"terminate",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),nS=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=Xe($e().mark((function e(t){var r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(w(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,ZT(this.Vc.syncEngine);case 6:return e.next=8,pE(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return eI(this.persistence,new X_,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new y_(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Ky(t,this.persistence);return new qy(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=$_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?n_.withCacheSize(this.cacheSizeBytes):n_.DEFAULT;return new H_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,FI(),UI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new CI}}]),n}(tS),rS=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=Xe($e().mark((function e(t){var r,i=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(w(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof SI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:jT.bind(null,r),zr:QT.bind(null,r),Wr:$T.bind(null,r),$i:HT.bind(null,r),Qr:UT.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zT(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=FI();if(!SI.D(t))throw new Xm(Jm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=$_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new SI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(nS),iS=function(){function e(){d(this,e)}return y(e,[{key:"initialize",value:function(){var e=Xe($e().mark((function e(t,n){var r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return vT(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=PT.bind(null,this.syncEngine),e.next=12,NE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new jE}},{key:"createDatastore",value:function(e){var t,n=VI(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new MI(t));return function(e,t,n,r){return new KI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return vT(o.syncEngine,e,0)},a=NI.D()?new NI:new AI,new WI(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new iT(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$m(t),Km("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,YI(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function aS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Xe($e().mark((function r(){var i;return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var oS=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Gm("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),uS=function(){function e(t,n){var r=this;d(this,e),this.Cc=t,this.serializer=n,this.metadata=new Zm,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=Xe($e().mark((function e(){var t,n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new YE(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=Xe($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=Xe($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),sS=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=Xe($e().mark((function e(t){var n,r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Xm(Jm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Xe($e().mark((function e(t,n){var r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$m(t),i=qb(r.serializer)+"/documents",a={documents:n.map((function(e){return Vb(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Hb(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Ym(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new rb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Xe($e().mark((function e(){var t,n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ky.fromPath(t);n.mutations.push(new ib(r,n.precondition(r)))})),e.next=7,function(){var e=Xe($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$m(t),i=qb(r.serializer)+"/documents",a={writes:n.map((function(e){return Qb(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qm();t=py.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xm(Jm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(py.min())?zw.exists(!1):zw.updateTime(t):zw.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(py.min()))throw new Xm(Jm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zw.updateTime(t)}return zw.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),cS=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new jI(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(Xe($e().mark((function t(){var n,r;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new sS(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Wy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!cb(t)}return!1}}]),e}(),lS=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=jm.UNAUTHENTICATED,this.clientId=cy.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Km("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Km("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Xm(Jm.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Zm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Xe($e().mark((function n(){var r;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=LE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function fS(e,t){return hS.apply(this,arguments)}function hS(){return hS=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Km("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,tI(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),hS.apply(this,arguments)}function dS(e,t){return pS.apply(this,arguments)}function pS(){return(pS=Xe($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,mS(t);case 3:return r=e.sent,Km("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return CE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return CE(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vS(e){return"FirebaseError"===e.name?e.code===Jm.FAILED_PRECONDITION||e.code===Jm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function mS(e){return yS.apply(this,arguments)}function yS(){return(yS=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Km("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,fS(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),vS(n=e.t0)){e.next=13;break}throw n;case 13:return Wm("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,fS(t,new tS);case 16:e.next=21;break;case 18:return Km("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,fS(t,new tS);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function gS(e){return kS.apply(this,arguments)}function kS(){return(kS=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Km("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,dS(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Km("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,dS(t,new iS);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wS(e){return mS(e).then((function(e){return e.persistence}))}function bS(e){return mS(e).then((function(e){return e.localStore}))}function xS(e){return gS(e).then((function(e){return e.remoteStore}))}function _S(e){return gS(e).then((function(e){return e.syncEngine}))}function IS(e){return gS(e).then((function(e){return e.datastore}))}function ES(e){return TS.apply(this,arguments)}function TS(){return(TS=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gS(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=aT.bind(null,n.syncEngine),r.onUnlisten=cT.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Zm;return e.asyncQueue.enqueueAndForget(Xe($e().mark((function i(){return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new oS({next:function(a){t.enqueueAndForget((function(){return qE(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Xm(Jm.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Xm(Jm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new QE(Yk(n.path),a,{includeMetadataChanges:!0,Ku:!0});return BE(e,o)},i.next=3,ES(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function CS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Zm;return e.asyncQueue.enqueueAndForget(Xe($e().mark((function i(){return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new oS({next:function(n){t.enqueueAndForget((function(){return qE(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Xm(Jm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new QE(n,a,{includeMetadataChanges:!0,Ku:!0});return BE(e,o)},i.next=3,ES(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function AS(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var NS=new Map;function DS(e,t,n){if(!n)throw new Xm(Jm.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function RS(e,t,n,r){if(!0===t&&!0===r)throw new Xm(Jm.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function PS(e){if(!ky.isDocumentKey(e))throw new Xm(Jm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function OS(e){if(ky.isDocumentKey(e))throw new Xm(Jm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function LS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Qm()}function MS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xm(Jm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=LS(e);throw new Xm(Jm.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function FS(e,t){if(t<=0)throw new Xm(Jm.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var US=function(){function e(t){var n,r;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Xm(Jm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xm(Jm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}RS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AS(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xm(Jm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Xm(Jm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Xm(Jm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),VS=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new US({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new Xm(Jm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Xm(Jm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new US(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ty;switch(e.type){case"firstParty":return new ay(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xm(Jm.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=NS.get(e);t&&(Km("ComponentProvider","Removing Datastore"),NS.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function jS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=MS(e,VS))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Wm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=jm.MOCK_USER;else{u=dt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Xm(Jm.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new jm(c)}e._authCredentials=new ny(new ey(u,s))}}var BS=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new qS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),zS=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),qS=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,Yk(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new BS(this.firestore,null,new ky(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(zS);function KS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Vt(e),DS("collection","path",t),e instanceof VS){var a=my.fromString.apply(my,[t].concat(r));return OS(a),new qS(e,null,a)}if(!(e instanceof BS||e instanceof qS))throw new Xm(Jm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(my.fromString.apply(my,[t].concat(r)));return OS(o),new qS(e.firestore,null,o)}function GS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Vt(e),1===arguments.length&&(t=cy.A()),DS("doc","path",t),e instanceof VS){var a=my.fromString.apply(my,[t].concat(r));return PS(a),new BS(e,null,new ky(a))}if(!(e instanceof BS||e instanceof qS))throw new Xm(Jm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(my.fromString.apply(my,[t].concat(r)));return PS(o),new BS(e.firestore,e instanceof qS?e.converter:null,new ky(o))}function WS(e,t){return e=Vt(e),t=Vt(t),(e instanceof BS||e instanceof qS)&&(t instanceof BS||t instanceof qS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function HS(e,t){return e=Vt(e),t=Vt(t),e instanceof zS&&t instanceof zS&&e.firestore===t.firestore&&iw(e._query,t._query)&&e.converter===t.converter}var QS=function(){function e(){var t=this;d(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new jI(this,"async_queue_retry"),this.Xc=function(){var e=UI();e&&Km("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=UI();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return y(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=UI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Zm;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=Xe($e().mark((function e(){var t=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Uy(e.t0)){e.next=12;break}throw e.t0;case 12:Km("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Gm("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=OE.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&Qm()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=S(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=S(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function YS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=S(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var $S=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new Zm,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),JS=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new QS,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||ZS(this),this._firestoreClient.terminate()}}]),n}(VS);function XS(e){return e._firestoreClient||ZS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ZS(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new qg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,AS(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new lS(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function eC(e,t,n){var r=new Zm;return e.asyncQueue.enqueue(Xe($e().mark((function i(){var a;return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,fS(e,n);case 3:return i.next=5,dS(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),vS(a=i.t0)){i.next=13;break}throw a;case 13:Wm("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function tC(e){return function(e){return e.asyncQueue.enqueue(Xe($e().mark((function t(){var n,r;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wS(e);case 2:return n=t.sent,t.next=5,xS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=$m(e);return t.vu.delete(0),HI(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(XS(e=MS(e,JS)))}function nC(e){return function(e){return e.asyncQueue.enqueue(Xe($e().mark((function t(){var n,r;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wS(e);case 2:return n=t.sent,t.next=5,xS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=$m(t)).vu.add(0),e.next=4,YI(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(XS(e=MS(e,JS)))}function rC(e,t){var n=XS(e=MS(e,JS)),r=new $S;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new uS(e,t)}(function(e,t){if(e instanceof Uint8Array)return aS(e,t);if(e instanceof ArrayBuffer)return aS(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?db().encode(e):e),t)}(n,VI(t));e.asyncQueue.enqueueAndForget(Xe($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=eS,t.next=3,_S(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function iC(e,t){return function(e,t){return e.asyncQueue.enqueue(Xe($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=$m(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,bS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(XS(e=MS(e,JS)),t).then((function(t){return t?new zS(e,null,t.query):null}))}function aC(e){if(e._initialized||e._terminated)throw new Xm(Jm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var oC=function(){function e(t){d(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Lg.fromBase64String(t))}catch(t){throw new Xm(Jm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Lg.fromUint8Array(t))}}]),e}(),uC=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gy(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var sC=y((function e(t){d(this,e),this._methodName=t})),cC=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Xm(Jm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Xm(Jm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ly(this._lat,e._lat)||ly(this._long,e._long)}}]),e}(),lC=/^__.*__$/,fC=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Jw(e,this.data,this.fieldMask,t,this.fieldTransforms):new $w(e,this.data,t,this.fieldTransforms)}}]),e}(),hC=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new Jw(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function dC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qm()}}var pC=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return OC(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(dC(this.ca)&&lC.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),vC=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||VI(t)}return y(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pC({ca:e,methodName:t,ga:n,path:gy.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function mC(e){var t=e._freezeSettings(),n=VI(e._databaseId);return new vC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);NC("Data must be an object, but it was:",o,r);var u,s,c=CC(r,o);if(a.merge)u=new Pg(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=S(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=DC(t,l.value,n);if(!o.contains(d))throw new Xm(Jm.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));LC(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Pg(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new fC(new hk(c),u,s)}var gC=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(sC);function kC(e,t,n){return new pC({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var wC=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new jw(e.path,new Rw)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(sC),bC=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).pa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=kC(this,e,!0),n=this.pa.map((function(e){return SC(e,t)})),r=new Pw(n);return new jw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sC),xC=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).pa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=kC(this,e,!0),n=this.pa.map((function(e){return SC(e,t)})),r=new Lw(n);return new jw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sC),_C=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Ia=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new Fw(e.serializer,Sw(e.serializer,this.Ia));return new jw(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sC);function IC(e,t,n,r){var i=e.ya(1,t,n);NC("Data must be an object, but it was:",i,r);var a=[],o=hk.empty();Eg(r,(function(e,r){var u=PC(t,e,n);r=Vt(r);var s=i.da(u);if(r instanceof gC)a.push(u);else{var c=SC(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Pg(a);return new hC(o,u,i.fieldTransforms)}function EC(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[DC(t,r,n)],s=[i];if(a.length%2!=0)throw new Xm(Jm.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(DC(t,a[c])),s.push(a[c+1]);for(var l=[],f=hk.empty(),h=u.length-1;h>=0;--h)if(!LC(l,u[h])){var d=u[h],p=s[h];p=Vt(p);var v=o.da(d);if(p instanceof gC)l.push(d);else{var m=SC(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Pg(l);return new hC(f,y,o.fieldTransforms)}function TC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return SC(n,e.ya(r?4:3,t))}function SC(e,t){if(AC(e=Vt(e)))return NC("Unsupported field value:",t,e),CC(e,t);if(e instanceof sC)return function(e,t){if(!dC(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=S(e);try{for(a.s();!(n=a.n()).done;){var o=SC(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Vt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Sw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=dy.fromDate(e);return{timestampValue:Pb(t.serializer,n)}}if(e instanceof dy){var r=new dy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Pb(t.serializer,r)}}if(e instanceof cC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof oC)return{bytesValue:Ob(t.serializer,e._byteString)};if(e instanceof BS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Fb(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(LS(e)))}(e,t)}function CC(e,t){var n={};return Tg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Eg(e,(function(e,r){var i=SC(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function AC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof dy||e instanceof cC||e instanceof oC||e instanceof BS||e instanceof sC)}function NC(e,t,n){if(!AC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=LS(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function DC(e,t,n){if((t=Vt(t))instanceof uC)return t._internalPath;if("string"==typeof t)return PC(e,t);throw OC("Field path arguments must be of type string or ",e,!1,void 0,n)}var RC=new RegExp("[~\\*/\\[\\]]");function PC(e,t,n){if(t.search(RC)>=0)throw OC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(uC,h(t.split(".")))._internalPath}catch(r){throw OC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function OC(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Xm(Jm.INVALID_ARGUMENT,u+e+s)}function LC(e,t){return e.some((function(e){return e.isEqual(t)}))}var MC=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new BS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(UC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),FC=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return Ka(w(n.prototype),"data",this).call(this)}}]),n}(MC);function UC(e,t){return"string"==typeof t?PC(e,t):t instanceof uC?t._internalPath:t._delegate._internalPath}function VC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xm(Jm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jC=y((function e(){d(this,e)})),BC=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(jC);function zC(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof jC&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof KC})).length,n=e.filter((function(e){return e instanceof qC})).length;if(t>1||t>0&&n>0)throw new Xm(Jm.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=S(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var qC=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return nA(e._query,t),new zS(e.firestore,e.converter,nw(e._query,t))}},{key:"_parse",value:function(e){var t=mC(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){tA(o,a);var s,c=[],l=S(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(eA(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=eA(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||tA(o,a),u=TC(n,"where",o,"in"===a||"not-in"===a);return bk.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(BC);var KC=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:xk.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=S(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;nA(r,a),r=nw(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new zS(e.firestore,e.converter,nw(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(jC);var GC=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new gk(t,n);return function(e,t){if(null===Jk(e)){var n=Xk(e);null!==n&&rA(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new zS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Hk(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(BC);var WC=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new zS(e.firestore,e.converter,rw(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(BC);var HC=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=ZC(e,this.type,this._docOrFields,this._inclusive);return new zS(e.firestore,e.converter,function(e,t){return new Hk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(BC);function QC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return HC._create("startAt",t,!0)}function YC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return HC._create("startAfter",t,!1)}var $C=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=ZC(e,this.type,this._docOrFields,this._inclusive);return new zS(e.firestore,e.converter,function(e,t){return new Hk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(BC);function JC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $C._create("endBefore",t,!1)}function XC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $C._create("endAt",t,!0)}function ZC(e,t,n,r){if(n[0]=Vt(n[0]),n[0]instanceof MC)return function(e,t,n,r,i){if(!r)throw new Xm(Jm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=S(ew(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ek(t,r.key));else{var c=r.data.field(s.field);if(jg(c))throw new Xm(Jm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new vk(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=mC(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Xm(Jm.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Zk(e)&&-1!==c.indexOf("/"))throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(my.fromString(c));if(!ky.isDocumentKey(l))throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ky(l);u.push(ek(t,f))}else{var h=TC(n,r,c);u.push(h)}}return new vk(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function eA(e,t,n){if("string"==typeof(n=Vt(n))){if(""===n)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zk(t)&&-1!==n.indexOf("/"))throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(my.fromString(n));if(!ky.isDocumentKey(r))throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ek(e,new ky(r))}if(n instanceof BS)return ek(e,n._key);throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(LS(n),"."))}function tA(e,t){if(!Array.isArray(e)||0===e.length)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function nA(e,t){if(t.isInequality()){var n=Xk(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Jk(e);null!==i&&rA(e,r,i)}var a=function(e,t){var n,r=S(e);try{for(r.s();!(n=r.n()).done;){var i,a=S(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Xm(Jm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Xm(Jm.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function rA(e,t,n){if(!n.isEqual(t))throw new Xm(Jm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var iA=function(){function e(){d(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ug(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qm()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Eg(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new cC(Ug(e.latitude),Ug(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Bg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Fg(e);return new dy(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=my.fromString(e);Ym(ux(n));var r=new Kg(n.get(1),n.get(3)),i=new ky(n.popFirst(5));return r.isEqual(t)||Gm("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function aA(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var oA=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new oC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new BS(this.firestore,null,t)}}]),n}(iA);var uA=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),sA=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return Ka(w(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new cA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(UC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(MC),cA=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ka(w(n.prototype),"data",this).call(this,e)}}]),n}(sA),lA=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new uA(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new cA(n._firestore,n._userDataWriter,r.key,r,new uA(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xm(Jm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new cA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uA(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new cA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uA(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:fA(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function fA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qm()}}function hA(e,t){return e instanceof sA&&t instanceof sA?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof lA&&t instanceof lA&&e._firestore===t._firestore&&HS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var dA=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new oC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new BS(this.firestore,null,t)}}]),n}(iA);function pA(e){e=MS(e,BS);var t=MS(e.firestore,JS),n=XS(t),r=new dA(t);return function(e,t){var n=new Zm;return e.asyncQueue.enqueueAndForget(Xe($e().mark((function r(){return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Xe($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=$m(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Xm(Jm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=LE(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,bS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new sA(t,r,e._key,n,new uA(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function vA(e){e=MS(e,zS);var t=MS(e.firestore,JS),n=XS(t),r=new dA(t);return function(e,t){var n=new Zm;return e.asyncQueue.enqueueAndForget(Xe($e().mark((function r(){return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Xe($e().mark((function e(t,n,r){var i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fI(t,n,!0);case 3:i=e.sent,a=new tT(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=LE(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,bS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new lA(t,r,e,n)}))}function mA(e,t,n){e=MS(e,BS);var r=MS(e.firestore,JS),i=aA(e.converter,t,n);return xA(r,[yC(mC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,zw.none())])}function yA(e,t,n){e=MS(e,BS);for(var r=MS(e.firestore,JS),i=mC(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return xA(r,[("string"==typeof(t=Vt(t))||t instanceof uC?EC(i,"updateDoc",e._key,t,n,o):IC(i,"updateDoc",e._key,t)).toMutation(e._key,zw.exists(!0))])}function gA(e){return xA(MS(e.firestore,JS),[new rb(e._key,zw.none())])}function kA(e,t){var n=MS(e.firestore,JS),r=GS(e),i=aA(e.converter,t);return xA(n,[yC(mC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,zw.exists(!1))]).then((function(){return r}))}function wA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Vt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||YS(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(YS(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof BS)l=MS(e.firestore,JS),f=Yk(e._key.path),c={next:function(t){n[s]&&n[s](_A(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=MS(e,zS);l=MS(p.firestore,JS),f=p._query;var v=new dA(l);c={next:function(e){n[s]&&n[s](new lA(l,v,p,e))},error:n[s+1],complete:n[s+2]},VC(e._query)}return function(e,t,n,r){var i=new oS(r),a=new QE(t,i,n);return e.asyncQueue.enqueueAndForget(Xe($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=BE,t.next=3,ES(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(Xe($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=qE,t.next=3,ES(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(XS(l),f,h,c)}function bA(e,t){return function(e,t){var n=new oS(t);return e.asyncQueue.enqueueAndForget(Xe($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){$m(e).ku.add(t),t.next()},t.next=3,ES(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(Xe($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){$m(e).ku.delete(t)},t.next=3,ES(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(XS(e=MS(e,JS)),YS(t)?t:{next:t})}function xA(e,t){return function(e,t){var n=new Zm;return e.asyncQueue.enqueueAndForget(Xe($e().mark((function r(){return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=fT,r.next=3,_S(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(XS(e),t)}function _A(e,t,n){var r=n.docs.get(t._key),i=new dA(e);return new sA(e,i,t._key,r,new uA(n.hasPendingWrites,n.fromCache),t.converter)}var IA={maxAttempts:5},EA=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mC(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=TA(e,this._firestore),i=aA(r.converter,t,n),a=yC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,zw.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=TA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Vt(t))||t instanceof uC?EC(this._dataReader,"WriteBatch.update",i._key,t,n,o):IC(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,zw.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=TA(e,this._firestore);return this._mutations=this._mutations.concat(new rb(t._key,zw.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Xm(Jm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function TA(e,t){if((e=Vt(e)).firestore!==t)throw new Xm(Jm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var SA=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=TA(e,this._firestore),i=new dA(this._firestore);return Ka(w(n.prototype),"get",this).call(this,e).then((function(e){return new sA(t._firestore,i,r._key,e._document,new uA(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=mC(t)}return y(e,[{key:"get",value:function(e){var t=this,n=TA(e,this._firestore),r=new oA(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Qm();var i=e[0];if(i.isFoundDocument())return new MC(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new MC(t._firestore,r,n._key,null,n.converter);throw Qm()}))}},{key:"set",value:function(e,t,n){var r=TA(e,this._firestore),i=aA(r.converter,t,n),a=yC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=TA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Vt(t))||t instanceof uC?EC(this._dataReader,"Transaction.update",i._key,t,n,o):IC(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=TA(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function CA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bC("arrayUnion",t)}function AA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xC("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Bm=e}(Fn),Nn(new jt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new JS(new ry(e.getProvider("auth-internal")),new uy(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xm(Jm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kg(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),qn(Vm,"3.13.0",e),qn(Vm,"3.13.0","esm2017")}();var NA,DA="firebasestorage.googleapis.com",RA="storageBucket",PA=function(e){k(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,OA(e),"Firebase Storage: ".concat(r," (").concat(OA(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(x(i),n.prototype),i}return y(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return OA(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(bt);function OA(e){return"storage/"+e}function LA(){return new PA(NA.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function MA(){return new PA(NA.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FA(){return new PA(NA.CANCELED,"User canceled the upload/download.")}function UA(){return new PA(NA.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function VA(e){return new PA(NA.INVALID_ARGUMENT,e)}function jA(){return new PA(NA.APP_DELETED,"The Firebase app was deleted.")}function BA(e,t){return new PA(NA.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function zA(e){throw new PA(NA.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(NA||(NA={}));var qA,KA=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return y(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new PA(NA.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===DA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new PA(NA.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),GA=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return y(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function WA(e){return"string"===typeof e||e instanceof String}function HA(e){return QA()&&e instanceof Blob}function QA(){return"undefined"!==typeof Blob&&!vt()}function YA(e,t,n,r){if(r<t)throw VA("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw VA("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function $A(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function JA(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function XA(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(qA||(qA={}));var ZA=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return y(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=LA();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?jA():FA());else i(MA())}};this.canceled_?t(0,new eN(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new eN(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===qA.NO_ERROR,a=r.getStatus();if(!n||XA(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===qA.ABORT;t(!1,new eN(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new eN(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),eN=y((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function tN(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function nN(){for(var e=tN(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(QA())return new Blob(n);throw new PA(NA.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function rN(e){if("undefined"===typeof atob)throw t="base-64",new PA(NA.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var iN={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},aN=y((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function oN(e,t){switch(e){case iN.RAW:return new aN(uN(t));case iN.BASE64:case iN.BASE64URL:return new aN(sN(e,t));case iN.DATA_URL:return new aN(function(e){var t=new cN(e);return t.base64?sN(iN.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw BA(iN.DATA_URL,"Malformed data URL.")}return uN(t)}(t.rest)}(t),new cN(t).contentType)}throw LA()}function uN(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function sN(e,t){switch(e){case iN.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw BA(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case iN.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw BA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=rN(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw BA(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var cN=y((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw BA(iN.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var lN=function(){function e(t,n){d(this,e);var r=0,i="";HA(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return y(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(HA(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(QA()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(nN.apply(null,i))}var a=n.map((function(e){return WA(e)?oN(iN.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function fN(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function hN(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function dN(e,t){return t}var pN=y((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||dN})),vN=null;function mN(){if(vN)return vN;var e=[];e.push(new pN("bucket")),e.push(new pN("generation")),e.push(new pN("metageneration")),e.push(new pN("name","fullPath",!0));var t=new pN("name");t.xform=function(e,t){return function(e){return!WA(e)||e.length<2?e:hN(e)}(t)},e.push(t);var n=new pN("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new pN("timeCreated")),e.push(new pN("updated")),e.push(new pN("md5Hash",null,!0)),e.push(new pN("cacheControl",null,!0)),e.push(new pN("contentDisposition",null,!0)),e.push(new pN("contentEncoding",null,!0)),e.push(new pN("contentLanguage",null,!0)),e.push(new pN("contentType",null,!0)),e.push(new pN("metadata","customMetadata",!0)),vN=e}function yN(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new KA(n,r);return t._makeStorageReference(i)}})}(r,e),r}function gN(e,t,n){var r=fN(t);return null===r?null:yN(e,r,n)}function kN(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var wN=y((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function bN(e){if(!e)throw LA()}function xN(e,t){return function(n,r){var i=gN(e,r,t);return bN(null!==i),i}}function _N(e,t){return function(n,r){var i=gN(e,r,t);return bN(null!==i),function(e,t,n,r){var i=fN(t);if(null===i)return null;if(!WA(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return $A("/b/"+o(i)+"/o/"+o(a),n,r)+JA({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function IN(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new PA(NA.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new PA(NA.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new PA(NA.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new PA(NA.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function EN(e){var t=IN(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new PA(NA.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function TN(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function SN(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=TN(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+kN(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=lN.getBlob(c,r,l);if(null===f)throw UA();var h={name:s.fullPath},d=$A(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new wN(d,"POST",xN(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=IN(t),v}var CN=null,AN=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qA.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=qA.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=qA.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return y(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw zA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw zA("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw zA("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw zA("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw zA("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),NN=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(AN);function DN(){return CN?CN():new NN}var RN=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof KA?n:KA.makeFromUrl(n,t.host)}return y(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new KA(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return hN(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new KA(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new PA(NA.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function PN(e,t,n){e._throwIfRoot("uploadBytes");var r=SN(e.storage,e._location,mN(),new lN(t,!0),n);return e.storage.makeRequestWithTokens(r,DN).then((function(t){return{metadata:t,ref:e}}))}function ON(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=$A(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new wN(r,"GET",_N(e,n),i);return a.errorHandler=EN(t),a}(e.storage,e._location,mN());return e.storage.makeRequestWithTokens(t,DN).then((function(e){if(null===e)throw new PA(NA.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function LN(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=$A(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new wN(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=EN(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,DN)}function MN(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new KA(e._location.bucket,n);return new RN(e.storage,r)}function FN(e,t){if(e instanceof jN){var n=e;if(null==n._bucket)throw new PA(NA.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RA+"' property when initializing the app?");var r=new RN(n,n._bucket);return null!=t?FN(r,t):r}return void 0!==t?MN(e,t):e}function UN(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof jN)return new RN(e,t);throw VA("To use ref(service, url), the first argument must be a Storage instance.")}return FN(e,t)}function VN(e,t){var n=null===t||void 0===t?void 0:t[RA];return null==n?null:KA.makeFromBucketSpec(n,e)}var jN=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=DA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?KA.makeFromBucketSpec(i,this._host):VN(this._host,this.app.options)}return y(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=KA.makeFromBucketSpec(this._url,e):this._bucket=VN(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){YA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){YA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Xe($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Xe($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new RN(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new GA(jA());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=JA(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new ZA(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=Xe($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),BN="@firebase/storage",zN="0.11.2",qN="storage";function KN(e,t,n,r){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iN.RAW,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");var i=oN(n,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),PN(e,i.data,a)}(e=Vt(e),t,n,r)}function GN(e){return ON(e=Vt(e))}function WN(e){return LN(e=Vt(e))}function HN(e,t){return UN(e=Vt(e),t)}function QN(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:dt(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function YN(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new jN(r,i,a,n,Fn)}Nn(new jt(qN,YN,"PUBLIC").setMultipleInstances(!0)),qn(BN,zN,""),qn(BN,zN,"esm2017");(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn(),t=Dn(e=Vt(e),Gi);t.isInitialized()?t.getImmediate():function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Dn(e,Gi);if(n.isInitialized()){var r=n.getImmediate();if(Tt(t,n.getOptions()))return r;throw Zi.create("already-initialized")}var i=n.initialize({options:t})}(e)})(Un({apiKey:"AIzaSyDd62gnmqwbIN-JLetUJLVbn_H6h6iFb-s",authDomain:"nwitter-5e46f.firebaseapp.com",projectId:"nwitter-5e46f",storageBucket:"nwitter-5e46f.appspot.com",messagingSenderId:"407211607571",appId:"1:407211607571:web:0607065c9301a8b6ea61e6",measurementId:"G-6RE4L6CFJ3"})),mh();var $N=mh(),JN=function(e,t){var n="string"==typeof e?e:t||"(default)",r=Dn("object"==typeof e?e:Vn(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=ct("firestore");i&&jS.apply(void 0,[r].concat(h(i)))}return r}(),XN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn(),t=arguments.length>1?arguments[1]:void 0,n=Dn(e=Vt(e),qN).getImmediate({identifier:t}),r=ct("storage");return r&&QN.apply(void 0,[n].concat(h(r))),n}(),ZN=n(184),eD=function(){var e=l((0,r.useState)(""),2),t=e[0],n=e[1],i=l((0,r.useState)(""),2),a=i[0],o=i[1],u=l((0,r.useState)(!0),2),s=u[0],c=u[1],f=l((0,r.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,r=t.className,i=t.value;"email"===r?n(i):"password"===r&&o(i)},v=function(){var e=Xe($e().mark((function e(n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,!s){e.next=8;break}return e.next=5,pc($N,t,a);case 5:e.sent,e.next=11;break;case 8:return e.next=10,mc($N,t,a);case 10:e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),d(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,ZN.jsxs)(ZN.Fragment,{children:[(0,ZN.jsxs)("form",{onSubmit:v,children:[(0,ZN.jsx)("input",{className:"email",type:"email",placeholder:"Email",value:t,onChange:p}),(0,ZN.jsx)("input",{className:"password",type:"password",placeholder:"Password",value:a,onChange:p}),(0,ZN.jsx)("input",{type:"submit",value:s?"Create Account":"Log In"}),h]}),(0,ZN.jsx)("span",{onClick:function(){return c((function(e){return!e}))},children:s?"Sign In":"Create Account"})]})},tD=function(){var e=function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.className)?r=new Ts:"github"===n&&(r=new Ss),e.next=4,Yl($N,r);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,ZN.jsxs)("div",{children:[(0,ZN.jsx)(eD,{}),(0,ZN.jsxs)("div",{children:[(0,ZN.jsx)("button",{className:"google",onClick:e,children:"google"}),(0,ZN.jsx)("button",{className:"github",onClick:e,children:"github"})]})]})};var nD,rD=function(e){var t=e.nweetObj,n=e.isOwner,i=l((0,r.useState)(!1),2),a=i[0],o=i[1],u=l((0,r.useState)(t.text),2),s=u[0],c=u[1],f=function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=7;break}return e.next=4,gA(GS(JN,"nweets","".concat(t.id)));case 4:if(""===t.attachmentUrl){e.next=7;break}return e.next=7,WN(HN(XN,t.attachmentUrl));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){return o((function(e){return!e}))},d=function(){var e=Xe($e().mark((function e(n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,yA(GS(JN,"nweets",t.id),{text:s});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,ZN.jsx)("div",{children:a?(0,ZN.jsxs)(ZN.Fragment,{children:[(0,ZN.jsxs)("form",{onSubmit:d,children:[(0,ZN.jsx)("input",{onChange:function(e){var t=e.target.value;c(t)},value:s,required:!0}),(0,ZN.jsx)("input",{type:"submit",value:"Update Nweet"})]}),(0,ZN.jsx)("button",{onClick:h,children:"Cancel"})]}):(0,ZN.jsxs)(ZN.Fragment,{children:[(0,ZN.jsx)("h4",{children:t.text}),t.attachmentUrl&&(0,ZN.jsx)("img",{src:t.attachmentUrl,width:"50px",height:"50px"}),n&&(0,ZN.jsxs)(ZN.Fragment,{children:[(0,ZN.jsx)("button",{onClick:f,children:"Delete Nweet"}),(0,ZN.jsx)("button",{onClick:h,children:"Edit Nweet"})]})]})})},iD={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},aD=new Uint8Array(16);function oD(){if(!nD&&!(nD="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nD(aD)}for(var uD=[],sD=0;sD<256;++sD)uD.push((sD+256).toString(16).slice(1));function cD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(uD[e[t+0]]+uD[e[t+1]]+uD[e[t+2]]+uD[e[t+3]]+"-"+uD[e[t+4]]+uD[e[t+5]]+"-"+uD[e[t+6]]+uD[e[t+7]]+"-"+uD[e[t+8]]+uD[e[t+9]]+"-"+uD[e[t+10]]+uD[e[t+11]]+uD[e[t+12]]+uD[e[t+13]]+uD[e[t+14]]+uD[e[t+15]]).toLowerCase()}var lD=function(e,t,n){if(iD.randomUUID&&!t&&!e)return iD.randomUUID();var r=(e=e||{}).random||(e.rng||oD)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return cD(r)},fD=function(e){var t=e.userObj,n=l((0,r.useState)(""),2),i=n[0],a=n[1],o=l((0,r.useState)(""),2),u=o[0],s=o[1],c=function(){var e=Xe($e().mark((function e(n){var r,o,c,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r="",""===u){e.next=10;break}return o=HN(XN,"".concat(t.uid,"/").concat(lD())),e.next=6,KN(o,u,"data_url");case 6:return c=e.sent,e.next=9,GN(c.ref);case 9:r=e.sent;case 10:return l={text:i,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:r},e.next=13,kA(KS(JN,"nweets"),l);case 13:a(""),s("");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,ZN.jsxs)("form",{onSubmit:c,children:[(0,ZN.jsx)("input",{value:i,onChange:function(e){e.preventDefault();var t=e.target.value;a(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),(0,ZN.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;s(t)},n.readAsDataURL(t)}}),(0,ZN.jsx)("input",{type:"submit",value:"Nweet"}),u&&(0,ZN.jsxs)("div",{children:[(0,ZN.jsx)("img",{src:u,width:"50px",height:"50px"}),(0,ZN.jsx)("button",{onClick:function(){return s("")},children:"Clear"})]})]})},hD=function(e){var t=e.userObj,n=l((0,r.useState)([]),2),i=n[0],a=n[1];return(0,r.useEffect)((function(){wA(KS(JN,"nweets"),(function(e){var t=e.docs.map((function(e){return Zt({id:e.id},e.data())}));a(t)}))}),[]),(0,ZN.jsxs)(ZN.Fragment,{children:[(0,ZN.jsx)(fD,{userObj:t}),(0,ZN.jsx)("div",{children:i.map((function(e){return(0,ZN.jsx)(rD,{nweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})};var dD=function(e){var t=e.userObj,n=e.refreshUser,i=be(),a=l((0,r.useState)(t.displayName),2),o=a[0],u=a[1],s=function(){var e=Xe($e().mark((function e(r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.displayName===o){e.next=5;break}return e.next=4,Tc($N.currentUser,{displayName:o});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,ZN.jsxs)(ZN.Fragment,{children:[(0,ZN.jsxs)("form",{onSubmit:s,children:[(0,ZN.jsx)("input",{onChange:function(e){var t=e.target.value;u(t)},type:"text",placeholder:"Display name",value:o}),(0,ZN.jsx)("input",{type:"submit",value:"Update Profile"})]}),(0,ZN.jsx)("button",{onClick:function(){$N.signOut(),i("/")},children:"Log Out"})]})};var pD=function(e){var t=e.userObj;return(0,ZN.jsx)("nav",{children:(0,ZN.jsxs)("ul",{children:[(0,ZN.jsx)("li",{children:(0,ZN.jsx)(He,{to:"/",children:"Home"})}),(0,ZN.jsx)("li",{children:(0,ZN.jsxs)(He,{to:"/profile",children:[t.displayName,"\uc758 Profile"]})})]})})};var vD,mD=function(e){var t=e.isLoggedIn,n=e.userObj,r=e.refreshUser;return(0,ZN.jsxs)(Ke,{children:[t&&(0,ZN.jsx)(pD,{userObj:n}),(0,ZN.jsx)(Fe,{children:t?(0,ZN.jsxs)(ZN.Fragment,{children:[(0,ZN.jsx)(Le,{exact:!0,path:"/",element:(0,ZN.jsx)(hD,{userObj:n})}),(0,ZN.jsx)(Le,{exact:!0,path:"/profile",element:(0,ZN.jsx)(dD,{refreshUser:r,userObj:n})})]}):(0,ZN.jsx)(Le,{exact:!0,path:"/",element:(0,ZN.jsx)(tD,{})})})]})},yD=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,Cn(t,new jt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Bn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:In;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:In;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Cn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){An(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),gD=(Ze(vD={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ze(vD,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),vD),kD=new xt("app-compat","Firebase",gD);var wD=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Un(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(It(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:qn,setLogLevel:Gn,onLog:Kn,apps:null,SDK_VERSION:Fn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Nn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw kD.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&at(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!It(n,e=e||In))throw kD.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(yD);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){at(n,e)},createSubscribe:Dt,ErrorFactory:xt,deepExtend:at}),n}(),bD=new Jt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){bD.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var xD=self.firebase.SDK_VERSION;xD&&xD.indexOf("LITE")>=0&&bD.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _D=wD;function ID(){return window}!function(e){qn("@firebase/app-compat","0.2.13",e)}();var ED=2e3;function TD(e,t,n){return SD.apply(this,arguments)}function SD(){return SD=Xe($e().mark((function e(t,n,r){var i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ID(),o=a.BuildInfo,vo(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,PD(n.sessionId);case 4:return u=e.sent,s={},gu()?s.ibi=o.packageName:vu()?s.apn=o.packageName:uo(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Jf(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),SD.apply(this,arguments)}function CD(){return(CD=Xe($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ID(),r=n.BuildInfo,i={},gu()?i.iosBundleId=r.packageName:vu()?i.androidPackageName=r.packageName:uo(t,"operation-not-supported-in-this-environment"),e.next=5,Sf(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AD(e){var t=ID().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function ND(e,t,n){return DD.apply(this,arguments)}function DD(){return DD=Xe($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ID(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(so(t,"redirect-cancelled-by-user"))}),ED))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),vu()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),DD.apply(this,arguments)}function RD(e){var t,n,r,i,a,o,u,s,c,l,f=ID();ho("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ho("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ho("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ho("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ho("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function PD(e){return OD.apply(this,arguments)}function OD(){return(OD=Xe($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=LD(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LD(e){if(vo(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var MD=20,FD=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return y(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ka(w(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(If);function UD(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:qD(),postBody:null,tenantId:e.tenantId,error:so(e,"no-auth-event")}}function VD(e,t){return KD()._set(GD(e),t)}function jD(e){return BD.apply(this,arguments)}function BD(){return(BD=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KD()._get(GD(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,KD()._remove(GD(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zD(e,t){var n,r,i=function(e){var t=WD(e),n=t.link?decodeURIComponent(t.link):void 0,r=WD(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return WD(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=WD(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?so(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function qD(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<MD;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function KD(){return au(Wc)}function GD(e){return su("authEvent",e.config.apiKey,e.name)}function WD(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=T(e.split("?"));t[0];return At(t.slice(1).join("?"))}var HD=function(){function e(){d(this,e),this._redirectPersistence=Qc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wf,this._overrideRedirectResult=cf}return y(e,[{key:"_initialize",value:function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new FD(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){uo(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Xe($e().mark((function e(t,n,r,i){var a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return RD(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),nf.clear(),e.next=10,this._originValidation(t);case 10:return o=UD(t,r,i),e.next=13,VD(t,o);case 13:return e.next=15,TD(t,o,n);case 15:return u=e.sent,e.next=18,AD(u);case 18:return s=e.sent,e.abrupt("return",ND(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return CD.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=ID(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Xe($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jD(e);case 2:t.onEvent(YD());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Xe($e().mark((function n(r){var i,a;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,jD(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=zD(i,r.url)),t.onEvent(a||YD());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");ID().handleOpenURL=function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),QD=HD;function YD(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:so("no-auth-event")}}var $D=1e3;function JD(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function XD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return!("file:"!==JD()&&"ionic:"!==JD()&&"capacitor:"!==JD()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ZD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return gt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/Edge\/\d+/.test(e)}(e)}function eR(){try{var e=self.localStorage,t=Jc();if(e)return e.setItem(t,"1"),e.removeItem(t),!ZD()||kt()}catch(n){return tR()&&kt()}return!1}function tR(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function nR(){return("http:"===JD()||"https:"===JD()||mt()||XD())&&!(yt()||vt())&&eR()&&!tR()}function rR(){return XD()&&"undefined"!==typeof document}function iR(){return aR.apply(this,arguments)}function aR(){return(aR=Xe($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rR()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),$D);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oR={LOCAL:"local",NONE:"none",SESSION:"session"},uR=ho,sR="persistence";function cR(e,t){uR(Object.values(oR).includes(t),e,"invalid-persistence-type"),yt()?uR(t!==oR.SESSION,e,"unsupported-persistence-type"):vt()?uR(t===oR.NONE,e,"unsupported-persistence-type"):tR()?uR(t===oR.NONE||t===oR.LOCAL&&kt(),e,"unsupported-persistence-type"):uR(t===oR.NONE||eR(),e,"unsupported-persistence-type")}function lR(e){return fR.apply(this,arguments)}function fR(){return(fR=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=hR(),r=su(sR,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hR(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var dR=ho,pR=function(){function e(){d(this,e),this.browserResolver=au(nh),this.cordovaResolver=au(QD),this.underlyingResolver=null,this._redirectPersistence=Qc,this._completeRedirectFn=wf,this._overrideRedirectResult=cf}return y(e,[{key:"_initialize",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Xe($e().mark((function e(t,n,r,i){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Xe($e().mark((function e(t,n,r,i){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return rR()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return dR(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,iR();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vR(e){return e.unwrap()}function mR(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new bR(e,function(e,t){var n,r=Vt(e),i=t;return ho(t.customData.operationType,r,"argument-error"),ho(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Uc._fromError(r,i)}(e,t));else if(r){var i=yR(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function yR(e){var t=(e instanceof bt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof bt)&&"temporaryProof"in t&&"phoneNumber"in t)return jl.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Ha.PASSWORD)return null;switch(r){case Ha.GOOGLE:n=Ts;break;case Ha.FACEBOOK:n=Es;break;case Ha.GITHUB:n=Ss;break;case Ha.TWITTER:n=Ns;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Cs._create(r,u):hs._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Is(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof bt?n.credentialFromError(e):n.credentialFromResult(e)}function gR(e,t){return t.catch((function(t){throw t instanceof bt&&mR(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,yR(t)),additionalUserInfo:Mc(e),user:xR.getOrCreate(r)}}))}function kR(e,t){return wR.apply(this,arguments)}function wR(){return(wR=Xe($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return gR(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bR=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return y(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return gR(vR(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),xR=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=Vt(e);return zc.has(t)||zc.set(t,Bc._fromUser(t)),zc.get(t)}(t)}return y(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gR(this.auth,Js(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kR(this.auth,Ol(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gR(this.auth,Xl(this._delegate,t,pR)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lR(Lu(this.auth));case 2:return e.abrupt("return",mf(this._delegate,t,pR));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gR(this.auth,Zs(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return kR(this.auth,function(e,t,n){return Ml.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return gR(this.auth,function(e,t,n){return Jl.apply(this,arguments)}(this._delegate,e,pR))}},{key:"reauthenticateWithRedirect",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lR(Lu(this.auth));case 2:return e.abrupt("return",pf(this._delegate,t,pR));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return xc.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vs(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Cc(Vt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Cc(Vt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Vl.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return Tc(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return _c.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();xR.USER_MAP=new WeakMap;var _R=ho,IR=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;_R(r,"invalid-api-key",{appName:t.name}),_R(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?pR:void 0;this._delegate=n.initialize({options:{persistence:TR(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(to),this.linkUnderlyingAuth()}return y(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?xR.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Fu(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return lc.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return fc(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return cc.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Xe($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gR(this._delegate,pc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return bc.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ws.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Xe($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _R(nR(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,gf(this._delegate,pR);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",gR(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Lu(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ER(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ER(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return yc.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return sc.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Xe($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cR(this._delegate,t),e.t0=t,e.next=e.t0===oR.SESSION?4:e.t0===oR.LOCAL?6:e.t0===oR.NONE?11:13;break;case 4:return n=Qc,e.abrupt("break",14);case 6:return e.next=8,au(gl)._isAvailable();case 8:return r=e.sent,n=r?gl:Wc,e.abrupt("break",14);case 11:return n=uu,e.abrupt("break",14);case 13:return e.abrupt("return",uo("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return gR(this._delegate,function(e){return Ls.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return gR(this._delegate,Ys(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return gR(this._delegate,function(e,t){return rc.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return gR(this._delegate,mc(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return gR(this._delegate,function(e,t,n){return gc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return kR(this._delegate,function(e,t,n){return Pl.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _R(nR(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",gR(this._delegate,Yl(this._delegate,t,pR)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Xe($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _R(nR(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,lR(this._delegate);case 3:return e.abrupt("return",hf(this._delegate,t,pR));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return dc.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function ER(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&xR.getOrCreate(e))},error:t,complete:n}}function TR(e,t){var n=function(e,t){var n=hR();if(!n)return[];var r=su(sR,e,t);switch(n.getItem(r)){case oR.NONE:return[uu];case oR.LOCAL:return[gl,Qc];case oR.SESSION:return[Qc];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(gl)||n.push(gl),"undefined"!==typeof window)for(var r=0,i=[Wc,Qc];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(uu)||n.push(uu),n}IR.Persistence=oR;var SR=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new jl(vR(_D.auth()))}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return jl.credential(e,t)}}]),e}();SR.PHONE_SIGN_IN_METHOD=jl.PHONE_SIGN_IN_METHOD,SR.PROVIDER_ID=jl.PROVIDER_ID;var CR,AR=ho,NR=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_D.app();d(this,e),AR(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Nl(t,n,i.auth()),this.type=this._delegate.type}return y(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(CR=_D).INTERNAL.registerComponent(new jt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new IR(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Qa,PASSWORD_RESET:Ya,RECOVER_EMAIL:$a,REVERT_SECOND_FACTOR_ADDITION:Ja,VERIFY_AND_CHANGE_EMAIL:Xa,VERIFY_EMAIL:Za}},EmailAuthProvider:bs,FacebookAuthProvider:Es,GithubAuthProvider:Ss,GoogleAuthProvider:Ts,OAuthProvider:Is,SAMLAuthProvider:As,PhoneAuthProvider:SR,PhoneMultiFactorGenerator:ah,RecaptchaVerifier:NR,TwitterAuthProvider:Ns,Auth:IR,AuthCredential:ju,Error:bt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),CR.registerVersion("@firebase/auth-compat","0.4.2");var DR=function(){var e=l((0,r.useState)(!1),2),t=e[0],n=e[1],i=l((0,r.useState)(null),2),a=i[0],o=i[1];return(0,r.useEffect)((function(){$N.onAuthStateChanged((function(e){o(!!e&&{uid:e.uid,displayName:e.displayName,updateProfile:function(t){return Tc(e,{displayName:e.displayName})}}),n(!0)}))}),[]),(0,ZN.jsx)(ZN.Fragment,{children:t?(0,ZN.jsx)(mD,{refreshUser:function(){var e=$N.currentUser;o({uid:e.uid,displayName:e.displayName,updateProfile:function(t){return Tc(e,{displayName:e.displayName})}})},isLoggedIn:Boolean(a),userObj:a}):"initializing..."})};function RR(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Xm("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function PR(){if("undefined"===typeof Uint8Array)throw new Xm("unimplemented","Uint8Arrays are not available in this environment.")}function OR(){if("undefined"==typeof atob)throw new Xm("unimplemented","Blobs are unavailable in Firestore in this environment.")}var LR=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return OR(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return PR(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return OR(),new e(oC.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return PR(),new e(oC.fromUint8Array(t))}}]),e}();function MR(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=S(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var FR=function(){function e(){d(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){aC(e=MS(e,JS));var n=XS(e);if(n._uninitializedComponentsProvider)throw new Xm(Jm.FAILED_PRECONDITION,"SDK cache is already specified.");Wm("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new iS;return eC(n,i,new nS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){aC(e=MS(e,JS));var t=XS(e);if(t._uninitializedComponentsProvider)throw new Xm(Jm.FAILED_PRECONDITION,"SDK cache is already specified.");Wm("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new iS;return eC(t,r,new rS(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Xm(Jm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Zm;return e._queue.enqueueAndForgetEvenWhileRestricted(Xe($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Xe($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ly.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ly.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()($_(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),UR=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Kg||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Wm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return tC(this._delegate)}},{key:"disableNetwork",value:function(){return nC(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&RS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new Zm;return e.asyncQueue.enqueueAndForget(Xe($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=xT,n.next=3,_S(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(XS(MS(this._delegate,JS)))}},{key:"onSnapshotsInSync",value:function(e){return bA(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Xm("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new XR(this,KS(this._delegate,e))}catch(t){throw KR(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new qR(this,GS(this._delegate,e))}catch(t){throw KR(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new YR(this,function(e,t){if(e=MS(e,VS),DS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Xm(Jm.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new zS(e,null,function(e){return new Hk(my.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw KR(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=MS(e,JS);var r=Object.assign(Object.assign({},IA),n);return function(e){if(e.maxAttempts<1)throw new Xm(Jm.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Zm;return e.asyncQueue.enqueueAndForget(Xe($e().mark((function i(){var a;return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,IS(e);case 2:a=i.sent,new cS(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(XS(e),(function(n){return t(new SA(e,n))}),r)}(this._delegate,(function(n){return e(new jR(t,n))}))}},{key:"batch",value:function(){var e=this;return XS(this._delegate),new BR(new EA(this._delegate,(function(t){return xA(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return rC(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return iC(this._delegate,e).then((function(e){return e?new YR(t,e):null}))}}]),e}(),VR=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new LR(new oC(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return qR.forKey(t,this.firestore,null)}}]),n}(iA);var jR=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new VR(t)}return y(e,[{key:"get",value:function(e){var t=this,n=ZR(e);return this._delegate.get(n).then((function(e){return new HR(t._firestore,new sA(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=ZR(e);return n?(RR("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=ZR(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ZR(e);return this._delegate.delete(t),this}}]),e}(),BR=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=ZR(e);return n?(RR("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=ZR(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ZR(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),zR=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new cA(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new QR(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new VR(t),n),i.set(n,a)),a}}]),e}();zR.INSTANCES=new WeakMap;var qR=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new VR(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new XR(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new XR(this.firestore,KS(this._delegate,e))}catch(t){throw KR(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Vt(e))instanceof BS&&WS(this._delegate,e)}},{key:"set",value:function(e,t){t=RR("DocumentReference.set",t);try{return t?mA(this._delegate,e,t):mA(this._delegate,e)}catch(n){throw KR(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?yA(this._delegate,e):yA.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw KR(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return gA(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=GR(n),a=WR(n,(function(t){return new HR(e.firestore,new sA(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return wA(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?pA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=MS(e,BS);var t=MS(e.firestore,JS);return SS(XS(t),e._key,{source:"server"}).then((function(n){return _A(t,e,n)}))}(this._delegate):function(e){e=MS(e,BS);var t=MS(e.firestore,JS);return SS(XS(t),e._key).then((function(n){return _A(t,e,n)}))}(this._delegate)).then((function(e){return new HR(t.firestore,new sA(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(zR.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Xm("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new BS(n._delegate,r,new ky(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new BS(n._delegate,r,t))}}]),e}();function KR(e,t,n){return e.message=e.message.replace(t,n),e}function GR(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!MR(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function WR(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=MR(e[0])?e[0]:MR(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var HR=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new qR(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return hA(this._delegate,e._delegate)}}]),e}(),QR=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Qm(),t}}]),n}(HR),YR=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new VR(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,zC(this._delegate,function(e,t,n){var r=t,i=UC("where",e);return qC._create(i,r,n)}(t,n,r)))}catch(i){throw KR(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,zC(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=UC("orderBy",e);return GC._create(n,t)}(t,n)))}catch(r){throw KR(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,zC(this._delegate,(FS("limit",n=t),WC._create("limit",n,"F"))))}catch(r){throw KR(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,zC(this._delegate,(FS("limitToLast",n=t),WC._create("limitToLast",n,"L"))))}catch(r){throw KR(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,zC(this._delegate,QC.apply(void 0,arguments)))}catch(t){throw KR(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,zC(this._delegate,YC.apply(void 0,arguments)))}catch(t){throw KR(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,zC(this._delegate,JC.apply(void 0,arguments)))}catch(t){throw KR(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,zC(this._delegate,XC.apply(void 0,arguments)))}catch(t){throw KR(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return HS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?vA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=MS(e,zS);var t=MS(e.firestore,JS),n=XS(t),r=new dA(t);return CS(n,e._query,{source:"server"}).then((function(n){return new lA(t,r,e,n)}))}(this._delegate):function(e){e=MS(e,zS);var t=MS(e.firestore,JS),n=XS(t),r=new dA(t);return VC(e._query),CS(n,e._query).then((function(n){return new lA(t,r,e,n)}))}(this._delegate)).then((function(e){return new JR(t.firestore,new lA(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=GR(n),a=WR(n,(function(t){return new JR(e.firestore,new lA(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return wA(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(zR.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),$R=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new QR(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),JR=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new YR(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new QR(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new $R(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new QR(n._firestore,r))}))}},{key:"isEqual",value:function(e){return hA(this._delegate,e._delegate)}}]),e}(),XR=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new qR(this.firestore,e):null}},{key:"doc",value:function(e){try{return new qR(this.firestore,void 0===e?GS(this._delegate):GS(this._delegate,e))}catch(t){throw KR(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return kA(this._delegate,e).then((function(e){return new qR(t.firestore,e)}))}},{key:"isEqual",value:function(e){return WS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(zR.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(YR);function ZR(e){return MS(e,BS)}var eP=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I(uC,n)}return y(e,[{key:"isEqual",value:function(e){return(e=Vt(e))instanceof uC&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(gy.keyField().canonicalString())}}]),e}(),tP=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new wC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new gC("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=CA.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=AA.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new _C("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),nP={Firestore:UR,GeoPoint:cC,Timestamp:dy,Blob:LR,Transaction:jR,WriteBatch:BR,DocumentReference:qR,DocumentSnapshot:HR,Query:YR,QueryDocumentSnapshot:QR,QuerySnapshot:JR,CollectionReference:XR,FieldPath:eP,FieldValue:tP,setLogLevel:function(e){var t;t=e,zm.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new jt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},nP)))}(e,(function(e,t){return new UR(e,t,new FR)})),e.registerVersion("@firebase/firestore-compat","0.3.12")}(_D),a.createRoot(document.getElementById("root")).render((0,ZN.jsx)(r.StrictMode,{children:(0,ZN.jsx)(DR,{})}))}()}();
//# sourceMappingURL=main.d9580092.js.map